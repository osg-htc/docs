
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://osg-htc.org/docs/data/osdf/install-origin-container/">
      
      <link rel="icon" href="../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.8">
    
    
      
        <title>Installing the OSDF Origin by Container - OSG Site Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.644de097.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-69012-29","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installing-the-osdf-origin-by-container" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="OSG Site Documentation" class="md-header__button md-logo" aria-label="OSG Site Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OSG Site Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installing the OSDF Origin by Container
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/osg-htc/docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="OSG Site Documentation" class="md-nav__button md-logo" aria-label="OSG Site Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    OSG Site Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/osg-htc/docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../site-planning/" class="md-nav__link">
        Site Planning
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../site-verification/" class="md-nav__link">
        Site Verification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../site-maintenance/" class="md-nav__link">
        Site Maintenance
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../common/help/" class="md-nav__link">
        Help / Security Incidents
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Registration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Registration" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Registration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/contact-registration/" class="md-nav__link">
        Contact Information
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/registration/" class="md-nav__link">
        Resources and Collaborations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Resource Sharing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Resource Sharing" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Resource Sharing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" type="checkbox" id="__nav_7_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1">
          Compute
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Compute" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_1">
          <span class="md-nav__icon md-icon"></span>
          Compute
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../resource-sharing/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2" type="checkbox" id="__nav_7_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1_2">
          Containers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Containers" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_2">
          <span class="md-nav__icon md-icon"></span>
          Containers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../resource-sharing/os-backfill-containers/" class="md-nav__link">
        OSPool Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../resource-sharing/user-containers/" class="md-nav__link">
        User Allocations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_3" type="checkbox" id="__nav_7_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1_3">
          Compute Entrypoint
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Compute Entrypoint" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_3">
          <span class="md-nav__icon md-icon"></span>
          Compute Entrypoint
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../compute-element/htcondor-ce-overview/" class="md-nav__link">
        HTCondor-CE Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../compute-element/hosted-ce/" class="md-nav__link">
        Request a Hosted CE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../compute-element/install-htcondor-ce/" class="md-nav__link">
        Install HTCondor-CE
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_4" type="checkbox" id="__nav_7_1_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1_4">
          Worker Node
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Worker Node" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_4">
          <span class="md-nav__icon md-icon"></span>
          Worker Node
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker-node/using-wn/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker-node/install-wn/" class="md-nav__link">
        Install from RPM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker-node/install-wn-tarball/" class="md-nav__link">
        Install from Tarball
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker-node/install-wn-oasis/" class="md-nav__link">
        Install from OASIS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker-node/install-cvmfs/" class="md-nav__link">
        Install CVMFS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker-node/install-apptainer/" class="md-nav__link">
        Install Apptainer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker-node/using-wn-containers/" class="md-nav__link">
        Using WN Containers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2">
          Data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_1" type="checkbox" id="__nav_7_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2_1">
          HTTP & OASIS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="HTTP & OASIS" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_2_1">
          <span class="md-nav__icon md-icon"></span>
          HTTP & OASIS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../run-frontier-squid-container/" class="md-nav__link">
        Running Frontier Squid in a Container
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../frontier-squid/" class="md-nav__link">
        Install Frontier Squid RPM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../update-oasis/" class="md-nav__link">
        Update OASIS Shared Repo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../external-oasis-repos/" class="md-nav__link">
        Install an OASIS Repo
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_2" type="checkbox" id="__nav_7_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2_2">
          XRootD
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="XRootD" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_2_2">
          <span class="md-nav__icon md-icon"></span>
          XRootD
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../xrootd/overview/" class="md-nav__link">
        XRootD Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../xrootd/install-standalone/" class="md-nav__link">
        Install XRootD Standalone
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../xrootd/xrootd-authorization/" class="md-nav__link">
        Configure Authorization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../xrootd/install-client/" class="md-nav__link">
        Using XRootD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../xrootd/install-cms-xcache/" class="md-nav__link">
        Install CMS XCache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../xrootd/install-shoveler/" class="md-nav__link">
        Install XRootD Shoveler
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3" type="checkbox" id="__nav_7_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_3">
          Other
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Other" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          Other
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../other/install-gwms-frontend/" class="md-nav__link">
        Install GlideinWMS Frontend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../other/install-cvmfs-stratum1/" class="md-nav__link">
        Install a CVMFS Stratum 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../other/troubleshooting-gratia/" class="md-nav__link">
        Troubleshooting Gratia
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../other/schedd-filebeats/" class="md-nav__link">
        Install Transfer Log Filebeats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../other/osg-token-renewer/" class="md-nav__link">
        Install OSG Token Renewal Service
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Access Point
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Access Point" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Access Point
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../submit/install-ospool-ap/" class="md-nav__link">
        Install an OSPool Access Point
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../submit/ap-ospool-aup/" class="md-nav__link">
        Acceptable Use Policy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Data Federation (OSDF)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Federation (OSDF)" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Data Federation (OSDF)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stashcache/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2" type="checkbox" id="__nav_9_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2">
          Data Cache
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Cache" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_2">
          <span class="md-nav__icon md-icon"></span>
          Data Cache
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install-cache-container/" class="md-nav__link">
        Install from container
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install-cache-rpm/" class="md-nav__link">
        Install from RPM
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_3" type="checkbox" id="__nav_9_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9_3">
          Data Origin
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Origin" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_3">
          <span class="md-nav__icon md-icon"></span>
          Data Origin
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Install from container
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Install from container
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-starting" class="md-nav__link">
    Before Starting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-origin-server" class="md-nav__link">
    Configuring the Origin Server
  </a>
  
    <nav class="md-nav" aria-label="Configuring the Origin Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-posix-directory-export" class="md-nav__link">
    Configuring POSIX (directory) export
  </a>
  
    <nav class="md-nav" aria-label="Configuring POSIX (directory) export">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-volume" class="md-nav__link">
    Single volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-volumes" class="md-nav__link">
    Multiple volumes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-s3-export" class="md-nav__link">
    Configuring S3 export
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-for-initial-startup" class="md-nav__link">
    Preparing for Initial Startup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-an-origin" class="md-nav__link">
    Running an Origin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validating-the-origin" class="md-nav__link">
    Validating the Origin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#joining-the-origin-to-the-federation" class="md-nav__link">
    Joining the Origin to the Federation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validating-the-origin-through-the-federation" class="md-nav__link">
    Validating the Origin Through the Federation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-topics" class="md-nav__link">
    Advanced topics
  </a>
  
    <nav class="md-nav" aria-label="Advanced topics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#persisting-logs" class="md-nav__link">
    Persisting logs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#managing-an-origin-with-systemd" class="md-nav__link">
    Managing an origin with systemd
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-help" class="md-nav__link">
    Getting Help
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install-origin-rpm/" class="md-nav__link">
        Install from RPM
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Releases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Releases" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Releases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/release_series/" class="md-nav__link">
        Release Series
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2" type="checkbox" id="__nav_10_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2">
          OSG 24
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="OSG 24" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_2">
          <span class="md-nav__icon md-icon"></span>
          OSG 24
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/osg-24/" class="md-nav__link">
        News
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/updating-to-osg-24/" class="md-nav__link">
        Updating to OSG 24
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_3" type="checkbox" id="__nav_10_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_3">
          OSG 23
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="OSG 23" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_3">
          <span class="md-nav__icon md-icon"></span>
          OSG 23
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/osg-23/" class="md-nav__link">
        News
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/updating-to-osg-23/" class="md-nav__link">
        Updating to OSG 23
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/supported_platforms/" class="md-nav__link">
        Supported Platforms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/yum/" class="md-nav__link">
        OSG Yum Repos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/yum-basics/" class="md-nav__link">
        Yum Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/signing/" class="md-nav__link">
        RPM Signing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Tokens
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tokens" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Tokens
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/tokens/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/tokens/using-tokens/" class="md-nav__link">
        Using Tokens
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          CA Certificates
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CA Certificates" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          CA Certificates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/ca/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/certificate-management/" class="md-nav__link">
        Certificate Management Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12_3" type="checkbox" id="__nav_12_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3">
          Host Certificates
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Host Certificates" data-md-level="2">
        <label class="md-nav__title" for="__nav_12_3">
          <span class="md-nav__icon md-icon"></span>
          Host Certificates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/host-certs/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/host-certs/incommon/" class="md-nav__link">
        Using InCommon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/host-certs/lets-encrypt/" class="md-nav__link">
        Using Let's Encrypt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-starting" class="md-nav__link">
    Before Starting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-origin-server" class="md-nav__link">
    Configuring the Origin Server
  </a>
  
    <nav class="md-nav" aria-label="Configuring the Origin Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-posix-directory-export" class="md-nav__link">
    Configuring POSIX (directory) export
  </a>
  
    <nav class="md-nav" aria-label="Configuring POSIX (directory) export">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-volume" class="md-nav__link">
    Single volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-volumes" class="md-nav__link">
    Multiple volumes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-s3-export" class="md-nav__link">
    Configuring S3 export
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-for-initial-startup" class="md-nav__link">
    Preparing for Initial Startup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-an-origin" class="md-nav__link">
    Running an Origin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validating-the-origin" class="md-nav__link">
    Validating the Origin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#joining-the-origin-to-the-federation" class="md-nav__link">
    Joining the Origin to the Federation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validating-the-origin-through-the-federation" class="md-nav__link">
    Validating the Origin Through the Federation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-topics" class="md-nav__link">
    Advanced topics
  </a>
  
    <nav class="md-nav" aria-label="Advanced topics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#persisting-logs" class="md-nav__link">
    Persisting logs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#managing-an-origin-with-systemd" class="md-nav__link">
    Managing an origin with systemd
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-help" class="md-nav__link">
    Getting Help
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/osg-htc/docs/edit/master/docs/data/osdf/install-origin-container.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



<h1 id="installing-the-osdf-origin-by-container">Installing the OSDF Origin by Container<a class="headerlink" href="#installing-the-osdf-origin-by-container" title="Permanent link">&para;</a></h1>
<p>This document describes how to run an Open Science Data Federation (OSDF) Origin service via containers.
This service allows projects and organizations to distribute their data in a scalable manner to distributed high-throughput computing jobs,
reducing data transfer over the wide-area network and increasing throughput to jobs.</p>
<h2 id="before-starting">Before Starting<a class="headerlink" href="#before-starting" title="Permanent link">&para;</a></h2>
<p>Before starting the installation process, consider the following requirements:</p>
<ul>
<li><strong>Container runtime:</strong> This guide assumes Docker as the container runtime,
    for which the host must have a running <code>docker</code> service,
   and you must have the ability to start containers (i.e., belong to the <code>docker</code> Unix group).</li>
<li><strong>Host certificate:</strong> Required for authentication.  See note below.</li>
<li><strong>Network ports:</strong> The origin service requires the following ports open:<ul>
<li>Inbound TCP port 8443 for file access via the HTTP(S) and XRoot protocols.</li>
<li>Inbound TCP port 8444 for access to web endpoints such as origin-based token issuers, federation health checks, and
  metrics</li>
</ul>
</li>
<li>
<p><strong>Service requirements:</strong> The recommended resources for an origin in the OSDF are:</p>
<ul>
<li>4 cores</li>
<li>25 Gbps connectivity</li>
<li>20 GB of RAM</li>
</ul>
<p>At a minumum, an origin in the OSDF should have:</p>
<ul>
<li>1 core</li>
<li>1 Gbps connectivity</li>
<li>12 GB of RAM</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Host certificates</p>
<p>Origins are accessed by users through browsers, meaning origins need a certificate from a CA acceptable to a standard browser.
Examples include <a href="../../../security/host-certs/lets-encrypt/">Let's Encrypt</a> or the InCommon RSA CA.
Origins without a valid certificate for the browser cannot be added to the OSDF.
Note that, unlike legacy grid software, the public certificate file will need to contain the "full chain", including any
intermediate CAs (if you're unsure about your setup, try accessing your origin from your browser).</p>
<p>The certificate chain and key should be mounted into the following locations:</p>
<ul>
<li><strong>Host Certificate Chain</strong>: <code>/etc/pelican/certificates/tls.crt</code></li>
<li><strong>Host Key</strong>: <code>/etc/pelican/certificates/tls.key</code></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">osdf-origin 7.18</p>
<p>This document covers versions 7.18 and later of the <code>osdf-origin</code> container image.</p>
</div>
<div class="admonition note">
<p class="admonition-title">root</p>
<p>The paths used as examples on this page (e.g., <code>/etc/osdf-origin</code>) require root to edit;
if you do not have root on the host, choose new locations where you have modification permissions.</p>
</div>
<h2 id="configuring-the-origin-server">Configuring the Origin Server<a class="headerlink" href="#configuring-the-origin-server" title="Permanent link">&para;</a></h2>
<p>The preferred method of configuring a Pelican-based OSDF Origin is via a YAML file that will be
mounted into the container into the <code>/etc/pelican/config.d</code> directory.
This document will use <code>/etc/osdf-origin/config.yaml</code> as the name of the configuration file outside of the container.</p>
<p>Create <code>/etc/osdf-origin/config.yaml</code> with the following contents:
<div class="highlight"><pre><span></span><code>Origin:
# XRootD:
#   Sitename: &lt;RESOURCE NAME REGISTERED WITH OSG&gt;

Server:
  Hostname: &quot;&lt;FQDN&gt;&quot;
</code></pre></div>
Replacing <code>&lt;FQDN&gt;</code> with the externally-accessible FQDN of your cache service
(this should match one of the SANs in your host certificate).
You will also uncomment and fill in the value for <code>XRootD.Sitename</code> in a later step, after registration is complete.</p>
<p>You must tell Pelican the data to export to the federation.
An origin may export one or more directory trees, or one or more S3 buckets -- follow one of the sections below.
A single origin cannot export both a bucket and a directory tree.</p>
<h3 id="configuring-posix-directory-export">Configuring POSIX (directory) export<a class="headerlink" href="#configuring-posix-directory-export" title="Permanent link">&para;</a></h3>
<p>Set these options to export one or more directory trees to the federation.</p>
<h4 id="single-volume">Single volume<a class="headerlink" href="#single-volume" title="Permanent link">&para;</a></h4>
<p>The simplest POSIX setup is to export a single directory tree to the federation.
Use the following configuration to do that:</p>
<div class="highlight"><pre><span></span><code>Origin:
  StorageType: &quot;posix&quot;
  Exports:
    - FederationPrefix: &quot;&lt;EXTERNAL OSDF NAMESPACE&gt;&quot;
      StoragePrefix:    &quot;/pelican&quot;
      Capabilities:    # Add or remove individual capabilities as desired
        - Reads        # Enable authenticated reading of objects from under the directory tree through a cache
        - PublicReads  # Enable unauthenticated reading of objects from under the directory tree through a cache
        - DirectReads  # Enable reading objects from under the directory tree without going through a cache
        - Listings     # Enable directory listings
        - Writes       # Enable writing to files in the directory tree
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should enable DirectReads during initial setup to make validation easier.</p>
</div>
<h4 id="multiple-volumes">Multiple volumes<a class="headerlink" href="#multiple-volumes" title="Permanent link">&para;</a></h4>
<p>You may want to export multiple directory trees to the federation,
for example if you export data from multiple filesystems,
or want to have different permissions for the different directory trees.</p>
<p><div class="highlight"><pre><span></span><code>Origin:
  StorageType: &quot;posix&quot;
  Exports:
    - FederationPrefix: &quot;&lt;EXTERNAL OSDF NAMESPACE 1&gt;&quot;
      StoragePrefix:    &quot;/pelican/&lt;SUBDIRECTORY 1&gt;&quot;
      Capabilities:    # Add or remove individual capabilities as desired
        - Reads        # Enable authenticated reading of objects from under the directory tree through a cache
        - PublicReads  # Enable unauthenticated reading of objects from under the directory tree through a cache
        - DirectReads  # Enable reading objects from under the directory tree without going through a cache
        - Listings     # Enable directory listings
        - Writes       # Enable writing to files in the directory tree
    - FederationPrefix: &quot;&lt;EXTERNAL OSDF NAMESPACE 2&gt;&quot;
      StoragePrefix:    &quot;/pelican/&lt;SUBDIRECTORY 2&gt;&quot;
      Capabilities:    # Add or remove individual capabilities as desired
        - Reads        # Enable authenticated reading of objects from under the directory tree through a cache
        - PublicReads  # Enable unauthenticated reading of objects from under the directory tree through a cache
        - DirectReads  # Enable reading objects from under the directory tree without going through a cache
        - Listings     # Enable directory listings
        - Writes       # Enable writing to files in the directory tree
    ...
</code></pre></div>
where <code>&lt;SUBDIRECTORY 1&gt;</code>, <code>&lt;SUBDIRECTORY 2&gt;</code>, etc. will be mount points for volume that you want to export.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should enable DirectReads during initial setup to make validation easier.</p>
</div>
<h3 id="configuring-s3-export">Configuring S3 export<a class="headerlink" href="#configuring-s3-export" title="Permanent link">&para;</a></h3>
<p>To configure your origin to serve objects from an S3 endpoint, see the
<a href="https://docs.pelicanplatform.org/federating-your-data/s3-backend">upstream documentation</a>.</p>
<h2 id="preparing-for-initial-startup">Preparing for Initial Startup<a class="headerlink" href="#preparing-for-initial-startup" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>The origin identifies itself to the federation via public key authentication;
before starting the origin for the first time, it is recommended to generate a keypair.
Download the Pelican client from <a href="https://github.com/PelicanPlatform/pelican/releases">https://github.com/PelicanPlatform/pelican/releases</a>,
install the executable as <code>/usr/local/bin/pelican</code>, and run:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host$ </span><span class="nb">cd</span> /etc/osdf-origin
<span class="gp">root@host$ </span>pelican key create
</code></pre></div>

<p>The newly created files, <code>private-key.pem</code> and <code>issuer-pub.jwks</code> are the private and public keys, respectively.</p>
</li>
<li>
<p><strong>Save these files</strong>; if you lose the <code>private-key.pem</code> file, your origin will need to be re-approved.</p>
</li>
</ol>
<h2 id="running-an-origin">Running an Origin<a class="headerlink" href="#running-an-origin" title="Permanent link">&para;</a></h2>
<p>This section describes how the origin may be run using the Docker command-line.
For production, we recommend using a container orchestration service such as
<a href="https://docs.docker.com/compose/">Docker Compose</a>,
or <a href="https://kubernetes.io/">Kubernetes</a>.</p>
<p>This example uses the single-volume POSIX setup.</p>
<p>This table provides a reminder of the parameters that will be used in the examples:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Example value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ORIGIN_HOST_PORT</code></td>
<td><code>8443</code></td>
<td>The host port used for data transfer via HTTP(S)</td>
</tr>
<tr>
<td><code>WEB_INTERFACE_PORT</code></td>
<td><code>8444</code></td>
<td>The host port used for service management via the web interface</td>
</tr>
<tr>
<td><code>PRIVATE_KEY</code></td>
<td><code>/etc/osdf-origin/private-key.pem</code></td>
<td>The private key generated by <code>pelican key create</code></td>
</tr>
<tr>
<td><code>HOST_CERT_CHAIN</code></td>
<td><code>/etc/osdf-origin/hostcert.pem</code></td>
<td>The host certificate, with full chain</td>
</tr>
<tr>
<td><code>HOST_KEY</code></td>
<td><code>/etc/osdf-origin/hostkey.pem</code></td>
<td>The private key matching the host certificate</td>
</tr>
<tr>
<td><code>ORIGIN_CONFIG_FILE</code></td>
<td><code>/etc/osdf-origin/config.yaml</code></td>
<td>The YAML file containing various origin settings</td>
</tr>
<tr>
<td><code>OUTSIDE_DIRECTORY</code></td>
<td><code>/mnt/origin</code></td>
<td>The directory outside the container that stores the data to be served</td>
</tr>
<tr>
<td><code>INSIDE_DIRECTORY</code></td>
<td><code>/pelican</code></td>
<td>The path inside the container corresponding to StoragePrefix in your origin config file</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>docker run --rm <span class="se">\</span>
             --publish &lt;ORIGIN_HOST_PORT&gt;:8443 <span class="se">\</span>
             --publish &lt;WEB_INTERFACE_HOST PORT&gt;:8444 <span class="se">\</span>
             --volume &lt;PRIVATE_KEY&gt;:/etc/pelican/issuer-keys/private-key.pem <span class="se">\</span>
             --volume &lt;HOST_CERT_CHAIN&gt;:/etc/pelican/certificates/tls.crt <span class="se">\</span>
             --volume &lt;HOST_KEY&gt;:/etc/pelican/certificates/tls.key <span class="se">\</span>
             --volume &lt;ORIGIN_CONFIG_FILE&gt;:/etc/pelican/config.d/99-local.yaml <span class="se">\</span>
             --volume &lt;OUTSIDE_DIRECTORY&gt;:&lt;INSIDE_DIRECTORY&gt; <span class="se">\</span>
             --name osdf-origin <span class="se">\</span>
             hub.opensciencegrid.org/pelican_platform/osdf-origin:latest
</code></pre></div>
<p>Using the example values from the table, this is</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>docker run --rm <span class="se">\</span>
             --publish <span class="m">8443</span>:8443 <span class="se">\</span>
             --publish <span class="m">8444</span>:8444 <span class="se">\</span>
             --volume /etc/osdf-origin/private-key.pem:/etc/pelican/issuer-keys/private-key.pem <span class="se">\</span>
             --volume /etc/osdf-origin/hostcert.pem:/etc/pelican/certificates/tls.crt <span class="se">\</span>
             --volume /etc/osdf-origin/hostkey.pem:/etc/pelican/certificates/tls.key <span class="se">\</span>
             --volume /etc/osdf-origin/config.yaml:/etc/pelican/config.d/99-local.yaml <span class="se">\</span>
             --volume /mnt/origin:/pelican <span class="se">\</span>
             --name osdf-origin <span class="se">\</span>
             hub.opensciencegrid.org/pelican_platform/osdf-origin:latest
</code></pre></div>
<h2 id="validating-the-origin">Validating the Origin<a class="headerlink" href="#validating-the-origin" title="Permanent link">&para;</a></h2>
<p>Download a test file (POSIX) or object (S3) from your origin (replacing <code>ORIGIN_HOSTNAME</code> with the host name of your origin,
and TEST_PATH with the OSDF path to the test file or object)</p>
<p><div class="highlight"><pre><span></span><code>user@host$ pelican object get -c ORIGIN_HOSTNAME:8443 &#39;osdf:///&lt;TEST_PATH&gt;&#39; -o /tmp/testfile
</code></pre></div>
(Note: this test will not work if DirectReads are not enabled.)</p>
<p>Verify the contents of <code>/tmp/testfile</code> match the test file or object your origin was serving.</p>
<p>If you get errors, add the <code>--debug</code> flag to the <code>pelican object get</code> invocation.</p>
<p>Debugging information will be in your container logs e.g., <code>docker logs osdf-origin</code>.
To increase the debugging information in the origin, edit your origin configuration file and set:
<div class="highlight"><pre><span></span><code>Debug: true
Logging:
  Origin:
    SciTokens: trace
</code></pre></div></p>
<p>See <a href="../../../common/help/">this page</a> for requesting assistance; please include the logs in your request.</p>
<h2 id="joining-the-origin-to-the-federation">Joining the Origin to the Federation<a class="headerlink" href="#joining-the-origin-to-the-federation" title="Permanent link">&para;</a></h2>
<p>The origin must be registered with the OSG prior to joining the data federation.
Send mail to <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#104;&#101;&#108;&#112;&#64;&#111;&#115;&#103;&#45;&#104;&#116;&#99;&#46;&#111;&#114;&#103;">&#104;&#101;&#108;&#112;&#64;&#111;&#115;&#103;&#45;&#104;&#116;&#99;&#46;&#111;&#114;&#103;</a> requesting registration; provide the following information:</p>
<ul>
<li>Origin hostname</li>
<li>Administrative and security contact(s)</li>
<li>Institution that the origin belongs to</li>
</ul>
<p>OSG Staff will register the origin and respond with the Resource Name.</p>
<p>Once you have that information, edit <code>/etc/osdf-origin/config.yaml</code>, and set <code>XRootD.Sitename</code>:
<div class="highlight"><pre><span></span><code>XRootD:
  Sitename: &lt;RESOURCE NAME REGISTERED WITH OSG&gt;
</code></pre></div></p>
<h2 id="validating-the-origin-through-the-federation">Validating the Origin Through the Federation<a class="headerlink" href="#validating-the-origin-through-the-federation" title="Permanent link">&para;</a></h2>
<p>Once your origin has been registered in the federation,
perform the following actions to verify that it can be used through the federation.
These steps will use the Pelican client
(which you can download from <a href="https://github.com/PelicanPlatform/pelican/releases">https://github.com/PelicanPlatform/pelican/releases</a>).</p>
<p>If the actions fail, see debugging information in your container logs,
which are accessible via
<div class="highlight"><pre><span></span><code>docker logs osdf-origin
</code></pre></div>
To increase the debugging information in the origin, edit your origin configuration file and set:
<div class="highlight"><pre><span></span><code>Debug: true
Logging:
  Origin:
    SciTokens: trace
</code></pre></div>
See <a href="../../../common/help/">this page</a> for requesting assistance; please include the logs in your request.</p>
<ol>
<li>
<p>Download a test file (POSIX) or object (S3) directly from your origin,
    (replacing <code>&lt;TEST_PATH&gt;</code> with the OSDF path to the test file or object):</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $ </span>pelican object get <span class="s1">&#39;osdf:///&lt;TEST_PATH&gt;?directread=1&#39;</span> -o /tmp/testfile
</code></pre></div>

<p>Verify the contents of <code>/tmp/testfile</code> match the test file or object your origin was serving.
(Note: this test will not work if DirectReads are not enabled.)</p>
</li>
<li>
<p>Download a test file (POSIX) or object (S3) from your origin via a cache,
    (replacing <code>&lt;TEST_PATH&gt;</code> with the OSDF path to the test file or object):</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $ </span>pelican object get <span class="s1">&#39;osdf:///&lt;TEST_PATH&gt;&#39;</span> -o /tmp/testfile2
</code></pre></div>

<p>Verify the contents of <code>/tmp/testfile2</code> match the test file or object your origin was serving.</p>
</li>
<li>
<p>Verify that your test is running against your Pelican origin:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $ </span>docker logs osdf-origin <span class="p">|</span> grep &lt;TEST_PATH&gt;
</code></pre></div>

<p>Replacing <code>&lt;TEST PATH&gt;</code> with the same path that you used in step (1) or (2).
If you see output, then the OSDF is directing client requests to your Pelican origin!</p>
</li>
</ol>
<h2 id="advanced-topics">Advanced topics<a class="headerlink" href="#advanced-topics" title="Permanent link">&para;</a></h2>
<h3 id="persisting-logs">Persisting logs<a class="headerlink" href="#persisting-logs" title="Permanent link">&para;</a></h3>
<p>By default, the origin sends logs to the console, where it is captured by the container runtime's logging mechanism.
To save logs to a file instead, set the log location in your origin config file (e.g., <code>/etc/osdf-origin/config.yaml</code>)
as follows:</p>
<div class="highlight"><pre><span></span><code>Logging:
  LogLocation: &lt;LOG_FILE_PATH&gt;
</code></pre></div>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Note: the osdf-origin image does not come with log rotation; if you save logs to a file, you must
set up log rotation yourself to avoid running the origin out of disk space.</p>
</div>
<h3 id="managing-an-origin-with-systemd">Managing an origin with systemd<a class="headerlink" href="#managing-an-origin-with-systemd" title="Permanent link">&para;</a></h3>
<p>If you do not have a container orchestration service but still want to manage a container-based origin,
you may run the container via a systemd service.
The following example uses the values from the setup documented in the <a href="#running-an-origin">Running an Origin</a> section above.</p>
<p>Create the systemd service file <code>/etc/systemd/system/docker-osdf-origin.service</code> as follows:</p>
<div class="highlight"><pre><span></span><code>[Unit]
Description=OSDF Origin Container
After=docker.service
Requires=docker.service

[Service]
TimeoutStartSec=0
Restart=always
ExecStartPre=-/usr/bin/docker stop osdf-origin
ExecStartPre=-/usr/bin/docker rm osdf-origin
ExecStartPre=/usr/bin/docker pull hub.opensciencegrid.org/pelican_platform/osdf-origin:latest
ExecStart=/usr/bin/docker run --rm --name osdf-origin \
  --publish 8443:8443 \
  --publish 8444:8444 \
  --volume /etc/osdf-origin/private-key.pem:/etc/pelican/issuer-keys/private-key.pem \
  --volume /etc/osdf-origin/hostcert.pem:/etc/pelican/certificates/tls.crt \
  --volume /etc/osdf-origin/hostkey.pem:/etc/pelican/certificates/tls.key \
  --volume /etc/osdf-origin/config.yaml:/etc/pelican/config.d/99-local.yaml \
  --volume /mnt/origin:/pelican \
  --name osdf-origin \
  hub.opensciencegrid.org/pelican_platform/osdf-origin:latest

[Install]
WantedBy=multi-user.target
</code></pre></div>
<p>Enable and start the service with:</p>
<div class="highlight"><pre><span></span><code><span class="gp">root@host $ </span>systemctl <span class="nb">enable</span> docker-osdf-origin
<span class="gp">root@host $ </span>systemctl start docker-osdf-origin
</code></pre></div>
<h2 id="getting-help">Getting Help<a class="headerlink" href="#getting-help" title="Permanent link">&para;</a></h2>
<p>To get assistance, please use the <a href="../../../common/help/">this page</a>.</p>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../install-cache-rpm/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Install from RPM" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Install from RPM
            </div>
          </div>
        </a>
      
      
        
        <a href="../install-origin-rpm/" class="md-footer__link md-footer__link--next" aria-label="Next: Install from RPM" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Install from RPM
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div>
    This material is based upon work supported by the
    <a href="https://nsf.gov">National Science Foundation</a>
    under Grant Nos.
    <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=1148698">1148698</a>
    ,
    <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=1836650">1836650</a>
    , and
    <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">2030508</a>
    . Any opinions, findings, and conclusions or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the views of the National Science Foundation.
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
        Material for MkDocs
    </a>
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.sections", "navigation.top"], "search": "../../../assets/javascripts/workers/search.5e67fbfe.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c44cc438.min.js"></script>
      
    
  </body>
</html>