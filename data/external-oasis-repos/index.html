
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://opensciencegrid.org/docs/data/external-oasis-repos/">
      
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.4">
    
    
      
        <title>Install an OASIS Repo - OSG Site Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.358818c7.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.f0267088.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-69012-29","opensciencegrid.github.io"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#install-an-oasis-repository" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://opensciencegrid.org/docs/" title="OSG Site Documentation" class="md-header-nav__button md-logo" aria-label="OSG Site Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            OSG Site Documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Install an OASIS Repo
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/opensciencegrid/docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://opensciencegrid.org/docs/" title="OSG Site Documentation" class="md-nav__button md-logo" aria-label="OSG Site Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    OSG Site Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/opensciencegrid/docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../detailed-overview/" class="md-nav__link">
      Detailed Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../site-planning/" class="md-nav__link">
      Site Planning
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../site-verification/" class="md-nav__link">
      Site Verification
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../site-responsibilities/" class="md-nav__link">
      Site Responsibilities
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Resource Sharing
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Resource Sharing" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Resource Sharing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../resource-sharing/overview/" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../resource-sharing/os-backfill-containers/" class="md-nav__link">
      Site Backfill
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../resource-sharing/user-containers/" class="md-nav__link">
      User Allocations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Compute Entrypoint
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Compute Entrypoint" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Compute Entrypoint
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/htcondor-ce-overview/" class="md-nav__link">
      HTCondor-CE Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/hosted-ce/" class="md-nav__link">
      Request a Hosted CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/install-htcondor-ce/" class="md-nav__link">
      Install HTCondor-CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/job-router-recipes/" class="md-nav__link">
      Job Router Recipes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/troubleshoot-htcondor-ce/" class="md-nav__link">
      Troubleshooting HTCondor-CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/submit-htcondor-ce/" class="md-nav__link">
      Submitting to HTCondor-CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/covid-19/" class="md-nav__link">
      Supporting COVID-19 Research
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Worker Node
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Worker Node" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        Worker Node
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/using-wn/" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn/" class="md-nav__link">
      Install from RPM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn-tarball/" class="md-nav__link">
      Install from Tarball
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn-oasis/" class="md-nav__link">
      Install from OASIS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-cvmfs/" class="md-nav__link">
      Install CVMFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-singularity/" class="md-nav__link">
      Install Singularity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/using-wn-containers/" class="md-nav__link">
      Using WN Containers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9" checked>
    
    <label class="md-nav__link" for="nav-9">
      Data
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Data" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon"></span>
        Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-1" type="checkbox" id="nav-9-1" checked>
    
    <label class="md-nav__link" for="nav-9-1">
      HTTP & OASIS
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="HTTP & OASIS" data-md-level="2">
      <label class="md-nav__title" for="nav-9-1">
        <span class="md-nav__icon md-icon"></span>
        HTTP & OASIS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../run-frontier-squid-container/" class="md-nav__link">
      Running Frontier Squid in a Container
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../frontier-squid/" class="md-nav__link">
      Install Frontier Squid RPM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../update-oasis/" class="md-nav__link">
      Update OASIS Shared Repo
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Install an OASIS Repo
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Install an OASIS Repo
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-starting" class="md-nav__link">
    Before Starting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rhel7-based-systems" class="md-nav__link">
    RHEL7-based Systems
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rhel6-based-systems" class="md-nav__link">
    RHEL6-based Systems
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apache-and-repository-mounts" class="md-nav__link">
    Apache and Repository Mounts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-repository" class="md-nav__link">
    Creating a Repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hosting-a-repository-on-oasis" class="md-nav__link">
    Hosting a Repository on OASIS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#replacing-an-existing-oasis-repository-server" class="md-nav__link">
    Replacing an Existing OASIS Repository Server
  </a>
  
    <nav class="md-nav" aria-label="Replacing an Existing OASIS Repository Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#without-changing-the-server-dns-name" class="md-nav__link">
    Without changing the server DNS name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-changing-the-server-dns-name" class="md-nav__link">
    With changing the server DNS name
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#removing-a-repository-from-oasis" class="md-nav__link">
    Removing a Repository from OASIS
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-2" type="checkbox" id="nav-9-2">
    
    <label class="md-nav__link" for="nav-9-2">
      XRootD
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="XRootD" data-md-level="2">
      <label class="md-nav__title" for="nav-9-2">
        <span class="md-nav__icon md-icon"></span>
        XRootD
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../xrootd/overview/" class="md-nav__link">
      XRootD Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xrootd/install-standalone/" class="md-nav__link">
      Install XRootD Standalone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xrootd/install-storage-element/" class="md-nav__link">
      Install XRootD SE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xrootd/xrootd-authorization/" class="md-nav__link">
      Configure Authorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xrootd/install-client/" class="md-nav__link">
      Using XRootD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xrootd/install-cms-xcache/" class="md-nav__link">
      Install CMS XCache
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-3" type="checkbox" id="nav-9-3">
    
    <label class="md-nav__link" for="nav-9-3">
      StashCache
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="StashCache" data-md-level="2">
      <label class="md-nav__title" for="nav-9-3">
        <span class="md-nav__icon md-icon"></span>
        StashCache
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../stashcache/overview/" class="md-nav__link">
      StashCache Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../stashcache/run-stashcache-container/" class="md-nav__link">
      Running a Cache in a container
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../stashcache/run-stash-origin-container/" class="md-nav__link">
      Running an Origin in a container
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../stashcache/install-cache/" class="md-nav__link">
      Install a Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../stashcache/install-origin/" class="md-nav__link">
      Install an Origin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../stashcache/vo-data/" class="md-nav__link">
      Getting VO data into StashCache
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Submit
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Submit" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        <span class="md-nav__icon md-icon"></span>
        Submit
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-10-1" type="checkbox" id="nav-10-1">
    
    <label class="md-nav__link" for="nav-10-1">
      Flocking
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Flocking" data-md-level="2">
      <label class="md-nav__title" for="nav-10-1">
        <span class="md-nav__icon md-icon"></span>
        Flocking
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../submit/osg-flock/" class="md-nav__link">
      Flock to OSG
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Security
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Security" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        <span class="md-nav__icon md-icon"></span>
        Security
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/certificate-management/" class="md-nav__link">
      Certificate Management Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-11-2" type="checkbox" id="nav-11-2">
    
    <label class="md-nav__link" for="nav-11-2">
      Host Certificates
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Host Certificates" data-md-level="2">
      <label class="md-nav__title" for="nav-11-2">
        <span class="md-nav__icon md-icon"></span>
        Host Certificates
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/overview/" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/incommon/" class="md-nav__link">
      Using InCommon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/lets-encrypt/" class="md-nav__link">
      Using Let's Encrypt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/digicert/" class="md-nav__link">
      Using DigiCert
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Common
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Common" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        <span class="md-nav__icon md-icon"></span>
        Common
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/ca/" class="md-nav__link">
      CA Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/yum/" class="md-nav__link">
      OSG Yum Repos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/configuration-with-osg-configure/" class="md-nav__link">
      Configuration with OSG-Configure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/registration/" class="md-nav__link">
      Registration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Other
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Other" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        <span class="md-nav__icon md-icon"></span>
        Other
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/install-gwms-frontend/" class="md-nav__link">
      Install GlideinWMS Frontend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/install-cvmfs-stratum1/" class="md-nav__link">
      Install a CVMFS Stratum 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/troubleshooting-gratia/" class="md-nav__link">
      Troubleshooting Gratia
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/schedd-filebeats/" class="md-nav__link">
      Install Transfer Log Filebeats
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14">
    
    <label class="md-nav__link" for="nav-14">
      Release Information
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Release Information" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        <span class="md-nav__icon md-icon"></span>
        Release Information
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/notes/" class="md-nav__link">
      Release Note Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-14-2" type="checkbox" id="nav-14-2">
    
    <label class="md-nav__link" for="nav-14-2">
      3.5 Release Notes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="3.5 Release Notes" data-md-level="2">
      <label class="md-nav__title" for="nav-14-2">
        <span class="md-nav__icon md-icon"></span>
        3.5 Release Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-30/" class="md-nav__link">
      OSG Release 3.5.30
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-29/" class="md-nav__link">
      OSG Release 3.5.29
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-28-2/" class="md-nav__link">
      OSG Release 3.5.28-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-28/" class="md-nav__link">
      OSG Release 3.5.28
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-27/" class="md-nav__link">
      OSG Release 3.5.27
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-26/" class="md-nav__link">
      OSG Release 3.5.26
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-25-2/" class="md-nav__link">
      OSG Release 3.5.25-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-25/" class="md-nav__link">
      OSG Release 3.5.25
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-24/" class="md-nav__link">
      OSG Release 3.5.24
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-23/" class="md-nav__link">
      OSG Release 3.5.23
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-22/" class="md-nav__link">
      OSG Release 3.5.22
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-21-2/" class="md-nav__link">
      OSG Release 3.5.21-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-21/" class="md-nav__link">
      OSG Release 3.5.21
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-20/" class="md-nav__link">
      OSG Release 3.5.20
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-19/" class="md-nav__link">
      OSG Release 3.5.19
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-18/" class="md-nav__link">
      OSG Release 3.5.18
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-17/" class="md-nav__link">
      OSG Release 3.5.17
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-16/" class="md-nav__link">
      OSG Release 3.5.16
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-15-3/" class="md-nav__link">
      OSG Release 3.5.15-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-15-2/" class="md-nav__link">
      OSG Release 3.5.15-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-15/" class="md-nav__link">
      OSG Release 3.5.15
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-14/" class="md-nav__link">
      OSG Release 3.5.14
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-13/" class="md-nav__link">
      OSG Release 3.5.13
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-12/" class="md-nav__link">
      OSG Release 3.5.12
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-11/" class="md-nav__link">
      OSG Release 3.5.11
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-10-2/" class="md-nav__link">
      OSG Release 3.5.10-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-10/" class="md-nav__link">
      OSG Release 3.5.10
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-9/" class="md-nav__link">
      OSG Release 3.5.9
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-8-4/" class="md-nav__link">
      OSG Release 3.5.8-4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-8-3/" class="md-nav__link">
      OSG Release 3.5.8-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-8-2/" class="md-nav__link">
      OSG Release 3.5.8-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-8/" class="md-nav__link">
      OSG Release 3.5.8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-7/" class="md-nav__link">
      OSG Release 3.5.7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-6/" class="md-nav__link">
      OSG Release 3.5.6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-5/" class="md-nav__link">
      OSG Release 3.5.5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-4/" class="md-nav__link">
      OSG Release 3.5.4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-3/" class="md-nav__link">
      OSG Release 3.5.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-2/" class="md-nav__link">
      OSG Release 3.5.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-1/" class="md-nav__link">
      OSG Release 3.5.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-0/" class="md-nav__link">
      OSG Release 3.5.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/release_series/" class="md-nav__link">
      OSG Release Series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/supported_platforms/" class="md-nav__link">
      Supported Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/yum-basics/" class="md-nav__link">
      Yum Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/signing/" class="md-nav__link">
      RPM Signing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15">
    
    <label class="md-nav__link" for="nav-15">
      Deprecated
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Deprecated" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        <span class="md-nav__icon md-icon"></span>
        Deprecated
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-15-1" type="checkbox" id="nav-15-1">
    
    <label class="md-nav__link" for="nav-15-1">
      POSIX Storage
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="POSIX Storage" data-md-level="2">
      <label class="md-nav__title" for="nav-15-1">
        <span class="md-nav__icon md-icon"></span>
        POSIX Storage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../gridftp/" class="md-nav__link">
      Install GridFTP Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../load-balanced-gridftp/" class="md-nav__link">
      Install Load Balanced GridFTP
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-15-2" type="checkbox" id="nav-15-2">
    
    <label class="md-nav__link" for="nav-15-2">
      HDFS
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="HDFS" data-md-level="2">
      <label class="md-nav__title" for="nav-15-2">
        <span class="md-nav__icon md-icon"></span>
        HDFS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../hadoop-overview/" class="md-nav__link">
      HDFS Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-hadoop/" class="md-nav__link">
      Install HDFS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-15-3" type="checkbox" id="nav-15-3">
    
    <label class="md-nav__link" for="nav-15-3">
      Security
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Security" data-md-level="2">
      <label class="md-nav__title" for="nav-15-3">
        <span class="md-nav__icon md-icon"></span>
        Security
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/lcmaps-voms-authentication/" class="md-nav__link">
      LCMAPS VOMS authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/user-certs/" class="md-nav__link">
      User Certificates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/gsissh/" class="md-nav__link">
      Install GSI-enabled SSH
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/install-rsv/" class="md-nav__link">
      Install RSV
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/advanced-rsv-configuration/" class="md-nav__link">
      Advanced RSV Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/rsv-control/" class="md-nav__link">
      Manage RSV via rsv-control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/install-rsv-gwms-tester/" class="md-nav__link">
      RSV GlideinWMS Tester
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../common/help/" class="md-nav__link">
      Get Help
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-starting" class="md-nav__link">
    Before Starting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rhel7-based-systems" class="md-nav__link">
    RHEL7-based Systems
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rhel6-based-systems" class="md-nav__link">
    RHEL6-based Systems
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apache-and-repository-mounts" class="md-nav__link">
    Apache and Repository Mounts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-repository" class="md-nav__link">
    Creating a Repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hosting-a-repository-on-oasis" class="md-nav__link">
    Hosting a Repository on OASIS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#replacing-an-existing-oasis-repository-server" class="md-nav__link">
    Replacing an Existing OASIS Repository Server
  </a>
  
    <nav class="md-nav" aria-label="Replacing an Existing OASIS Repository Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#without-changing-the-server-dns-name" class="md-nav__link">
    Without changing the server DNS name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-changing-the-server-dns-name" class="md-nav__link">
    With changing the server DNS name
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#removing-a-repository-from-oasis" class="md-nav__link">
    Removing a Repository from OASIS
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/opensciencegrid/docs/edit/master/docs/data/external-oasis-repos.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="install-an-oasis-repository">Install an OASIS Repository<a class="headerlink" href="#install-an-oasis-repository" title="Permanent link">&para;</a></h1>
<p>OASIS (the <strong>OSG</strong> <strong>A</strong>pplication <strong>S</strong>oftware <strong>I</strong>nstallation <strong>S</strong>ervice) is an infrastructure, based on
<a href="https://cvmfs.readthedocs.io">CVMFS</a>, for distributing software throughout the OSG.  Once software is installed into
an OASIS repository, the goal is to make it available across about 90% of the OSG within an hour.</p>
<p>OASIS consists of keysigning infrastructure, a content distribution network (CDN), and a shared CVMFS repository that
is hosted by the OSG.  Many use cases will be covered by utilizing the <a href="../update-oasis/">shared repository</a>; this document
covers how to install, configure, and host your own CVMFS <em>repository server</em>.  This server will distribute software
via OASIS, but will be hosted and operated externally from the OSG project.</p>
<p>OASIS-based distribution and key signing is available to OSG VOs or repositories affiliated with an OSG VO.
See the <a href="https://opensciencegrid.org/technology/policy/external-oasis-repos/">policy page</a> for more information
on what repositories OSG is willing to distribute.</p>
<h2 id="before-starting">Before Starting<a class="headerlink" href="#before-starting" title="Permanent link">&para;</a></h2>
<p>CVMFS repositories work at the kernel filesystem layer, which adds more stringent host requirements than a typical
OSG install.  The host OS must meet ONE of the following:</p>
<ul>
<li>RHEL 7.3 (or equivalent) or later.  <strong>This option is recommended</strong>.</li>
<li>RHEL 6 with the aufs kernel module.</li>
</ul>
<p>Additionally,</p>
<ul>
<li><strong>User IDs:</strong> If it does not exist already, the installation will create the <code>cvmfs</code> Linux user</li>
<li><strong>Group IDs:</strong> If they do not exist already, the installation will create the Linux groups <code>cvmfs</code> and <code>fuse</code></li>
<li><strong>Network ports:</strong> This page will configure the repository to distribute using Apache HTTPD on port 8000.  At the
    minimum, the repository needs in-bound access from the OASIS CDN.</li>
<li><strong>Disk space:</strong> This host will need enough free disk space to host <em>two</em> copies of the software: one compressed
    and one uncompressed. <code>/srv/cvmfs</code> will hold all the published data (compressed and de-deuplicated).  The
    <code>/var/spool/cvmfs</code> directory will contain all the data in all current transactions (uncompressed).</li>
<li><strong>Root access</strong> will be needed to install.  Software install will be done as an unprivileged user.</li>
<li><strong>Yum</strong> will need to be <a href="../../common/yum/">configured to use the OSG repositories</a>.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Overlay-FS limitations</p>
<p>CVMFS on RHEL7 only supports Overlay-FS if the underlying filesystem is <code>ext3</code> or <code>ext4</code>; make sure
<code>/var/spool/cvmfs</code> is one of these filesystem types.</p>
<p>If this is not possible, add <code>CVMFS_DONT_CHECK_OVERLAYFS_VERSION=yes</code> to your CVMFS configuration.  Using
<code>xfs</code> will work if it was created with <code>ftype=1</code></p>
</div>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<h3 id="rhel7-based-systems">RHEL7-based Systems<a class="headerlink" href="#rhel7-based-systems" title="Permanent link">&para;</a></h3>
<p>For a RHEL7-based system, installation is a straightforward install via <code>yum</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> yum install cvmfs-server osg-oasis 
</code></pre></div>

<h3 id="rhel6-based-systems">RHEL6-based Systems<a class="headerlink" href="#rhel6-based-systems" title="Permanent link">&para;</a></h3>
<p>A RHEL6 host needs additional steps in order to add the AUFS2 kernel module.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> rpm -i https://cvmrepo.web.cern.ch/cvmrepo/yum/cvmfs-release-latest.noarch.rpm
<span class="gp">root@host #</span> yum install --enablerepo<span class="o">=</span>cernvm-kernel --disablerepo<span class="o">=</span>cernvm kernel aufs2-util cvmfs-server.x86_64 osg-oasis
<span class="gp">root@host #</span> reboot
</code></pre></div>

<h3 id="apache-and-repository-mounts">Apache and Repository Mounts<a class="headerlink" href="#apache-and-repository-mounts" title="Permanent link">&para;</a></h3>
<p>For all installs, we recommend mounting all the local repositories on startup:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> <span class="nb">echo</span> <span class="s2">&quot;cvmfs_server mount -a&quot;</span> &gt;&gt;/etc/rc.local
<span class="gp">root@host #</span> chmod +x /etc/rc.local
</code></pre></div>

<p>The Apache HTTPD service should be configured to listen on port 8000, have the <code>KeepAlive</code> option enabled, and be
started:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> <span class="nb">echo</span> Listen <span class="m">8000</span> &gt;&gt;/etc/httpd/conf.d/cvmfs.conf 
<span class="gp">root@host #</span> <span class="nb">echo</span> KeepAlive on &gt;&gt;/etc/httpd/conf.d/cvmfs.conf 
<span class="gp">root@host #</span> chkconfig httpd on 
<span class="gp">root@host #</span> service httpd start
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Check Firewalls</p>
<p>Make sure that port 8000 is available to the Internet.  Check the setting of the host- and site-level firewalls.
The next steps will fail if the web server is not accessible.</p>
</div>
<h2 id="creating-a-repository">Creating a Repository<a class="headerlink" href="#creating-a-repository" title="Permanent link">&para;</a></h2>
<p>Prior to creation, the repository administrator will need to make two decisions:</p>
<ul>
<li><strong>Select a repository name</strong>; typically, this is derived from the VO or project's name and ends in
    <code>opensciencegrid.org</code>.  For example, the NoVA VO runs the repository <code>nova.opensciencegrid.org</code>.  For this section,
    we will use <code>&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;</code>.</li>
<li><strong>Select a repository owner</strong>: Software publication will need to run by a non-<code>root</code> Unix user account; for this
    document, we will use <code>&lt;LIBRARIAN&gt;</code> as the account name of the repository owner.</li>
</ul>
<p>The initial repository creation must be run as <code>root</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> <span class="nb">echo</span> -e <span class="s2">&quot;\*\\t\\t-\\tnofile\\t\\t16384&quot;</span> &gt;&gt;/etc/security/limits.conf
<span class="gp">root@host #</span> <span class="nb">ulimit</span> -n <span class="m">16384</span>
<span class="hll"><span class="gp">root@host #</span> cvmfs_server mkfs -o &lt;LIBRARIAN&gt; &lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;
</span><span class="hll"><span class="gp">root@host #</span> cat &gt;/srv/cvmfs/&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;/.htaccess <span class="s">&lt;&lt;xEOFx</span>
</span><span class="go">Order deny,allow</span>
<span class="go">Deny from all</span>
<span class="go">Allow from 127.0.0.1</span>
<span class="go">Allow from ::1</span>
<span class="go">Allow from 129.79.53.0/24 129.93.244.192/26 129.93.227.64/26</span>
<span class="go">Allow from 2001:18e8:2:6::/56 2600:900:6::/48 </span>
<span class="go">xEOFx</span>
</code></pre></div>

<p>Here, we increase the number of open files allowed, create the repository using the <code>mkfs</code> command, and then limit the hosts that are allowed to access the repo to the OSG CDN.</p>
<p>Next, adjust the configuration in the repository as follows.  </p>
<div class="codehilite"><pre><span></span><code><span class="hll"><span class="gp">root@host #</span> cat &gt;&gt;/etc/cvmfs/repositories.d/&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;/server.conf <span class="s">&lt;&lt;xEOFx</span>
</span><span class="go">CVMFS_AUTO_TAG_TIMESPAN=&quot;2 weeks ago&quot;</span>
<span class="go">CVMFS_IGNORE_XDIR_HARDLINKS=true</span>
<span class="go">CVMFS_GENERATE_LEGACY_BULK_CHUNKS=false</span>
<span class="go">CVMFS_AUTOCATALOGS=true</span>
<span class="go">CVMFS_ENFORCE_LIMITS=true</span>
<span class="go">CVMFS_FORCE_REMOUNT_WARNING=false</span>
<span class="go">xEOFx</span>
</code></pre></div>

<p>Additionally, especially if files will be frequently deleted, enabling
garbage collection is recommended in this way:</p>
<div class="codehilite"><pre><span></span><code><span class="hll"><span class="gp">root@host #</span> cat &gt;&gt;/etc/cvmfs/repositories.d/&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;/server.conf <span class="s">&lt;&lt;xEOFx</span>
</span><span class="go">CVMFS_GARBAGE_COLLECTION=true</span>
<span class="go">CVMFS_AUTO_GC=false</span>
<span class="go">xEOFx</span>
</code></pre></div>

<p>The above assumes that you have your own mechanism to run cvmfs_server
gc regularly (typically daily) at a time when it won't interfere with
publications, since garbage collection and publication can't be done at
the same time.  <code>CVMFS_AUTO_GC=true</code> will automatically run garbage
collection periodically after publications, but those times are not
always convenient.</p>
<p>Also, check the <a href="http://cvmfs.readthedocs.io/en/latest/cpt-repo.html#configuration-recommendation-by-use-case">cvmfs documentation</a> for additional recommendations for special purpose repositories.</p>
<p>Now verify that the repository is readable over HTTP:</p>
<div class="codehilite"><pre><span></span><code><span class="hll"><span class="gp">root@host #</span> wget -qO- http://localhost:8000/cvmfs/&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;/.cvmfswhitelist <span class="p">|</span> cat -v
</span></code></pre></div>

<p>That should print several lines including some gibberish at the end.</p>
<h2 id="hosting-a-repository-on-oasis">Hosting a Repository on OASIS<a class="headerlink" href="#hosting-a-repository-on-oasis" title="Permanent link">&para;</a></h2>
<!-- NOTE: these steps are referenced by the "Replacing an Existing
     OASIS Repository Server" section below and also on the
     operations/external-oasis-repos.md page, so if you change
     anything here check those to make sure they are still accurate.
  -->

<p>In order to host a repository on OASIS, perform the following steps:</p>
<ol>
<li>
<p><strong>Verify your VO's registration is up-to-date</strong>.  All repositories need to be associated with a VO; the VO needs to
    assign an <em>OASIS manager</em> in Topology who would be responsible for the contents of any of the VO's repositories and
    will be contacted in case of issues. To designate an OASIS manager, have the VO manager update the
    <a href="https://github.com/opensciencegrid/topology/tree/master/virtual-organizations">Topology registration</a>.</p>
</li>
<li>
<p>Create a <a href="https://support.opensciencegrid.org/helpdesk/tickets/new">support ticket</a> using the following template:</p>
<div class="codehilite"><pre><span></span><code><span class="hll"><span class="go">Please add a new CVMFS repository to OASIS for VO &lt;VO NAME&gt; using the URL</span>
</span><span class="hll"><span class="go">    http://&lt;FQDN&gt;:8000/cvmfs/&lt;OASIS REPOSITORY&gt;</span>
</span><span class="hll"><span class="go">The VO responsible manager will be &lt;OASIS MANAGER&gt;.</span>
</span></code></pre></div>

<p>Replace the <code>&lt;ANGLE BRACKET TEXT&gt;</code> items with the appropriate values.</p>
</li>
<li>
<p>If the repository name matches <code>*.opensciencegrid.org</code> or <code>*.osgstorage.org</code>, wait for the go-ahead from the OSG
    representative before continuing with the remaining instructions; for all other repositories (such as <code>*.egi.eu</code>),
    you are done.</p>
</li>
<li>
<p>When you are told in the ticket to proceed to the next step, first if
    the repository might be in a transaction abort it:</p>
<div class="codehilite"><pre><span></span><code><span class="hll"><span class="gp">root@host #</span> su &lt;LIBRARIAN&gt; -c <span class="s2">&quot;cvmfs_server abort &lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;&quot;</span>
</span></code></pre></div>

<p>Then execute the following commands:</p>
<div class="codehilite"><pre><span></span><code><span class="hll"><span class="gp">root@host #</span> wget -O /srv/cvmfs/&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;/.cvmfswhitelist <span class="se">\</span>
</span><span class="hll">            http://oasis.opensciencegrid.org/cvmfs/&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;/.cvmfswhitelist
</span><span class="gp">root@host #</span> cp /etc/cvmfs/keys/opensciencegrid.org/opensciencegrid.org.pub <span class="se">\</span>
<span class="hll">            /etc/cvmfs/keys/&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;.pub
</span></code></pre></div>

<p>Replace <code>&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;</code> as appropriate.
If the cp command prompts about overwriting an existing file, type 'y'.</p>
</li>
<li>
<p>Verify that publishing operation succeeds:</p>
<div class="codehilite"><pre><span></span><code><span class="hll"><span class="gp">root@host #</span> su &lt;LIBRARIAN&gt; -c <span class="s2">&quot;cvmfs_server transaction &lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;&quot;</span>
</span><span class="hll"><span class="gp">root@host #</span> su &lt;LIBRARIAN&gt; -c <span class="s2">&quot;cvmfs_server publish &lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;&quot;</span>
</span></code></pre></div>

<p>Within an hour, the repository updates should appear at the OSG Operations and FNAL Stratum-1 servers.</p>
<p>On success, make sure the whitelist update happens daily by creating <code>/etc/cron.d/fetch-cvmfs-whitelist</code> with the
following contents:</p>
<div class="codehilite"><pre><span></span><code><span class="hll"><span class="go">5 4 * * * &lt;LIBRARIAN&gt; cd /srv/cvmfs/&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt; &amp;&amp; wget -qO .cvmfswhitelist.new http://oasis.opensciencegrid.org/cvmfs/&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;/.cvmfswhitelist &amp;&amp; mv .cvmfswhitelist.new .cvmfswhitelist</span>
</span></code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This cronjob eliminates the need for the repository service administrator to periodically use
<code>cvmfs_server resign</code> to update <code>.cvmfswhitelist</code> as described in the upstream CVMFS documentation.</p>
</div>
</li>
<li>
<p>Update the open support ticket to indicate that the previous steps have been completed</p>
</li>
</ol>
<p>Once the repository is fully replicated on the OSG, the VO may proceed in publishing into CVMFS using the
<code>&lt;LIBRARIAN&gt;</code> account on the repository server.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We strongly recommend the repository maintainer read through the upstream documentation on
<a href="http://cernvm.cern.ch/portal/filesystem/maintain-repositories">maintaining repositories</a> and
<a href="http://cernvm.cern.ch/portal/filesystem/repository-limits">content limitations</a>.</p>
</div>
<p>If the repository ends in <code>.opensciencegrid.org</code> or <code>.osgstorage.org</code>, the VO may ask for it to be replicated outside the US.  The
VO should open a GGUS ticket following EGI's <a href="https://wiki.egi.eu/wiki/PROC20">PROC20</a>.</p>
<h2 id="replacing-an-existing-oasis-repository-server">Replacing an Existing OASIS Repository Server<a class="headerlink" href="#replacing-an-existing-oasis-repository-server" title="Permanent link">&para;</a></h2>
<p>If a need arises to replace a server for an existing <code>*.opensciencegrid.org</code> or <code>*.osgstorage.org</code> repository, there are two ways to do it:
one without changing the DNS name and one with changing it.
The latter can take longer because it requires OSG Operations intervention.</p>
<div class="admonition note">
<p class="admonition-title">Revision numbers must increase</p>
<p>CVMFS does not allow repository revision numbers to decrease, so the instructions below make sure the revision numbers only go up.</p>
</div>
<h3 id="without-changing-the-server-dns-name">Without changing the server DNS name<a class="headerlink" href="#without-changing-the-server-dns-name" title="Permanent link">&para;</a></h3>
<p>If you are recreating the repository on the same machine, use the following command to 
remove the repository configuration while preserving the data and keys:</p>
<div class="codehilite"><pre><span></span><code><span class="hll"><span class="gp">root@host #</span> cvmfs_server rmfs -p &lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;
</span></code></pre></div>

<p>Otherwise if it is a new machine, copy the keys from /etc/cvmfs/keys/<code>&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;</code>.* and the data from /srv/cvmfs/<code>&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;</code> from the old server to the new, making sure that no publish operations happen on the old server while you copy the data.</p>
<p>Then in either case use <code>cvmfs_server import</code> instead of <code>cvmfs_server mkfs</code> in the above instructions for <a href="#creating-a-repository">Creating the Repository</a>, in order to reuse old data and keys.</p>
<p>If you run an old and a new machine in parallel for a while, make sure that when you put the new machine into production (by moving the DNS name) that the new machine has had at least as many publishes as the old machine, so the revision number does not decrease.</p>
<h3 id="with-changing-the-server-dns-name">With changing the server DNS name<a class="headerlink" href="#with-changing-the-server-dns-name" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you create a repository from scratch, as opposed to copying the data and keys from an old server, it is in fact better to change the DNS name of the server because that causes the OSG Operations server to reinitialize the .cvmfswhitelist.</p>
</div>
<p>If you create a replacement repository on a new machine from scratch, follow the normal instructions on this page above, but with the following differences in the <a href="#hosting-a-repository-on-oasis">Hosting a Repository on OASIS</a> section:</p>
<ul>
<li>In step 2, instead of asking in the support ticket to create a new repository, give the new URL and ask them to change the repository registration to that URL.</li>
<li>
<p>When you do the publish in step 5, add a <code>-n NNNN</code> option where <code>NNNN</code> is a revision number greater than the number on the existing repository.
    That number can be found by this command on a client machine:</p>
<div class="codehilite"><pre><span></span><code><span class="hll"><span class="gp">user@host $</span> attr -qg revision /cvmfs/&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;
</span></code></pre></div>

</li>
<li>
<p>Skip step 6; there is no need to tell OSG Operations when you are finished.</p>
</li>
<li>After enough time has elapsed for the publish to propagate to clients, typically around 15 minutes, verify that the new chosen revision has reached a client.</li>
</ul>
<h2 id="removing-a-repository-from-oasis">Removing a Repository from OASIS<a class="headerlink" href="#removing-a-repository-from-oasis" title="Permanent link">&para;</a></h2>
<p>In order to remove a repository that is being hosted on OASIS, perform the following steps:</p>
<ol>
<li>If the repository has been replicated outside of the U.S., open a GGUS ticket asking that the replication be removed
    from EGI Stratum-1s. Wait until this ticket is resolved before proceeding.</li>
<li>Open a <a href="https://support.opensciencegrid.org/helpdesk/tickets/new">support ticket</a> asking to shut down the repository, giving the repository
    name (e.g., <code>&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;</code>), and the corresponding VO.</li>
</ol>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../update-oasis/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Update OASIS Shared Repo
              </div>
            </div>
          </a>
        
        
          <a href="../xrootd/overview/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                XRootD Overview
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        This material is based upon work supported by the
        <a href="https://nsf.gov">National Science Foundation</a>
        under Grant Nos.
        <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=1148698">1148698</a>
        and
        <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=1836650">1836650</a>
        . Any opinions, findings, and conclusions or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the views of the National Science Foundation.
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>

      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.7e0ee788.min.js"></script>
      <script src="../../assets/javascripts/bundle.b3a72adc.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>