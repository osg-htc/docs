
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://osg-htc.org/docs/data/stashcache/install-origin/">
      
      <link rel="icon" href="../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.8">
    
    
      
        <title>Installing the OSDF Origin - OSG Site Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.644de097.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-69012-29","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installing-the-osdf-origin" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="OSG Site Documentation" class="md-header__button md-logo" aria-label="OSG Site Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OSG Site Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installing the OSDF Origin
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/osg-htc/docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="OSG Site Documentation" class="md-nav__button md-logo" aria-label="OSG Site Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    OSG Site Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/osg-htc/docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../site-planning/" class="md-nav__link">
        Site Planning
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../site-verification/" class="md-nav__link">
        Site Verification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../site-maintenance/" class="md-nav__link">
        Site Maintenance
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../common/help/" class="md-nav__link">
        Help / Security Incidents
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Registration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Registration" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Registration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/contact-registration/" class="md-nav__link">
        Contact Information
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/registration/" class="md-nav__link">
        Resources and Collaborations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Resource Sharing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Resource Sharing" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Resource Sharing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" type="checkbox" id="__nav_7_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1">
          Compute
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Compute" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_1">
          <span class="md-nav__icon md-icon"></span>
          Compute
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../resource-sharing/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2" type="checkbox" id="__nav_7_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1_2">
          Containers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Containers" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_2">
          <span class="md-nav__icon md-icon"></span>
          Containers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../resource-sharing/os-backfill-containers/" class="md-nav__link">
        OSPool Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../resource-sharing/user-containers/" class="md-nav__link">
        User Allocations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_3" type="checkbox" id="__nav_7_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1_3">
          Compute Entrypoint
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Compute Entrypoint" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_3">
          <span class="md-nav__icon md-icon"></span>
          Compute Entrypoint
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../compute-element/htcondor-ce-overview/" class="md-nav__link">
        HTCondor-CE Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../compute-element/hosted-ce/" class="md-nav__link">
        Request a Hosted CE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../compute-element/install-htcondor-ce/" class="md-nav__link">
        Install HTCondor-CE
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_4" type="checkbox" id="__nav_7_1_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1_4">
          Worker Node
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Worker Node" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_4">
          <span class="md-nav__icon md-icon"></span>
          Worker Node
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker-node/using-wn/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker-node/install-wn/" class="md-nav__link">
        Install from RPM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker-node/install-wn-tarball/" class="md-nav__link">
        Install from Tarball
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker-node/install-wn-oasis/" class="md-nav__link">
        Install from OASIS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker-node/install-cvmfs/" class="md-nav__link">
        Install CVMFS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker-node/install-apptainer/" class="md-nav__link">
        Install Apptainer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker-node/using-wn-containers/" class="md-nav__link">
        Using WN Containers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2">
          Data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_1" type="checkbox" id="__nav_7_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2_1">
          HTTP & OASIS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="HTTP & OASIS" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_2_1">
          <span class="md-nav__icon md-icon"></span>
          HTTP & OASIS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../run-frontier-squid-container/" class="md-nav__link">
        Running Frontier Squid in a Container
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../frontier-squid/" class="md-nav__link">
        Install Frontier Squid RPM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../update-oasis/" class="md-nav__link">
        Update OASIS Shared Repo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../external-oasis-repos/" class="md-nav__link">
        Install an OASIS Repo
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_2" type="checkbox" id="__nav_7_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2_2">
          XRootD
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="XRootD" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_2_2">
          <span class="md-nav__icon md-icon"></span>
          XRootD
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../xrootd/overview/" class="md-nav__link">
        XRootD Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../xrootd/install-standalone/" class="md-nav__link">
        Install XRootD Standalone
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../xrootd/xrootd-authorization/" class="md-nav__link">
        Configure Authorization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../xrootd/install-client/" class="md-nav__link">
        Using XRootD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../xrootd/install-cms-xcache/" class="md-nav__link">
        Install CMS XCache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../xrootd/install-shoveler/" class="md-nav__link">
        Install XRootD Shoveler
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3" type="checkbox" id="__nav_7_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_3">
          Other
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Other" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          Other
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../other/configuration-with-osg-configure/" class="md-nav__link">
        Configuration with OSG-Configure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../other/install-gwms-frontend/" class="md-nav__link">
        Install GlideinWMS Frontend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../other/install-cvmfs-stratum1/" class="md-nav__link">
        Install a CVMFS Stratum 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../other/troubleshooting-gratia/" class="md-nav__link">
        Troubleshooting Gratia
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../other/schedd-filebeats/" class="md-nav__link">
        Install Transfer Log Filebeats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../other/osg-token-renewer/" class="md-nav__link">
        Install OSG Token Renewal Service
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Access Point
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Access Point" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Access Point
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../submit/install-ospool-ap/" class="md-nav__link">
        Install an OSPool Access Point
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../submit/ap-ospool-aup/" class="md-nav__link">
        Acceptable Use Policy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Data Federation (OSDF)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Federation (OSDF)" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Data Federation (OSDF)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2" type="checkbox" id="__nav_9_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2">
          Data Cache
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Cache" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_2">
          <span class="md-nav__icon md-icon"></span>
          Data Cache
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../run-stashcache-container/" class="md-nav__link">
        Install from container
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install-cache/" class="md-nav__link">
        Install from RPM
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_3" type="checkbox" id="__nav_9_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9_3">
          Data Origin
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Origin" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_3">
          <span class="md-nav__icon md-icon"></span>
          Data Origin
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../run-stash-origin-container/" class="md-nav__link">
        Install from container
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Install from RPM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Install from RPM
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-starting" class="md-nav__link">
    Before Starting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-origin" class="md-nav__link">
    Installing the Origin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-origin-server" class="md-nav__link">
    Configuring the Origin Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manually-setting-the-fqdn-optional" class="md-nav__link">
    Manually Setting the FQDN (optional)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managing-the-origin-services" class="md-nav__link">
    Managing the Origin Services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-to-authorization-files-optional" class="md-nav__link">
    Adding to Authorization Files (Optional)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verifying-the-origin-server" class="md-nav__link">
    Verifying the Origin Server
  </a>
  
    <nav class="md-nav" aria-label="Verifying the Origin Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-availability" class="md-nav__link">
    Testing availability
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-directory-export" class="md-nav__link">
    Testing directory export
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-file-access-unauthenticated-origin" class="md-nav__link">
    Testing file access (unauthenticated origin)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-file-access-authenticated-origin" class="md-nav__link">
    Testing file access (authenticated origin)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registering-the-origin" class="md-nav__link">
    Registering the Origin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-to-osg-36" class="md-nav__link">
    Updating to OSG 3.6
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-help" class="md-nav__link">
    Getting Help
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vo-data/" class="md-nav__link">
        Publishing VO data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Releases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Releases" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Releases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/release_series/" class="md-nav__link">
        Release Series
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2" type="checkbox" id="__nav_10_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2">
          OSG 23
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="OSG 23" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_2">
          <span class="md-nav__icon md-icon"></span>
          OSG 23
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/osg-23/" class="md-nav__link">
        News
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/updating-to-osg-23/" class="md-nav__link">
        Updating to OSG 23
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_3" type="checkbox" id="__nav_10_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_3">
          OSG 3.6
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="OSG 3.6" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_3">
          <span class="md-nav__icon md-icon"></span>
          OSG 3.6
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/osg-36/" class="md-nav__link">
        News
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/updating-to-osg-36/" class="md-nav__link">
        Updating to OSG 3.6
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/supported_platforms/" class="md-nav__link">
        Supported Platforms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/yum/" class="md-nav__link">
        OSG Yum Repos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/yum-basics/" class="md-nav__link">
        Yum Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/signing/" class="md-nav__link">
        RPM Signing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Tokens
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tokens" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Tokens
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/tokens/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/tokens/using-tokens/" class="md-nav__link">
        Using Tokens
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          CA Certificates
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CA Certificates" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          CA Certificates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/ca/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/certificate-management/" class="md-nav__link">
        Certificate Management Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12_3" type="checkbox" id="__nav_12_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3">
          Host Certificates
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Host Certificates" data-md-level="2">
        <label class="md-nav__title" for="__nav_12_3">
          <span class="md-nav__icon md-icon"></span>
          Host Certificates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/host-certs/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/host-certs/incommon/" class="md-nav__link">
        Using InCommon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/host-certs/lets-encrypt/" class="md-nav__link">
        Using Let's Encrypt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-starting" class="md-nav__link">
    Before Starting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-origin" class="md-nav__link">
    Installing the Origin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-origin-server" class="md-nav__link">
    Configuring the Origin Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manually-setting-the-fqdn-optional" class="md-nav__link">
    Manually Setting the FQDN (optional)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managing-the-origin-services" class="md-nav__link">
    Managing the Origin Services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-to-authorization-files-optional" class="md-nav__link">
    Adding to Authorization Files (Optional)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verifying-the-origin-server" class="md-nav__link">
    Verifying the Origin Server
  </a>
  
    <nav class="md-nav" aria-label="Verifying the Origin Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-availability" class="md-nav__link">
    Testing availability
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-directory-export" class="md-nav__link">
    Testing directory export
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-file-access-unauthenticated-origin" class="md-nav__link">
    Testing file access (unauthenticated origin)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-file-access-authenticated-origin" class="md-nav__link">
    Testing file access (authenticated origin)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registering-the-origin" class="md-nav__link">
    Registering the Origin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-to-osg-36" class="md-nav__link">
    Updating to OSG 3.6
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-help" class="md-nav__link">
    Getting Help
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/osg-htc/docs/edit/master/docs/data/stashcache/install-origin.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



<h1 id="installing-the-osdf-origin">Installing the OSDF Origin<a class="headerlink" href="#installing-the-osdf-origin" title="Permanent link">&para;</a></h1>
<div class="admonition warning">
<p class="admonition-title">Deprecation warning</p>
<p>This document is outdated and describes an XCache-based OSDF Origin install, which deprecated.
Future OSDF Origins should be based on Pelican; documentation for a Pelican-based OSDF Origin install is forthcoming.</p>
</div>
<p>This document describes how to install an Open Science Data Federation (OSDF) origin service.  This service allows an organization
to export its data to the data federation.</p>
<div class="admonition note">
<p class="admonition-title">Minimum version for this documentation</p>
<p>This document describes features introduced in XCache 3.3.0, released on 2022-12-08.
When installing, ensure that your version of the <code>stash-origin</code> RPM is at least 3.3.0.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The OSDF Origin was previously named "Stash Origin" and some documentation and software may use the old name.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <em>origin</em> must be registered with the OSG prior to joining the data federation. You may start the
registration process prior to finishing the installation by <a href="#registering-the-origin">using this link</a> 
along with information like:</p>
<ul>
<li>Resource name and hostname</li>
<li>VO associated with this origin server (which will be used to determine the origin's namespace prefix)</li>
<li>Administrative and security contact(s)</li>
<li>Who (or what) will be allowed to access the VO's data</li>
<li>Which caches will be allowed to cache the VO data</li>
</ul>
</div>
<h2 id="before-starting">Before Starting<a class="headerlink" href="#before-starting" title="Permanent link">&para;</a></h2>
<p>Before starting the installation process, consider the following requirements:</p>
<ul>
<li><strong>Operating system:</strong> A RHEL 7 or RHEL 8 or compatible operating systems.</li>
<li><strong>User IDs:</strong> If they do not exist already, the installation will create the Linux user IDs <code>condor</code> and <code>xrootd</code>;
  only the <code>xrootd</code> user is utilized for the running daemons.</li>
<li><strong>Host certificate:</strong> Required for authentication.
  See our <a href="../../../security/host-certs/">host certificate documentation</a> for instructions on how to request and install host certificates.</li>
<li><strong>Network ports:</strong> The origin service requires the following ports open:</li>
<li>Inbound TCP port 1094 for unauthenticated file access via the XRoot or HTTP protocols (if serving public data)</li>
<li>Inbound TCP port 1095 for authenticated file access via the XRoot or HTTPS protocols (if serving authenticated data)</li>
<li>Outbound TCP port 1213 to <code>redirector.osgstorage.org</code> for connecting to the data federation</li>
<li>Outbound UDP port 9930 for reporting to <code>xrd-report.osgstorage.org</code> and <code>xrd-mon.osgstorage.org</code> for monitoring.</li>
<li><strong>Hardware requirements:</strong> We recommend that an origin has at least 1Gbps connectivity and 8GB of RAM.
  We suggest that several gigabytes of local disk space be available for log files,
  although some logging verbosity can be reduced.</li>
</ul>
<p>As with all OSG software installations, there are some one-time steps to prepare in advance:</p>
<ul>
<li>Obtain root access to the host</li>
<li>Prepare <a href="../../../common/yum/">the required Yum repositories</a></li>
<li>Install <a href="../../../common/ca/">CA certificates</a></li>
</ul>
<h2 id="installing-the-origin">Installing the Origin<a class="headerlink" href="#installing-the-origin" title="Permanent link">&para;</a></h2>
<p>The origin service consists of one or more XRootD daemons and their dependencies for the authentication infrastructure.
To simplify installation, OSG provides convenience RPMs that install all required
software with a single command:</p>
<div class="highlight"><pre><span></span><code><span class="gp">root@host # </span>yum install stash-origin
</code></pre></div>
<p>For this installation guide, we assume that the data to be exported to the federation is mounted at <code>/mnt/stash</code>
and owned by the <code>xrootd:xrootd</code> user.</p>
<h2 id="configuring-the-origin-server">Configuring the Origin Server<a class="headerlink" href="#configuring-the-origin-server" title="Permanent link">&para;</a></h2>
<p>The <code>stash-origin</code> package provides a default configuration files in
<code>/etc/xrootd/xrootd-stash-origin.cfg</code> and <code>/etc/xrootd/config.d</code>.
Administrators may provide additional configuration by placing files in <code>/etc/xrootd/config.d</code>
of the form <code>/etc/xrootd/config.d/1*.cfg</code> (for directives that need to be processed BEFORE the OSG configuration)
or <code>/etc/xrootd/config.d/9*.cfg</code> (for directives that are processed AFTER the OSG configuration).</p>
<p>You <em>must</em> configure every variable in <code>/etc/xrootd/config.d/10-common-site-local.cfg</code> and <code>/etc/xrootd/config.d/10-origin-site-local.cfg</code>.</p>
<p>The mandatory variables to configure are:</p>
<table>
<thead>
<tr>
<th>File</th>
<th>Config line</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>10-common-site-local.cfg</td>
<td><code>set rootdir = /mnt/stash</code></td>
<td>The mounted filesystem path to export; this document calls it <code>/mnt/stash</code></td>
</tr>
<tr>
<td>10-common-site-local.cfg</td>
<td><code>set resourcename = YOUR_RESOURCE_NAME</code></td>
<td>The resource name registered with OSG</td>
</tr>
<tr>
<td>10-origin-site-local.cfg</td>
<td><code>set PublicOriginExport = /VO/PUBLIC</code></td>
<td>The directory relative to <code>rootdir</code> that is the top of the exported namespace for public (unauthenticated) origin services</td>
</tr>
<tr>
<td>10-origin-site-local.cfg</td>
<td><code>set AuthOriginExport = /VO/PUBLIC</code></td>
<td>The directory relative to <code>rootdir</code> that is the top of the exported namespace for authenticated origin services</td>
</tr>
</tbody>
</table>
<p>For example, if the HCC VO would like to set up an origin server exporting from the mount point <code>/mnt/stash</code>,
and HCC has a public registered namespace at <code>/hcc/PUBLIC</code>, then the following would be set in <code>10-common-site-local.cfg</code>:</p>
<div class="highlight"><pre><span></span><code>set rootdir = /mnt/stash
set resourcename = HCC_OSDF_ORIGIN
</code></pre></div>
<p>And the following would be set in <code>10-origin-site-local.cfg</code>:
<div class="highlight"><pre><span></span><code>set PublicOriginExport = /hcc/PUBLIC
</code></pre></div></p>
<p>With this configuration, the data under <code>/mnt/stash/hcc/PUBLIC/bio/datasets</code> would be available under the path
<code>/hcc/PUBLIC/bio/datasets</code> in the OSDF namespace and the data under <code>/mnt/stash/hcc/PUBLIC/hep/generators</code> would be available under the path
<code>/hcc/PUBLIC/hep/generators</code> in the OSDF namespace.</p>
<p>If the HCC has a protected registered namespace at <code>/hcc/PROTECTED</code> then set the following in <code>10-origin-site-local.cfg</code>:
<div class="highlight"><pre><span></span><code>set AuthOriginExport = /hcc/PROTECTED
</code></pre></div>
If you are serving public data from the origin, you must set <code>PublicOriginExport</code> and use the <code>xrootd@stash-origin</code> service.
If you are serving protected data from the origin, you must set <code>AuthOriginExport</code>
and use the <code>xrootd@stash-origin-auth</code> service (if not using <a href="https://github.com/opensciencegrid/xrootd-multiuser" title="XRootD Multiuser Plugin">xrootd-multiuser</a>) or <code>xrootd-privileged@stash-origin-auth</code> service (if using <a href="https://github.com/opensciencegrid/xrootd-multiuser" title="XRootD Multiuser Plugin">xrootd-multiuser</a>).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The OSDF namespace is a <em>global</em> namespace.
Directories you export <strong>must not</strong> collide with directories provided by other origin servers; this is
why the explicit registration is required.</p>
</div>
<h2 id="manually-setting-the-fqdn-optional">Manually Setting the FQDN (optional)<a class="headerlink" href="#manually-setting-the-fqdn-optional" title="Permanent link">&para;</a></h2>
<p>The FQDN of the origin server that you registered in <a href="#registering-the-origin">Topology</a> may be different than its internal hostname
(as reported by <code>hostname -f</code>).
For example, this may be the case if your origin is behind a load balancer such as LVS.
In this case, you must manually tell the origin services which FQDN to use for topology lookups.</p>
<ol>
<li>
<p>Create the file <code>/etc/systemd/system/stash-authfile@.service.d/override.conf</code>
    with the following contents:</p>
<div class="codehilite"><pre><span></span><code><span class="k">[Service]</span><span class="w"></span>
<span class="na">Environment</span><span class="o">=</span><span class="s">ORIGIN_FQDN=&lt;Topology-registered FQDN&gt;</span><span class="w"></span>
</code></pre></div>

</li>
<li>
<p>Run <code>systemctl daemon-reload</code> after modifying the file.</p>
</li>
</ol>
<h2 id="managing-the-origin-services">Managing the Origin Services<a class="headerlink" href="#managing-the-origin-services" title="Permanent link">&para;</a></h2>
<p>Serving data for an origin is done by the <code>xrootd</code> daemon.
There can be multiple instances of <code>xrootd</code>, running on different ports.
The instance that serves unauthenticated data will run on port 1094.
The instance that serves authenticated data will run on port 1095.
If your origin serves both authenticated and unauthenticated data, you will run both instances.</p>
<div class="admonition note">
<p class="admonition-title">Use of multiuser plugin</p>
<p>Some of the service names are different if you have configured the <a href="https://github.com/opensciencegrid/xrootd-multiuser" title="XRootD Multiuser Plugin">XRootD Multiuser plugin</a>:</p>
<ul>
<li><code>xrootd-privileged</code> is used instead of <code>xrootd</code></li>
<li><code>cmsd-privileged</code> is used instead of <code>cmsd</code></li>
</ul>
<p>The privileged and non-privileged services are mutually exclusive.</p>
</div>
<p>The origin services consist of the following SystemD units that you must directly manage:</p>
<table>
<thead>
<tr>
<th><strong>Service name</strong></th>
<th><strong>Notes</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>xrootd@stash-origin.service</code></td>
<td>Performs data transfers (unauthenticated instance)</td>
</tr>
<tr>
<td><code>xrootd@stash-origin-auth.service</code></td>
<td>Performs data transfers (authenticated instance without <a href="https://github.com/opensciencegrid/xrootd-multiuser" title="XRootD Multiuser Plugin">multiuser</a>)</td>
</tr>
<tr>
<td><code>xrootd-privileged@stash-origin-auth.service</code></td>
<td>Performs data transfers (authenticated instance with <a href="https://github.com/opensciencegrid/xrootd-multiuser" title="XRootD Multiuser Plugin">multiuser</a>)</td>
</tr>
</tbody>
</table>
<p>These services must be managed with <code>systemctl</code> and may start additional services as dependencies.
As a reminder, here are common service commands (all run as <code>root</code>):</p>
<table>
<thead>
<tr>
<th align="left">To...</th>
<th align="left">Run the command...</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Start a service</td>
<td align="left"><code>systemctl start &lt;SERVICE-NAME&gt;</code></td>
</tr>
<tr>
<td align="left">Stop a service</td>
<td align="left"><code>systemctl stop &lt;SERVICE-NAME&gt;</code></td>
</tr>
<tr>
<td align="left">Enable a service to start on boot</td>
<td align="left"><code>systemctl enable &lt;SERVICE-NAME&gt;</code></td>
</tr>
<tr>
<td align="left">Disable a service from starting on boot</td>
<td align="left"><code>systemctl disable &lt;SERVICE-NAME&gt;</code></td>
</tr>
</tbody>
</table>
<p>In addition, the origin service automatically uses the following SystemD units:</p>
<table>
<thead>
<tr>
<th><strong>Service name</strong></th>
<th><strong>Notes</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cmsd@stash-origin.service</code></td>
<td>Integrates the origin into the data federation (unauthenticated instance)</td>
</tr>
<tr>
<td><code>cmsd@stash-origin-auth.service</code></td>
<td>Integrates the origin into the data federation (authenticated instance without <a href="https://github.com/opensciencegrid/xrootd-multiuser" title="XRootD Multiuser Plugin">multiuser</a>)</td>
</tr>
<tr>
<td><code>cmsd-privileged@stash-origin-auth.service</code></td>
<td>Integrates the origin into the data federation (authenticated instance with <a href="https://github.com/opensciencegrid/xrootd-multiuser" title="XRootD Multiuser Plugin">multiuser</a>)</td>
</tr>
<tr>
<td><code>stash-authfile@stash-origin.timer</code></td>
<td>Updates the authorization files periodically (unauthenticated instance)</td>
</tr>
<tr>
<td><code>stash-authfile@stash-origin-auth.timer</code></td>
<td>Updates the authorization files periodically (authenticated instance)</td>
</tr>
</tbody>
</table>
<h2 id="adding-to-authorization-files-optional">Adding to Authorization Files (Optional)<a class="headerlink" href="#adding-to-authorization-files-optional" title="Permanent link">&para;</a></h2>
<p>The <code>stash-authfile</code> services on the origin generate files that configure authorization for XRootD.
Put local additions to this configuration into separate files, according to this table:</p>
<table>
<thead>
<tr>
<th align="left"><strong>Purpose</strong></th>
<th align="left"><strong>Generated file</strong></th>
<th align="left"><strong>Local additions file</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">VOMS/SSL/X.509 auth config for unauthenticated origin instance</td>
<td align="left"><code>/run/stash-origin/Authfile</code></td>
<td align="left"><code>/etc/xrootd/stash-origin-Authfile.local</code></td>
</tr>
<tr>
<td align="left">VOMS/SSL/X.509 auth config for authenticated origin instance</td>
<td align="left"><code>/run/stash-origin-auth/Authfile</code></td>
<td align="left"><code>/etc/xrootd/stash-origin-auth-Authfile.local</code></td>
</tr>
<tr>
<td align="left">SciTokens config for authenticated origin instance</td>
<td align="left"><code>/run/stash-origin-auth/scitokens.conf</code></td>
<td align="left"><code>/etc/xrootd/stash-origin-auth-scitokens.conf.local</code></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use of these local additions files requires XCache 3.5.0 or newer.</p>
</div>
<h2 id="verifying-the-origin-server">Verifying the Origin Server<a class="headerlink" href="#verifying-the-origin-server" title="Permanent link">&para;</a></h2>
<p>Once your server has been registered with the OSG and started,
perform the following steps to verify that it is functional.</p>
<h3 id="testing-availability">Testing availability<a class="headerlink" href="#testing-availability" title="Permanent link">&para;</a></h3>
<p>To verify that your origin is correctly advertising its availability, run the following command from the origin server:</p>
<div class="highlight"><pre><span></span><code><span class="gp">[user@server ~]$ </span>xrdmapc -r --list s redirector.osgstorage.org:1094
<span class="go">0**** redirector.osgstorage.org:1094</span>
<span class="go">      Srv ceph-gridftp1.grid.uchicago.edu:1094</span>
<span class="go">      Srv stashcache.fnal.gov:1094</span>
<span class="go">      Srv stash.osgconnect.net:1094</span>
<span class="go">      Srv origin.ligo.caltech.edu:1094</span>
<span class="go">      Srv csiu.grid.iu.edu:1094</span>
</code></pre></div>
<p>The output should list the hostname of your origin server.</p>
<h3 id="testing-directory-export">Testing directory export<a class="headerlink" href="#testing-directory-export" title="Permanent link">&para;</a></h3>
<p>To verify that the directories you are exporting are visible from the redirector,
run the following command from the origin server:</p>
<p><div class="highlight"><pre><span></span><code><span class="hll"><span class="gp">[user@server ~]$ </span>xrdmapc -r --verify --list s redirector.osgstorage.org:1094 &lt;EXPORTED DIR&gt;
</span><span class="go">0*rv* redirector.osgstorage.org:1094</span>
<span class="go">  &gt;+  Srv ceph-gridftp1.grid.uchicago.edu:1094</span>
<span class="go">   ?  Srv stashcache.fnal.gov:1094 [not authorized]</span>
<span class="go">  &gt;+  Srv stash.osgconnect.net:1094</span>
<span class="go">   -  Srv origin.ligo.caltech.edu:1094</span>
<span class="go">   ?  Srv csiu.grid.iu.edu:1094 [connect error]</span>
</code></pre></div>
Change <code>&lt;EXPORTED_DIR&gt;</code> for the directory the service is suppose to export.
Your server should be marked with a <code>&gt;+</code> to indicate that it contains the given path and the path was accessible.</p>
<h3 id="testing-file-access-unauthenticated-origin">Testing file access (unauthenticated origin)<a class="headerlink" href="#testing-file-access-unauthenticated-origin" title="Permanent link">&para;</a></h3>
<p>To verify that you can download a file from the origin server, use the <code>stashcp</code> tool,
which is available in the <code>stashcp</code> RPM.
Place a <code>&lt;TEST FILE&gt;</code> in <code>&lt;EXPORTED DIR&gt;</code>, where <code>&lt;TEST FILE&gt;</code> can be any file in a publicly accessible path.
Run the following command:</p>
<div class="highlight"><pre><span></span><code><span class="gp">[user@host]$ </span>stashcp &lt;TEST FILE&gt; /tmp/testfile
</code></pre></div>
<!-- ^ note the unicode space ' ' between "test" and "file" to fix syntax highlighting
       (because it thinks "test" is a keyword)
--->

<p>If successful, there should be a file at <code>/tmp/testfile</code> with the contents of the test file on your origin server.
If unsuccessful, you can pass the <code>-d</code> flag to <code>stashcp</code> for debug info.</p>
<p>You can also test directly downloading from the origin via <code>xrdcp</code>, which is available in the <code>xrootd-client</code> RPM.
Run the following command:</p>
<div class="highlight"><pre><span></span><code><span class="gp">[user@host]$ </span>xrdcp xroot://&lt;origin server&gt;:1094/&lt;TEST FILE&gt; /tmp/testfile
</code></pre></div>
<h3 id="testing-file-access-authenticated-origin">Testing file access (authenticated origin)<a class="headerlink" href="#testing-file-access-authenticated-origin" title="Permanent link">&para;</a></h3>
<p>In order to download files from the origin, caches must be able to access the origin via SSL certificates.
To test SSL authentication, use the <code>curl</code> command.
Place a <code>&lt;TEST FILE&gt;</code> in <code>&lt;EXPORTED DIR&gt;</code>, where <code>&lt;TEST FILE&gt;</code> can be any file in a protected location.
As root on your origin, run the following command:</p>
<p><div class="highlight"><pre><span></span><code><span class="gp">[root@host]# </span>curl --cert /etc/grid-security/hostcert.pem <span class="se">\</span>
                  --key /etc/grid-security/hostkey.pem <span class="se">\</span>
                  https://&lt;origin server&gt;:1095/&lt;TEST FILE&gt; <span class="se">\</span>
                  -o /tmp/testfile
</code></pre></div>
If successful, there should be a file at <code>/tmp/testfile</code> with the contents of the test file on your origin server.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This test requires including the DN of your origin in your origin's <a href="#registering-the-origin">OSG Topology registration</a>.</p>
</div>
<p>To verify that a user can download a file from the origin server, use the <code>stashcp</code> tool,
which is available in the <code>stashcp</code> RPM.
Obtain a credential (a SciToken or WLCG Token, depending on your origin's configuration).
Place a <code>&lt;TEST FILE&gt;</code> in <code>&lt;EXPORTED DIR&gt;</code>, where <code>&lt;TEST FILE&gt;</code> can be any file in a path you expect to be accessible
using the credential you just obtained.
Run the following command:</p>
<div class="highlight"><pre><span></span><code><span class="gp">[user@host]$ </span>stashcp &lt;TEST FILE&gt; /tmp/testfile
</code></pre></div>
<!-- ^ note the unicode space ' ' between "test" and "file" to fix syntax highlighting
       (because it thinks "test" is a keyword)
--->

<p>If successful, there should be a file at <code>/tmp/testfile</code> with the contents of the test file on your origin server.
If unsuccessful, you can pass the <code>-d</code> flag to <code>stashcp</code> for debug info.</p>
<h2 id="registering-the-origin">Registering the Origin<a class="headerlink" href="#registering-the-origin" title="Permanent link">&para;</a></h2>
<p>To be part of the Open Science Data Federation, your origin must be
<a href="../../../common/registration/">registered with the OSG</a>.  The service type is <code>XRootD origin server</code>.</p>
<p>The resource must also specify which VOs it will serve data from.
To do this, add an <code>AllowedVOs</code> list, with each line specifying a VO whose data the resource is willing to host.
For example:
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nt">MY_OSDF_ORIGIN</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">Services</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">XRootD origin server</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">Description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OSDF origin server</span><span class="w"></span>
<span class="w">    </span><span class="nt">AllowedVOs</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GLOW</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OSG</span><span class="w"></span>
<span class="w">    </span><span class="nt">DN</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=my-osdf-origin.example.net</span><span class="w"></span>
</code></pre></div>
You can use the special value <code>ANY</code> to indicate that the origin will serve data from any VO that puts data on it.</p>
<p>In addition to the origin allowing a VOs via the <code>AllowedVOs</code> list,
that VO must also allow the origin in one of its <code>AllowedOrigins</code> lists in <code>DataFederation/StashCache/Namespaces</code>.
See the page on <a href="../vo-data/">getting your VO's data into OSDF</a>.</p>
<p>Specifying the DN of your origin is not required but it is useful for testing.</p>
<h2 id="updating-to-osg-36">Updating to OSG 3.6<a class="headerlink" href="#updating-to-osg-36" title="Permanent link">&para;</a></h2>
<p>The OSG 3.5 series reached end-of-life on May 1, 2022.
Admins are strongly encouraged to move their origins to OSG 3.6.</p>
<p>See <a href="../../../release/updating-to-osg-36/">general update instructions</a>.</p>
<p>Unauthenticated origins (<code>xrootd@stash-origin</code> service) do not need any configuration changes.</p>
<p>Authenticated origins (<code>xrootd@stash-origin-auth</code> service) may need the configuration changes described in the
<a href="../../xrootd/xrootd-authorization/#updating-to-osg-36">updating to OSG 3.6 section</a>
of the XRootD authorization configuration document.</p>
<h2 id="getting-help">Getting Help<a class="headerlink" href="#getting-help" title="Permanent link">&para;</a></h2>
<p>To get assistance, please use the <a href="../../../common/help/">this page</a>.</p>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../run-stash-origin-container/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Install from container" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Install from container
            </div>
          </div>
        </a>
      
      
        
        <a href="../vo-data/" class="md-footer__link md-footer__link--next" aria-label="Next: Publishing VO data" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Publishing VO data
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div>
    This material is based upon work supported by the
    <a href="https://nsf.gov">National Science Foundation</a>
    under Grant Nos.
    <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=1148698">1148698</a>
    ,
    <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=1836650">1836650</a>
    , and
    <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">2030508</a>
    . Any opinions, findings, and conclusions or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the views of the National Science Foundation.
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
        Material for MkDocs
    </a>
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.sections", "navigation.top"], "search": "../../../assets/javascripts/workers/search.5e67fbfe.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c44cc438.min.js"></script>
      
    
  </body>
</html>