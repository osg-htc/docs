



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://opensciencegrid.org/docs/data/load-balanced-gridftp/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.9.4">
    
    
      
        <title>Install Load Balanced GridFTP - OSG Site Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#load-balancing-gridftp" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://opensciencegrid.org/docs/" title="OSG Site Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                OSG Site Documentation
              </span>
              <span class="md-header-nav__topic">
                Install Load Balanced GridFTP
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/opensciencegrid/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://opensciencegrid.org/docs/" title="OSG Site Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    OSG Site Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/opensciencegrid/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../detailed-overview/" title="Detailed Overview" class="md-nav__link">
      Detailed Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../site-planning/" title="Site Planning" class="md-nav__link">
      Site Planning
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Compute Element
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Compute Element
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/htcondor-ce-overview/" title="HTCondor-CE Overview" class="md-nav__link">
      HTCondor-CE Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/hosted-ce/" title="Request a Hosted CE" class="md-nav__link">
      Request a Hosted CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/install-htcondor-ce/" title="Install HTCondor-CE" class="md-nav__link">
      Install HTCondor-CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/job-router-recipes/" title="Job Router Recipes" class="md-nav__link">
      Job Router Recipes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/troubleshoot-htcondor-ce/" title="Troubleshooting HTCondor-CE" class="md-nav__link">
      Troubleshooting HTCondor-CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/submit-htcondor-ce/" title="Submitting to HTCondor-CE" class="md-nav__link">
      Submitting to HTCondor-CE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Worker Node
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Worker Node
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/using-wn/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn/" title="Install from RPM" class="md-nav__link">
      Install from RPM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn-tarball/" title="Install from Tarball" class="md-nav__link">
      Install from Tarball
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn-oasis/" title="Install from OASIS" class="md-nav__link">
      Install from OASIS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-cvmfs/" title="Install CVMFS" class="md-nav__link">
      Install CVMFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-singularity/" title="Install Singularity" class="md-nav__link">
      Install Singularity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/using-wn-containers/" title="Using WN Containers" class="md-nav__link">
      Using WN Containers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1" type="checkbox" id="nav-6-1">
    
    <label class="md-nav__link" for="nav-6-1">
      HTTP & OASIS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-1">
        HTTP & OASIS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../frontier-squid/" title="Install Squid HTTP Cache" class="md-nav__link">
      Install Squid HTTP Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../update-oasis/" title="Update OASIS Shared Repo" class="md-nav__link">
      Update OASIS Shared Repo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../external-oasis-repos/" title="Install an OASIS Repo" class="md-nav__link">
      Install an OASIS Repo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-2" type="checkbox" id="nav-6-2" checked>
    
    <label class="md-nav__link" for="nav-6-2">
      POSIX Storage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-2">
        POSIX Storage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../gridftp/" title="Install GridFTP Server" class="md-nav__link">
      Install GridFTP Server
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Install Load Balanced GridFTP
      </label>
    
    <a href="./" title="Install Load Balanced GridFTP" class="md-nav__link md-nav__link--active">
      Install Load Balanced GridFTP
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-starting" title="Before Starting" class="md-nav__link">
    Before Starting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#designing-your-load-balanced-gridftp-system" title="Designing Your Load-Balanced GridFTP System" class="md-nav__link">
    Designing Your Load-Balanced GridFTP System
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gridftp-servers" title="GridFTP servers" class="md-nav__link">
    GridFTP servers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shared-file-system" title="Shared file system" class="md-nav__link">
    Shared file system
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-balancers" title="Load balancer(s)" class="md-nav__link">
    Load balancer(s)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-the-gridftp-servers" title="Preparing the GridFTP Servers" class="md-nav__link">
    Preparing the GridFTP Servers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#acquiring-host-certificates" title="Acquiring host certificate(s)" class="md-nav__link">
    Acquiring host certificate(s)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#without-xrootd" title="Without XRootD" class="md-nav__link">
    Without XRootD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-xrootd" title="With XRootD" class="md-nav__link">
    With XRootD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-lets-encrypt" title="With Let's Encrypt" class="md-nav__link">
    With Let's Encrypt
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-gridftp" title="Installing GridFTP" class="md-nav__link">
    Installing GridFTP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-your-gridftp-servers" title="Configuring your GridFTP servers" class="md-nav__link">
    Configuring your GridFTP servers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-your-virtual-ip-address" title="Adding your virtual IP address" class="md-nav__link">
    Adding your virtual IP address
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disabling-arp" title="Disabling ARP" class="md-nav__link">
    Disabling ARP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-keepalived-load-balancers" title="Preparing Keepalived Load Balancer(s)" class="md-nav__link">
    Preparing Keepalived Load Balancer(s)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-keepalived" title="Installing Keepalived" class="md-nav__link">
    Installing Keepalived
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-configuration" title="Required configuration" class="md-nav__link">
    Required configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-configuration" title="Optional configuration" class="md-nav__link">
    Optional configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-backup-load-balancers" title="Adding backup load balancers" class="md-nav__link">
    Adding backup load balancers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-e-mail-notifications" title="Enabling e-mail notifications" class="md-nav__link">
    Enabling e-mail notifications
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-your-load-balanced-gridftp-system" title="Using Your Load Balanced GridFTP System" class="md-nav__link">
    Using Your Load Balanced GridFTP System
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-gridftp" title="Using GridFTP" class="md-nav__link">
    Using GridFTP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-keepalived" title="Using Keepalived" class="md-nav__link">
    Using Keepalived
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-help" title="Getting Help" class="md-nav__link">
    Getting Help
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-3" type="checkbox" id="nav-6-3">
    
    <label class="md-nav__link" for="nav-6-3">
      XRootD
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-3">
        XRootD
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../xrootd/overview/" title="XRootD Overview" class="md-nav__link">
      XRootD Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xrootd/install-standalone/" title="Install XRootD Standalone" class="md-nav__link">
      Install XRootD Standalone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xrootd/install-storage-element/" title="Install XRootD SE" class="md-nav__link">
      Install XRootD SE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xrootd/xrootd-authorization/" title="Configure Authorization" class="md-nav__link">
      Configure Authorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xrootd/install-client/" title="Using XRootD" class="md-nav__link">
      Using XRootD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xrootd/install-cms-xcache/" title="Install CMS Xcache" class="md-nav__link">
      Install CMS Xcache
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-4" type="checkbox" id="nav-6-4">
    
    <label class="md-nav__link" for="nav-6-4">
      StashCache
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-4">
        StashCache
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../stashcache/overview/" title="StashCache Overview" class="md-nav__link">
      StashCache Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../stashcache/run-stashcache-container/" title="Running Stashcache in a container" class="md-nav__link">
      Running Stashcache in a container
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../stashcache/install-cache/" title="Install StashCache Cache" class="md-nav__link">
      Install StashCache Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../stashcache/install-origin/" title="Install StashCache Origin" class="md-nav__link">
      Install StashCache Origin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../stashcache/vo-data/" title="Getting VO data into StashCache" class="md-nav__link">
      Getting VO data into StashCache
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5" type="checkbox" id="nav-6-5">
    
    <label class="md-nav__link" for="nav-6-5">
      HDFS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-5">
        HDFS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../hadoop-overview/" title="HDFS Overview" class="md-nav__link">
      HDFS Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-hadoop/" title="Install HDFS" class="md-nav__link">
      Install HDFS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Submit
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Submit
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-1" type="checkbox" id="nav-7-1">
    
    <label class="md-nav__link" for="nav-7-1">
      Flocking
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-1">
        Flocking
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../submit/osg-flock/" title="Flock to OSG" class="md-nav__link">
      Flock to OSG
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Security
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Security
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/lcmaps-voms-authentication/" title="LCMAPS VOMS authentication" class="md-nav__link">
      LCMAPS VOMS authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/user-certs/" title="User Certificates" class="md-nav__link">
      User Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/certificate-management/" title="Certificate Management Reference" class="md-nav__link">
      Certificate Management Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-4" type="checkbox" id="nav-8-4">
    
    <label class="md-nav__link" for="nav-8-4">
      Host Certificates
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-4">
        Host Certificates
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/" title="Host Certs" class="md-nav__link">
      Host Certs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/incommon/" title="Using InCommon" class="md-nav__link">
      Using InCommon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/lets-encrypt/" title="Using Let's Encrypt" class="md-nav__link">
      Using Let's Encrypt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/digicert/" title="Using DigiCert" class="md-nav__link">
      Using DigiCert
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Common
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Common
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/ca/" title="CA Certificates" class="md-nav__link">
      CA Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/yum/" title="OSG Yum Repos" class="md-nav__link">
      OSG Yum Repos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/configuration-with-osg-configure/" title="Configuration with OSG-Configure" class="md-nav__link">
      Configuration with OSG-Configure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/registration/" title="Registration" class="md-nav__link">
      Registration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Other
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Other
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/gsissh/" title="Install GSI-enabled SSH" class="md-nav__link">
      Install GSI-enabled SSH
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/install-gwms-frontend/" title="Install GlideinWMS Frontend" class="md-nav__link">
      Install GlideinWMS Frontend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/install-cvmfs-stratum1/" title="Install a CVMFS Stratum 1" class="md-nav__link">
      Install a CVMFS Stratum 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/network-performance-toolkit/" title="Install the Network Performance Toolkit" class="md-nav__link">
      Install the Network Performance Toolkit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/troubleshooting-gratia/" title="Troubleshooting Gratia" class="md-nav__link">
      Troubleshooting Gratia
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/schedd-filebeats/" title="Install Transfer Log Filebeats" class="md-nav__link">
      Install Transfer Log Filebeats
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Release Information
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Release Information
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/notes/" title="Release Note Overview" class="md-nav__link">
      Release Note Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11-2" type="checkbox" id="nav-11-2">
    
    <label class="md-nav__link" for="nav-11-2">
      3.5 Release Notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-11-2">
        3.5 Release Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-8/" title="OSG Release 3.5.8" class="md-nav__link">
      OSG Release 3.5.8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-7/" title="OSG Release 3.5.7" class="md-nav__link">
      OSG Release 3.5.7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-6/" title="OSG Release 3.5.6" class="md-nav__link">
      OSG Release 3.5.6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-5/" title="OSG Release 3.5.5" class="md-nav__link">
      OSG Release 3.5.5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-4/" title="OSG Release 3.5.4" class="md-nav__link">
      OSG Release 3.5.4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-3/" title="OSG Release 3.5.3" class="md-nav__link">
      OSG Release 3.5.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-2/" title="OSG Release 3.5.2" class="md-nav__link">
      OSG Release 3.5.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-1/" title="OSG Release 3.5.1" class="md-nav__link">
      OSG Release 3.5.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-0/" title="OSG Release 3.5.0" class="md-nav__link">
      OSG Release 3.5.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11-3" type="checkbox" id="nav-11-3">
    
    <label class="md-nav__link" for="nav-11-3">
      3.4 Release Notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-11-3">
        3.4 Release Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-42/" title="OSG Release 3.4.42" class="md-nav__link">
      OSG Release 3.4.42
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-41/" title="OSG Release 3.4.41" class="md-nav__link">
      OSG Release 3.4.41
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-40/" title="OSG Release 3.4.40" class="md-nav__link">
      OSG Release 3.4.40
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-39/" title="OSG Release 3.4.39" class="md-nav__link">
      OSG Release 3.4.39
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-38/" title="OSG Release 3.4.38" class="md-nav__link">
      OSG Release 3.4.38
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-37/" title="OSG Release 3.4.37" class="md-nav__link">
      OSG Release 3.4.37
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-36/" title="OSG Release 3.4.36" class="md-nav__link">
      OSG Release 3.4.36
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-35/" title="OSG Release 3.4.35" class="md-nav__link">
      OSG Release 3.4.35
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-34/" title="OSG Release 3.4.34" class="md-nav__link">
      OSG Release 3.4.34
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-33/" title="OSG Release 3.4.33" class="md-nav__link">
      OSG Release 3.4.33
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-32/" title="OSG Release 3.4.32" class="md-nav__link">
      OSG Release 3.4.32
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-31-2/" title="OSG Release 3.4.31-2" class="md-nav__link">
      OSG Release 3.4.31-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-31/" title="OSG Release 3.4.31" class="md-nav__link">
      OSG Release 3.4.31
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-30-2/" title="OSG Release 3.4.30-2" class="md-nav__link">
      OSG Release 3.4.30-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-30/" title="OSG Release 3.4.30" class="md-nav__link">
      OSG Release 3.4.30
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-29-2/" title="OSG Release 3.4.29-2" class="md-nav__link">
      OSG Release 3.4.29-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-29/" title="OSG Release 3.4.29" class="md-nav__link">
      OSG Release 3.4.29
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-28-2/" title="OSG Release 3.4.28-2" class="md-nav__link">
      OSG Release 3.4.28-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-28/" title="OSG Release 3.4.28" class="md-nav__link">
      OSG Release 3.4.28
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-27-2/" title="OSG Release 3.4.27-2" class="md-nav__link">
      OSG Release 3.4.27-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-27/" title="OSG Release 3.4.27" class="md-nav__link">
      OSG Release 3.4.27
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-26-2/" title="OSG Release 3.4.26-2" class="md-nav__link">
      OSG Release 3.4.26-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-26/" title="OSG Release 3.4.26" class="md-nav__link">
      OSG Release 3.4.26
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-25/" title="OSG Release 3.4.25" class="md-nav__link">
      OSG Release 3.4.25
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-24-2/" title="OSG Release 3.4.24-2" class="md-nav__link">
      OSG Release 3.4.24-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-24/" title="OSG Release 3.4.24" class="md-nav__link">
      OSG Release 3.4.24
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-23/" title="OSG Release 3.4.23" class="md-nav__link">
      OSG Release 3.4.23
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-22-2/" title="OSG Release 3.4.22-2" class="md-nav__link">
      OSG Release 3.4.22-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-22/" title="OSG Release 3.4.22" class="md-nav__link">
      OSG Release 3.4.22
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-21/" title="OSG Release 3.4.21" class="md-nav__link">
      OSG Release 3.4.21
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-20/" title="OSG Release 3.4.20" class="md-nav__link">
      OSG Release 3.4.20
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-19/" title="OSG Release 3.4.19" class="md-nav__link">
      OSG Release 3.4.19
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-18-2/" title="OSG Release 3.4.18-2" class="md-nav__link">
      OSG Release 3.4.18-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-18/" title="OSG Release 3.4.18" class="md-nav__link">
      OSG Release 3.4.18
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-17-3/" title="OSG Release 3.4.17-3" class="md-nav__link">
      OSG Release 3.4.17-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-17-2/" title="OSG Release 3.4.17-2" class="md-nav__link">
      OSG Release 3.4.17-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-17/" title="OSG Release 3.4.17" class="md-nav__link">
      OSG Release 3.4.17
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-16-2/" title="OSG Release 3.4.16-2" class="md-nav__link">
      OSG Release 3.4.16-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-16/" title="OSG Release 3.4.16" class="md-nav__link">
      OSG Release 3.4.16
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-15/" title="OSG Release 3.4.15" class="md-nav__link">
      OSG Release 3.4.15
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-14-2/" title="OSG Release 3.4.14-2" class="md-nav__link">
      OSG Release 3.4.14-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-14/" title="OSG Release 3.4.14" class="md-nav__link">
      OSG Release 3.4.14
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-13/" title="OSG Release 3.4.13" class="md-nav__link">
      OSG Release 3.4.13
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12-3/" title="OSG Release 3.4.12-3" class="md-nav__link">
      OSG Release 3.4.12-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12-2/" title="OSG Release 3.4.12-2" class="md-nav__link">
      OSG Release 3.4.12-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12/" title="OSG Release 3.4.12" class="md-nav__link">
      OSG Release 3.4.12
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-11/" title="OSG Release 3.4.11" class="md-nav__link">
      OSG Release 3.4.11
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-10/" title="OSG Release 3.4.10" class="md-nav__link">
      OSG Release 3.4.10
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-9-2/" title="OSG Release 3.4.9-2" class="md-nav__link">
      OSG Release 3.4.9-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-9/" title="OSG Release 3.4.9" class="md-nav__link">
      OSG Release 3.4.9
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-8/" title="OSG Release 3.4.8" class="md-nav__link">
      OSG Release 3.4.8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-7/" title="OSG Release 3.4.7" class="md-nav__link">
      OSG Release 3.4.7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-6-2/" title="OSG Release 3.4.6-2" class="md-nav__link">
      OSG Release 3.4.6-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-6/" title="OSG Release 3.4.6" class="md-nav__link">
      OSG Release 3.4.6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-4/" title="OSG Release 3.4.5-4" class="md-nav__link">
      OSG Release 3.4.5-4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-3/" title="OSG Release 3.4.5-3" class="md-nav__link">
      OSG Release 3.4.5-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-2/" title="OSG Release 3.4.5-2" class="md-nav__link">
      OSG Release 3.4.5-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5/" title="OSG Release 3.4.5" class="md-nav__link">
      OSG Release 3.4.5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4-3/" title="OSG Release 3.4.4-3" class="md-nav__link">
      OSG Release 3.4.4-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4-2/" title="OSG Release 3.4.4-2" class="md-nav__link">
      OSG Release 3.4.4-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4/" title="OSG Release 3.4.4" class="md-nav__link">
      OSG Release 3.4.4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-3/" title="OSG Release 3.4.3" class="md-nav__link">
      OSG Release 3.4.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-2-2/" title="OSG Release 3.4.2-2" class="md-nav__link">
      OSG Release 3.4.2-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-2/" title="OSG Release 3.4.2" class="md-nav__link">
      OSG Release 3.4.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-1-2/" title="OSG Release 3.4.1-2" class="md-nav__link">
      OSG Release 3.4.1-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-1/" title="OSG Release 3.4.1" class="md-nav__link">
      OSG Release 3.4.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-0-2/" title="OSG Release 3.4.0-2" class="md-nav__link">
      OSG Release 3.4.0-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-0/" title="OSG Release 3.4.0" class="md-nav__link">
      OSG Release 3.4.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/release_series/" title="OSG Release Series" class="md-nav__link">
      OSG Release Series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/supported_platforms/" title="Supported Platforms" class="md-nav__link">
      Supported Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/yum-basics/" title="Yum Basics" class="md-nav__link">
      Yum Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/signing/" title="RPM Signing" class="md-nav__link">
      RPM Signing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Deprecated
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Deprecated
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/install-rsv/" title="Install RSV" class="md-nav__link">
      Install RSV
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/advanced-rsv-configuration/" title="Advanced RSV Configuration" class="md-nav__link">
      Advanced RSV Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/rsv-control/" title="Manage RSV via rsv-control" class="md-nav__link">
      Manage RSV via rsv-control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/install-rsv-gwms-tester/" title="RSV GlideinWMS Tester" class="md-nav__link">
      RSV GlideinWMS Tester
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../common/help/" title="Get Help" class="md-nav__link">
      Get Help
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-starting" title="Before Starting" class="md-nav__link">
    Before Starting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#designing-your-load-balanced-gridftp-system" title="Designing Your Load-Balanced GridFTP System" class="md-nav__link">
    Designing Your Load-Balanced GridFTP System
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gridftp-servers" title="GridFTP servers" class="md-nav__link">
    GridFTP servers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shared-file-system" title="Shared file system" class="md-nav__link">
    Shared file system
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-balancers" title="Load balancer(s)" class="md-nav__link">
    Load balancer(s)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-the-gridftp-servers" title="Preparing the GridFTP Servers" class="md-nav__link">
    Preparing the GridFTP Servers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#acquiring-host-certificates" title="Acquiring host certificate(s)" class="md-nav__link">
    Acquiring host certificate(s)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#without-xrootd" title="Without XRootD" class="md-nav__link">
    Without XRootD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-xrootd" title="With XRootD" class="md-nav__link">
    With XRootD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-lets-encrypt" title="With Let's Encrypt" class="md-nav__link">
    With Let's Encrypt
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-gridftp" title="Installing GridFTP" class="md-nav__link">
    Installing GridFTP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-your-gridftp-servers" title="Configuring your GridFTP servers" class="md-nav__link">
    Configuring your GridFTP servers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-your-virtual-ip-address" title="Adding your virtual IP address" class="md-nav__link">
    Adding your virtual IP address
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disabling-arp" title="Disabling ARP" class="md-nav__link">
    Disabling ARP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-keepalived-load-balancers" title="Preparing Keepalived Load Balancer(s)" class="md-nav__link">
    Preparing Keepalived Load Balancer(s)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-keepalived" title="Installing Keepalived" class="md-nav__link">
    Installing Keepalived
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-configuration" title="Required configuration" class="md-nav__link">
    Required configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-configuration" title="Optional configuration" class="md-nav__link">
    Optional configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-backup-load-balancers" title="Adding backup load balancers" class="md-nav__link">
    Adding backup load balancers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-e-mail-notifications" title="Enabling e-mail notifications" class="md-nav__link">
    Enabling e-mail notifications
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-your-load-balanced-gridftp-system" title="Using Your Load Balanced GridFTP System" class="md-nav__link">
    Using Your Load Balanced GridFTP System
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-gridftp" title="Using GridFTP" class="md-nav__link">
    Using GridFTP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-keepalived" title="Using Keepalived" class="md-nav__link">
    Using Keepalived
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-help" title="Getting Help" class="md-nav__link">
    Getting Help
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/opensciencegrid/docs/edit/master/docs/data/load-balanced-gridftp.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="load-balancing-gridftp">Load Balancing GridFTP<a class="headerlink" href="#load-balancing-gridftp" title="Permanent link">&para;</a></h1>
<p>GridFTP is designed for high throughput data transfers and in many cases can handle all of the transfers for a site. However, in some cases it may be useful to run multiple GridFTP servers to distribute the load. For such sites, we recommend using a <a href="https://en.wikipedia.org/wiki/Load_balancing_(computing)">load balancer</a> to distribute requests and present the appearance of a single high-throughput GridFTP server.</p>
<p>One general-purpose technology for implementing a load balancer on Linux is <a href="http://www.linuxvirtualserver.org/whatis.html">Linux Virtual Server</a> (LVS). To use it with GridFTP, a single load balancer listens on a virtual IP address, monitors the health of the set of real GridFTP servers, and forwards requests to available ones. Optionally, there can be one or more inactive, backup load balancers that can activate and take over the virtual IP address in case the primary load balancer fails, resulting in a system that is more resilient to failure. LVS is implemented by the <a href="http://www.linuxvirtualserver.org/software/ipvs.html">IP Virtual Server</a> kernel module, which can be managed by userspace services on the load balancers such as <a href="http://www.keepalived.org">keepalived</a>.</p>
<p>This guide explains how to install, configure, run, test, and troubleshoot the <code>keepalived</code> service on a load balancing host for a set of <a href="../gridftp">GridFTP</a> servers.</p>
<h2 id="before-starting">Before Starting<a class="headerlink" href="#before-starting" title="Permanent link">&para;</a></h2>
<p>Before starting the installation process, consider the following requirements:</p>
<ul>
<li>There must be a shared file system for file propagation across GridFTP servers</li>
<li>You must have reserved a virtual IP address and associated virtual hostname</li>
</ul>
<p>As with all OSG software installations, there are some one-time (per host) steps to prepare in advance:</p>
<ul>
<li>Ensure the host has <a href="../../release/supported_platforms">a supported operating system</a></li>
<li>Obtain root access to each host</li>
</ul>
<h2 id="designing-your-load-balanced-gridftp-system">Designing Your Load-Balanced GridFTP System<a class="headerlink" href="#designing-your-load-balanced-gridftp-system" title="Permanent link">&para;</a></h2>
<p>Before beginning the installation process, you will need to plan the overall architecture of your load-balanced GridFTP system: the number of GridFTP servers, the type of shared file system to run on the GridFTP servers, whether or not backup load balancers are required, and hardware requirements.</p>
<h3 id="gridftp-servers">GridFTP servers<a class="headerlink" href="#gridftp-servers" title="Permanent link">&para;</a></h3>
<p>The number of GridFTP servers that you should run is determined first and foremost by the expected GridFTP transfer load at your site and the speed of the links available to each server. For example, if you expect a 20Gbps peak transfer load and have 10Gb links with 80–90% efficiency, you would need a minimum of 4 GridFTP servers: 3 to satisfy your desired throughput + 1 for failover or growth.</p>
<h4 id="shared-file-system">Shared file system<a class="headerlink" href="#shared-file-system" title="Permanent link">&para;</a></h4>
<p>The number of GridFTP servers can also be determined by your hardware needs and by your choice of shared file system. If you choose a POSIX-based shared file system, plan for machines with more cores, or more GridFTP hosts to distribute the CPU load. If you are running <a href="../install-hadoop#standalone-gridftp-node-installation">GridFTP with Hadoop</a>, plan for machines with more memory, or more GridFTP hosts to distribute the memory load.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you determine that you need only a single GridFTP host, you do not need load balancing. Instead, follow the <a href="../gridftp">standalone-GridFTP installation guide</a>.</p>
</div>
<h3 id="load-balancers">Load balancer(s)<a class="headerlink" href="#load-balancers" title="Permanent link">&para;</a></h3>
<p>In the recommended direct routing mode, load balancers simply rewrite initial packets from a given request so the hardware requirements are minimal. When choosing load balancer hosts, aim for stability. If your chosen host is unstable or if you do not want to introduce downtime for operating system or hardware updates, at least one additional load balancer will be needed as a backup.</p>
<h2 id="preparing-the-gridftp-servers">Preparing the GridFTP Servers<a class="headerlink" href="#preparing-the-gridftp-servers" title="Permanent link">&para;</a></h2>
<p>Before adding your GridFTP hosts to the load-balanced system, each host requires the following:</p>
<ul>
<li>GridFTP software</li>
<li>Special host certificates</li>
<li>Load-balancing configuration</li>
</ul>
<h3 id="acquiring-host-certificates">Acquiring host certificate(s)<a class="headerlink" href="#acquiring-host-certificates" title="Permanent link">&para;</a></h3>
<p>When authenticating with a GridFTP server, clients verify that the server's host certificate matches the hostname of the server. In the case of a load-balanced GridFTP system, clients contact the GridFTP server through the virtual hostname, so the GridFTP server will have to present a certificate containing the virtual hostname as well as the GridFTP server's hostname. Use the <a href="../../security/host-certs">OSG host certificate reference</a> for more information on how to request these types of certificates.  Additionally, a special procedure is available to acquire <a href="#with-lets-encrypt">Let's Encrypt certificates</a> with the load balanced gridftp.</p>
<p>If your GridFTP servers are also running XRootD, you will need unique certificates for each GridFTP server. Otherwise, you can request a single certificate that can be shared among the GridFTP servers.</p>
<h4 id="without-xrootd">Without XRootD<a class="headerlink" href="#without-xrootd" title="Permanent link">&para;</a></h4>
<p>The single shared certificate must have the hostname associated with the load-balanced GridFTP system as its <a href="https://en.wikipedia.org/wiki/X.509_attribute_certificate">common name</a> and each GridFTP servers hostname listed as <a href="https://en.wikipedia.org/wiki/Subject_Alternative_Name">subject alternative names</a>.</p>
<ol>
<li>
<p>Request and generate the shared certificate:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> osg-cert-request --hostname &lt;VIRTUAL-HOSTNAME&gt; <span class="se">\</span>
            --country &lt;COUNTRY&gt; <span class="se">\</span>
            --state &lt;STATE&gt; <span class="se">\</span>
            --locality &lt;LOCALITY&gt; <span class="se">\</span>
            --organization &lt;ORGANIZATION&gt;
<span class="go">            --altname &lt;GRIDFTP-SERVER-#1-HOSTNAME&gt; \</span>
<span class="go">            --altname &lt;GRIDFTP-SERVER-#2-HOSTNAME&gt;</span>
</pre></div>


</li>
<li>
<p>Take the resulting CSR and get it signed by the appropriate authority.
    Most institutions can use InCommon as outlined <a href="../../security/host-certs/#requesting-incommon-igtf-host-certificates">here</a>.</p>
</li>
<li>
<p>Create a directory to contain the shared certificate:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> mkdir /etc/grid-security/gridftp
</pre></div>


</li>
<li>
<p>Place the shared certificate-key pair in the newly created directory:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> mv &lt;PATH-TO-SERVICE-CERT&gt; /etc/grid-security/gridftp/gridftp-hostcert.pem
<span class="gp">root@host #</span> mv &lt;PATH-TO-SERVICE-KEY&gt; /etc/grid-security/gridftp/gridftp-hostkey.pem
</pre></div>


</li>
<li>
<p>Edit <code>/etc/sysconfig/globus-gridftp-server</code> to identify the shared certificate-key pair:</p>
<div class="codehilite"><pre><span></span>export X509_USER_CERT=/etc/grid-security/gridftp/gridftp-hostcert.pem
export X509_USER_KEY=/etc/grid-security/gridftp/gridftp-hostkey.pem
</pre></div>


</li>
</ol>
<h4 id="with-xrootd">With XRootD<a class="headerlink" href="#with-xrootd" title="Permanent link">&para;</a></h4>
<p>XRootD requires that the certificate's <a href="https://en.wikipedia.org/wiki/X.509_attribute_certificate">common name</a> refers specifically to the host it resides on. To ensure each GridFTP server can authenticate using the virtual hostname, add it as the <a href="https://en.wikipedia.org/wiki/Subject_Alternative_Name">subject alternative name</a> for each certificate.</p>
<ol>
<li>
<p>Create a list of GridFTP server hostnames in <code>load-balanced-hosts.txt</code>:</p>
<div class="codehilite"><pre><span></span>&lt;GRIDFTP-SERVER-#1-HOSTNAME&gt; &lt;VIRTUAL-HOSTNAME&gt;
&lt;GRIDFTP-SERVER-#2-HOSTNAME&gt; &lt;VIRTUAL-HOSTNAME&gt;
[...]
</pre></div>


</li>
<li>
<p>Submit a batch request for the per-GridFTP server certificates:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> osg-gridadmin-cert-request -f load-balanced-hosts.txt
</pre></div>


</li>
<li>
<p>Copy the resulting certificates and keys to their corresponding GridFTP servers in <code>/etc/grid-security/hostcert.pem</code> and <code>/etc/grid-security/hostkey.pem</code>, respectively.</p>
</li>
</ol>
<h4 id="with-lets-encrypt">With Let's Encrypt<a class="headerlink" href="#with-lets-encrypt" title="Permanent link">&para;</a></h4>
<p>The certificate provided to the clients needs to have the virtual host address of the load balancer, as well as the hostname of each of the worker nodes.  Additionally, LetsEncrypt contacts the requested domains to verify ownership.  Therefore, each domain requested must be available to respond to HTTP requests at the same time.  The easiest method for this is to use a shared directory for Let's Encrypt's <code>certbot</code> to install the secrets.</p>
<p>The procedure to acquire Let's Encrypt certificates for multiple hosts is as follows:</p>
<ol>
<li>
<p>Create or use a shared directory that each of the data transfer nodes can read, for example a simple NFS share.  The steps in creating a NFS shared directory is outside the scope of this guide.  In this guide, the shared directory will be referred as <code>/mnt/nfsshare</code> . </p>
</li>
<li>
<p>Install <code>httpd</code> on each of the data transfer nodes:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host $</span> yum install httpd
</pre></div>


<p>Create a webroot directory within the shared directory on one of the nodes:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host $</span> mkdir /mnt/nfsshare/webroot
</pre></div>


</li>
<li>
<p>Configure <code>httpd</code> to export the same webroot on each of the data transfer nodes:</p>
<div class="codehilite"><pre><span></span>&lt;VirtualHost *:80&gt;
    DocumentRoot &quot;/mnt/nfsshare/webroot&quot;
    &lt;Directory &quot;/mnt/nfsshare/webroot&quot;&gt;
        Require all granted
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</pre></div>


</li>
<li>
<p>Configure <code>keepalived</code> to virtualize port 80 to at least one of your data transfer nodes.
    Add to your configuration:</p>
<div class="codehilite"><pre><span></span>virtual_server &lt;VIRTUAL-IP-ADDRESS&gt; 80 {
    delay_loop 10
    lb_algo wlc
    lb_kind DR
    protocol tcp

    real_server &lt;GRIDFTP-SERVER-#1-IP ADDRESS&gt; {
        TCP_CHECK {
            connect_timeout 3
            connect_port 80
        }
    }
}
</pre></div>


</li>
<li>
<p>Run <code>certbot</code> with the webroot options on only 1 of the data nodes.  The first domain in the command line should be the virtual hostname:</p>
<div class="codehilite"><pre><span></span>root@host $ certbot certonly -w /mnt/nfsshare/webroot -d &lt;VIRTUAL_HOSTNAME&gt; -d &lt;DATANODE_1&gt; -d &lt;DATANODE_N&gt;...
</pre></div>


</li>
</ol>
<p>For XRootD certificates, the real hostname of the XRootD node is required to be the first hostname in the <code>certbot</code> command.  You may run the <code>certbot</code> command several times on the same host, replacing the <code>VIRTUAL_HOSTNAME</code> with the real hostname of the XRootD servers, and placing the <code>VIRTUAL_HOSTNAME</code> in in the list of other domains in the certificate.</p>
<h3 id="installing-gridftp">Installing GridFTP<a class="headerlink" href="#installing-gridftp" title="Permanent link">&para;</a></h3>
<p>Whether you are starting from scratch or adding more GridFTP servers to your load-balanced GridFTP system, follow the documentation for <a href="../gridftp">installing a standalone GridFTP server</a> for each of your intended GridFTP servers (skip section 2.2, requesting a certificate). For hosts with GridFTP already installed, skip this section.</p>
<h3 id="configuring-your-gridftp-servers">Configuring your GridFTP servers<a class="headerlink" href="#configuring-your-gridftp-servers" title="Permanent link">&para;</a></h3>
<p>Each GridFTP server requires changes to its IP configuration and potentially its arptables:</p>
<ul>
<li><a href="#adding-your-virtual-ip-address">Adding your virtual IP address</a></li>
<li><a href="#disabling-arp">Disabling ARP</a> − if your GridFTP servers are on the same network segment as the virtual IP</li>
</ul>
<h4 id="adding-your-virtual-ip-address">Adding your virtual IP address<a class="headerlink" href="#adding-your-virtual-ip-address" title="Permanent link">&para;</a></h4>
<p>Use the virtual IP address of your load balancer(s) as the secondary IPs of each of your GridFTP servers.</p>
<ol>
<li>
<p>Add the virtual IP using the <code>ip</code> tool:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> ip addr add &lt;VIRTUAL-IP-ADDRESS&gt;/&lt;SUBNET-MASK&gt; dev &lt;NETWORK-INTERFACE&gt;
</pre></div>


</li>
<li>
<p>To persist the virtual IP changes across reboots, edit <code>/etc/rc.d/rc.local</code>, and add the same command as used above.</p>
</li>
<li>Make sure that <code>/etc/rc.d/rc.local</code> is executable:<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> chmod u+x /etc/rc.d/rc.local
</pre></div>


</li>
</ol>
<h4 id="disabling-arp">Disabling ARP<a class="headerlink" href="#disabling-arp" title="Permanent link">&para;</a></h4>
<p>If your GridFTP servers and load balancer(s) are on the same network segment, you will have to disable ARP on the GridFTP servers to avoid <a href="http://kb.linuxvirtualserver.org/wiki/ARP_Issues_in_LVS/DR_and_LVS/TUN_Clusters">ARP race conditions</a>. Otherwise, skip to <a href="#preparing-keepalived-load-balancers">the section on preparing keepalived</a>.</p>
<ol>
<li>
<p>Select the appropriate RPM:</p>
<table>
<thead>
<tr>
<th><strong>If your operating system version is...</strong></th>
<th><strong>Then use the following package(s)...</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Enterprise Linux 6</td>
<td><code>arptables_jf</code></td>
</tr>
<tr>
<td>Enterprise Linux 7</td>
<td><code>arptables</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Install the arptables software:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum install &lt;PACKAGE&gt;
</pre></div>


</li>
<li>
<p>Disable ARP:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> arptables -F 
<span class="gp">root@host #</span> arptables -A IN -d &lt;VIRTUAL-IP-ADDRESS&gt; -j DROP 
<span class="gp">root@host #</span> arptables -A OUT -s &lt;VIRTUAL-IP-ADDRESS&gt; -j mangle --mangle-ip-s &lt;GRIDFTP-REAL-IP-ADDRESS&gt;
</pre></div>


</li>
<li>
<p>Save ARP tables to survive reboots:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> arptables-save &gt; /etc/sysconfig/arptables
</pre></div>


</li>
</ol>
<h2 id="preparing-keepalived-load-balancers">Preparing Keepalived Load Balancer(s)<a class="headerlink" href="#preparing-keepalived-load-balancers" title="Permanent link">&para;</a></h2>
<h3 id="installing-keepalived">Installing Keepalived<a class="headerlink" href="#installing-keepalived" title="Permanent link">&para;</a></h3>
<p>Whether you run a single load balancer, or have one active load balancer and some inactive backups, each load balancer host must have the <code>keepalived</code> software installed, configured, and running.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not install <code>keepalived</code> on the GridFTP servers themselves.</p>
</div>
<p>The <code>keepalived</code> package is available from standard operating system repositories. Install it on each load balancer host using the following commands:</p>
<ol>
<li>
<p>Clean yum cache:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum clean all --enablerepo<span class="o">=</span>*
</pre></div>


</li>
<li>
<p>Update software:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum update
</pre></div>


<p>This command will update <strong>all</strong> packages</p>
</li>
<li>
<p>Install the <code>keepalived</code> package:</p>
<div class="codehilite"><pre><span></span>root@host # yum install keepalived
</pre></div>


</li>
</ol>
<h3 id="required-configuration">Required configuration<a class="headerlink" href="#required-configuration" title="Permanent link">&para;</a></h3>
<p>On the primary load balancer, edit <code>/etc/keepalived/keepalived.conf</code>:</p>
<div class="codehilite"><pre><span></span>global_defs {
   router_id &lt;STRING-LABEL-FOR-YOUR-LOAD-BALANCED-SYSTEM&gt;
}

vrrp_instance VI_gridftp {
    state MASTER
    interface &lt;NETWORK-INTERFACE&gt;
    virtual_router_id &lt;INTEGER-BETWEEN-0-AND-255&gt;
    priority 100
    virtual_ipaddress {
        &lt;VIRTUAL-IP-ADDRESS&gt;/&lt;SUBNET-MASK&gt; dev &lt;NETWORK-INTERFACE&gt;
    }
}

virtual_server &lt;VIRTUAL-IP-ADDRESS&gt; 2811 {
    delay_loop 10
    lb_algo wlc
    lb_kind DR
    protocol tcp

    real_server &lt;GRIDFTP-SERVER-#1-IP ADDRESS&gt; {
        TCP_CHECK {
            connect_timeout 3
            connect_port 2811
        }
    }
    real_server &lt;GRIDFTP-SERVER-#2-IP-ADDRESS&gt; {
        TCP_CHECK {
            connect_timeout 3
            connect_port 2811
        }
    }
    [...]
}
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use the same <code>VIRTUAL-IP-ADDRESS</code> throughout the configuration of your load-balanced GridFTP system.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the <code>virtual_server</code> section, write one <code>real_server</code> subsection for each GridFTP server behind the load balancer.</p>
</div>
<h3 id="optional-configuration">Optional configuration<a class="headerlink" href="#optional-configuration" title="Permanent link">&para;</a></h3>
<p>The following configuration steps are optional and will likely not be required for setting up a small cluster of GridFTP hosts. If you do not need any of the following special configurations, skip to <a href="#using-keepalived">the section on using keepalived</a>.</p>
<ul>
<li><a href="#adding-backup-load-balancers">Adding backup load balancers</a></li>
<li><a href="#enabling-e-mail-notifications">Enabling e-mail notifications</a></li>
</ul>
<h4 id="adding-backup-load-balancers">Adding backup load balancers<a class="headerlink" href="#adding-backup-load-balancers" title="Permanent link">&para;</a></h4>
<p>If you need to add backup load balancers, copy <code>/etc/keepalived/keepalived.conf</code> from your primary load balancer and change the <code>state</code> and <code>priority</code> attributes under your <code>vrrp_instance VI_gridftp</code> section:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Priority specifies the order of preferred load balancer fallback, where larger values corresponds to a higher preference.</p>
</div>
<div class="codehilite"><pre><span></span>vrrp_instance VI_gridftp {
    state BACKUP
    interface &lt;NETWORK-INTERFACE&gt;
    virtual_router_id &lt;SAME-ID-AS-MASTER-LOAD-BALANCER&gt;
    priority &lt;PRIORITY-INTEGER&gt;
    virtual_ipaddress {
        &lt;VIRTUAL-IP-ADDRESS&gt;/&lt;SUBNET-MASK&gt; dev &lt;NETWORK-INTERFACE&gt;
    }
}
</pre></div>


<h4 id="enabling-e-mail-notifications">Enabling e-mail notifications<a class="headerlink" href="#enabling-e-mail-notifications" title="Permanent link">&para;</a></h4>
<p>To receive e-mails when the state of your load-balanced system changes, update the <code>global_defs</code> section of <code>/etc/keepalived/keepalived.conf</code> for each of your load balancer nodes:</p>
<div class="codehilite"><pre><span></span>notification_email {
&lt;NOTIFY-EMAIL-ADDRESS-#1&gt;
&lt;NOTIFY-EMAIL-ADDRESS-#2&gt;
[...]
}
notification_email_from &lt;FROM-EMAIL-ADDRESS&gt;
smtp_server &lt;SMTP-SERVER-IP-ADDRESS&gt;
smtp_connect_timeout 60
router_id &lt;MACHINE-IDENTIFYING-STRING&gt;
</pre></div>


<h2 id="using-your-load-balanced-gridftp-system">Using Your Load Balanced GridFTP System<a class="headerlink" href="#using-your-load-balanced-gridftp-system" title="Permanent link">&para;</a></h2>
<h3 id="using-gridftp">Using GridFTP<a class="headerlink" href="#using-gridftp" title="Permanent link">&para;</a></h3>
<p>On the GridFTP servers, arptables is the only additional service required for running a load-balanced GridFTP system. The name of the arptables service depends on the version of your host OS:</p>
<ol>
<li>
<p>Select the appropriate RPM:</p>
<table>
<thead>
<tr>
<th><strong>If your operating system version is...</strong></th>
<th><strong>Then use the following package(s)...</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Enterprise Linux 6</td>
<td><code>arptables_jf</code></td>
</tr>
<tr>
<td>Enterprise Linux 7</td>
<td><code>arptables</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Manage the service with the following commands:</p>
<table>
<thead>
<tr>
<th><strong>To ...</strong></th>
<th><strong>On EL 6, run the command...</strong></th>
<th><strong>On EL 7, run the command...</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Start a service</td>
<td><code>service SERVICE-NAME start</code></td>
<td><code>systemctl start SERVICE-NAME</code></td>
</tr>
<tr>
<td>Stop a service</td>
<td><code>service SERVICE-NAME stop</code></td>
<td><code>systemctl stop SERVICE-NAME</code></td>
</tr>
<tr>
<td>Enable a service to start during boot</td>
<td><code>chkconfig SERVICE-NAME on</code></td>
<td><code>systemctl enable SERVICE-NAME</code></td>
</tr>
<tr>
<td>Disable a service from starting during boot</td>
<td><code>chkconfig SERVICE-NAME off</code></td>
<td><code>systemctl disable SERVICE-NAME</code></td>
</tr>
</tbody>
</table>
</li>
</ol>
<p>For information on how to use your individual GridFTP servers, please refer to the <a href="../gridftp#managing-gridftp">Managing GridFTP section</a> of the GridFTP installation guide.</p>
<h3 id="using-keepalived">Using Keepalived<a class="headerlink" href="#using-keepalived" title="Permanent link">&para;</a></h3>
<p>On the load balancer nodes, <code>keepalived</code> is the only additional service required for running a load-balanced GridFTP system. As a reminder, here are common service commands (all run as <code>root</code>):</p>
<table>
<thead>
<tr>
<th align="left">To...</th>
<th align="left">On EL 6, run the command...</th>
<th align="left">On EL 7, run the command...</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Start a service</td>
<td align="left"><code>service keepalived start</code></td>
<td align="left"><code>systemctl start keepalived</code></td>
</tr>
<tr>
<td align="left">Stop a service</td>
<td align="left"><code>service keepalived stop</code></td>
<td align="left"><code>systemctl stop keepalived</code></td>
</tr>
<tr>
<td align="left">Enable a service to start during boot</td>
<td align="left"><code>chkconfig keepalived on</code></td>
<td align="left"><code>systemctl enable keepalived</code></td>
</tr>
<tr>
<td align="left">Disable a service from starting during boot</td>
<td align="left"><code>chkconfig keepalived off</code></td>
<td align="left"><code>systemctl disable keepalived</code></td>
</tr>
</tbody>
</table>
<h2 id="getting-help">Getting Help<a class="headerlink" href="#getting-help" title="Permanent link">&para;</a></h2>
<p>To get assistance with <code>keepalived</code> in front of OSG Software services, please use the <a href="../../common/help">this page</a>.</p>
<hr />
<ul>
<li><a href="http://www.linuxvirtualserver.org/whatis.html">Linux Virtual Server homepage</a></li>
<li><a href="http://www.keepalived.org/index.html">Keepalived homepage</a></li>
<li><a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Load_Balancer_Administration/index.html">RHEL 7 Load Balancer Administration Guide</a></li>
<li><a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Load_Balancer_Administration/index.html">RHEL 6 Load Balancer Administration Guide</a></li>
<li><a href="https://github.com/gattebury/gridftp-with-lvs">T2 Nebraska LVS installation notes</a></li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        

<div class="md-footer-nav">
  <nav class="md-footer-nav__inner md-grid">
    
    <a href="../gridftp/" title="Install GridFTP Server" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
      <div class="md-flex__cell md-flex__cell--shrink">
        <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
        <span class="md-flex__ellipsis">
          <span class="md-footer-nav__direction">
            Previous
          </span>
          Install GridFTP Server
        </span>
      </div>
    </a>
    
    
    <a href="../xrootd/overview/" title="XRootD Overview" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
      <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
        <span class="md-flex__ellipsis">
          <span class="md-footer-nav__direction">
            Next
          </span>
          XRootD Overview
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
      </div>
    </a>
    
  </nav>
</div>

<div class="md-footer-meta md-typeset">
  <div class="md-footer-meta__inner md-grid">
    <div class="md-footer-copyright">
      
      This material is based upon work supported by the
      <a href="https://nsf.gov">National Science Foundation</a>
      under Grant Nos.
      <a href=https://www.nsf.gov/awardsearch/showAward?AWD_ID=1148698>1148698</a>
      and
      <a href=https://www.nsf.gov/awardsearch/showAward?AWD_ID=1836650>1836650</a>
      . Any opinions, findings, and conclusions or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the views of the National Science Foundation.
    </div>
    
    
    
  </div>
</div>

      
    </div>
    
      <script src="../../assets/javascripts/application.30f6b8b1.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:"../.."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-69012-29","opensciencegrid.github.io"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>