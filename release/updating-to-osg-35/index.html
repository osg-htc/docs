
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://osg-htc.org/docs/release/updating-to-osg-35/">
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.8">
    
    
      
        <title>Updating to OSG 3.5 - OSG Site Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.644de097.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-69012-29","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#updating-to-osg-35" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="OSG Site Documentation" class="md-header__button md-logo" aria-label="OSG Site Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OSG Site Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Updating to OSG 3.5
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/osg-htc/docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="OSG Site Documentation" class="md-nav__button md-logo" aria-label="OSG Site Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    OSG Site Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/osg-htc/docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../site-planning/" class="md-nav__link">
        Site Planning
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../site-verification/" class="md-nav__link">
        Site Verification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../site-maintenance/" class="md-nav__link">
        Site Maintenance
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../common/help/" class="md-nav__link">
        Help / Security Incidents
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Registration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Registration" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Registration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../common/contact-registration/" class="md-nav__link">
        Contact Information
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../common/registration/" class="md-nav__link">
        Resources and Collaborations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Resource Sharing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Resource Sharing" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Resource Sharing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" type="checkbox" id="__nav_7_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1">
          Compute
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Compute" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_1">
          <span class="md-nav__icon md-icon"></span>
          Compute
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource-sharing/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2" type="checkbox" id="__nav_7_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1_2">
          Pilot Containers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Pilot Containers" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_2">
          <span class="md-nav__icon md-icon"></span>
          Pilot Containers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource-sharing/os-backfill-containers/" class="md-nav__link">
        Site Backfill
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource-sharing/user-containers/" class="md-nav__link">
        User Allocations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_3" type="checkbox" id="__nav_7_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1_3">
          Compute Entrypoint
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Compute Entrypoint" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_3">
          <span class="md-nav__icon md-icon"></span>
          Compute Entrypoint
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../compute-element/htcondor-ce-overview/" class="md-nav__link">
        HTCondor-CE Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../compute-element/hosted-ce/" class="md-nav__link">
        Request a Hosted CE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../compute-element/install-htcondor-ce/" class="md-nav__link">
        Install HTCondor-CE
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_4" type="checkbox" id="__nav_7_1_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1_4">
          Worker Node
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Worker Node" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_4">
          <span class="md-nav__icon md-icon"></span>
          Worker Node
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../worker-node/using-wn/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../worker-node/install-wn/" class="md-nav__link">
        Install from RPM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../worker-node/install-wn-tarball/" class="md-nav__link">
        Install from Tarball
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../worker-node/install-wn-oasis/" class="md-nav__link">
        Install from OASIS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../worker-node/install-cvmfs/" class="md-nav__link">
        Install CVMFS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../worker-node/install-apptainer/" class="md-nav__link">
        Install Apptainer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../worker-node/using-wn-containers/" class="md-nav__link">
        Using WN Containers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2">
          Data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_1" type="checkbox" id="__nav_7_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2_1">
          HTTP & OASIS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="HTTP & OASIS" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_2_1">
          <span class="md-nav__icon md-icon"></span>
          HTTP & OASIS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/run-frontier-squid-container/" class="md-nav__link">
        Running Frontier Squid in a Container
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/frontier-squid/" class="md-nav__link">
        Install Frontier Squid RPM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/update-oasis/" class="md-nav__link">
        Update OASIS Shared Repo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/external-oasis-repos/" class="md-nav__link">
        Install an OASIS Repo
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_2" type="checkbox" id="__nav_7_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2_2">
          XRootD
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="XRootD" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_2_2">
          <span class="md-nav__icon md-icon"></span>
          XRootD
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/xrootd/overview/" class="md-nav__link">
        XRootD Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/xrootd/install-standalone/" class="md-nav__link">
        Install XRootD Standalone
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/xrootd/install-storage-element/" class="md-nav__link">
        Install XRootD SE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/xrootd/xrootd-authorization/" class="md-nav__link">
        Configure Authorization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/xrootd/install-client/" class="md-nav__link">
        Using XRootD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/xrootd/install-cms-xcache/" class="md-nav__link">
        Install CMS XCache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/xrootd/install-shoveler/" class="md-nav__link">
        Install XRootD Shoveler
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3" type="checkbox" id="__nav_7_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_3">
          Other
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Other" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          Other
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/configuration-with-osg-configure/" class="md-nav__link">
        Configuration with OSG-Configure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/install-gwms-frontend/" class="md-nav__link">
        Install GlideinWMS Frontend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/install-cvmfs-stratum1/" class="md-nav__link">
        Install a CVMFS Stratum 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/troubleshooting-gratia/" class="md-nav__link">
        Troubleshooting Gratia
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/schedd-filebeats/" class="md-nav__link">
        Install Transfer Log Filebeats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/osg-token-renewer/" class="md-nav__link">
        Install OSG Token Renewal Service
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Access Point
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Access Point" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Access Point
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../submit/osg-flock/" class="md-nav__link">
        Install an OSPool Access Point
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../submit/ap-ospool-aup/" class="md-nav__link">
        Acceptable Use Policy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Data Federation (OSDF)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Federation (OSDF)" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Data Federation (OSDF)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/stashcache/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2" type="checkbox" id="__nav_9_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2">
          Data Cache
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Cache" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_2">
          <span class="md-nav__icon md-icon"></span>
          Data Cache
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/stashcache/run-stashcache-container/" class="md-nav__link">
        Install from container
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/stashcache/install-cache/" class="md-nav__link">
        Install from RPM
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_3" type="checkbox" id="__nav_9_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_3">
          Data Origin
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Origin" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_3">
          <span class="md-nav__icon md-icon"></span>
          Data Origin
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/stashcache/run-stash-origin-container/" class="md-nav__link">
        Install from container
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/stashcache/install-origin/" class="md-nav__link">
        Install from RPM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/stashcache/vo-data/" class="md-nav__link">
        Publishing VO data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Releases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Releases" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Releases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release_series/" class="md-nav__link">
        Release Series
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2" type="checkbox" id="__nav_10_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2">
          OSG 3.6
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="OSG 3.6" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_2">
          <span class="md-nav__icon md-icon"></span>
          OSG 3.6
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../osg-36/" class="md-nav__link">
        News
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../updating-to-osg-36/" class="md-nav__link">
        Updating to OSG 3.6
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../supported_platforms/" class="md-nav__link">
        Supported Platforms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../common/yum/" class="md-nav__link">
        OSG Yum Repos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../yum-basics/" class="md-nav__link">
        Yum Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../signing/" class="md-nav__link">
        RPM Signing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Tokens
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tokens" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Tokens
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../security/tokens/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../security/tokens/using-tokens/" class="md-nav__link">
        Using Tokens
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          CA Certificates
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CA Certificates" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          CA Certificates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../common/ca/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../security/certificate-management/" class="md-nav__link">
        Certificate Management Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12_3" type="checkbox" id="__nav_12_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3">
          Host Certificates
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Host Certificates" data-md-level="2">
        <label class="md-nav__title" for="__nav_12_3">
          <span class="md-nav__icon md-icon"></span>
          Host Certificates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../security/host-certs/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../security/host-certs/incommon/" class="md-nav__link">
        Using InCommon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../security/host-certs/lets-encrypt/" class="md-nav__link">
        Using Let's Encrypt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#updating-to-htcondor-ce-4x" class="md-nav__link">
    Updating to HTCondor-CE 4.x
  </a>
  
    <nav class="md-nav" aria-label="Updating to HTCondor-CE 4.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#updating-to-htcondor-88x" class="md-nav__link">
    Updating to HTCondor 8.8.x
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-to-osg-configure-3" class="md-nav__link">
    Updating to OSG Configure 3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-to-htcondor-ce-5" class="md-nav__link">
    Updating to HTCondor-CE 5
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-to-htcondor-88x_1" class="md-nav__link">
    Updating to HTCondor 8.8.x
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-to-htcondor-900" class="md-nav__link">
    Updating to HTCondor 9.0.0+
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-to-xrootd-5" class="md-nav__link">
    Updating to XRootD 5
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-help" class="md-nav__link">
    Getting Help
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/osg-htc/docs/edit/master/docs/release/updating-to-osg-35.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



<h1 id="updating-to-osg-35">Updating to OSG 3.5<a class="headerlink" href="#updating-to-osg-35" title="Permanent link">&para;</a></h1>
<div class="admonition note">
<p class="admonition-title">OS Version Support</p>
<p>OSG 3.5 only supports EL7</p>
</div>
<p>If you have an existing installation based on OSG release version &lt;= 3.4 (which will be referred to as the <em>old series</em>),
and want to upgrade to 3.5 (the <em>new series</em>), we recommend the following procedure:</p>
<ol>
<li>
<p>First, remove the old series yum repositories:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>rpm -e osg-release
</code></pre></div>

<p>This step ensures that any local modifications to <code>*.repo</code> files will not prevent installing the new series repos.
Any modified <code>*.repo</code> files should appear under <code>/etc/yum.repos.d/</code> with the <code>*.rpmsave</code> extension.
After installing the new OSG repositories (the next step) you may want to apply any changes made in the <code>*.rpmsave</code>
files to the new <code>*.repo</code> files.</p>
</li>
<li>
<p>Install the OSG repositories:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>yum install https://repo.opensciencegrid.org/osg/3.5/osg-3.5-el7-release-latest.rpm
</code></pre></div>

</li>
<li>
<p>Clean yum cache:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>yum clean all --enablerepo<span class="o">=</span>*
</code></pre></div>

</li>
<li>
<p>Update software:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>yum update
</code></pre></div>

<div class="admonition info">
<p class="admonition-title">Info</p>
<ul>
<li>Please be aware that running <code>yum update</code> may also update other RPMs.
    You can exclude packages from being updated using the <code>--exclude=[package-name or glob]</code> option for the
    <code>yum</code> command.</li>
<li>Watch the yum update carefully for any messages about a <code>.rpmnew</code> file being created.
    That means that a configuration file had been edited, and a new default version was to be installed.
    In that case, RPM does not overwrite the edited configuration file but instead installs the new version with
    a <code>.rpmnew</code> extension.
    You will need to merge any edits that have made into the <code>.rpmnew</code> file and then move the merged version
    into place (that is, without the <code>.rpmnew</code> extension).
    Watch especially for <code>/etc/lcmaps.db</code>, which every site is expected to edit.</li>
</ul>
</div>
</li>
<li>
<p>Remove any deprecated packages that were previously installed:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>yum remove osg-version <span class="se">\</span>
                       osg-control <span class="se">\</span>
                       <span class="s1">&#39;rsv*&#39;</span> <span class="se">\</span>
                       glite-ce-cream-client-api-c <span class="se">\</span>
                       glite-lbjp-common-gsoap-plugin <span class="se">\</span>
                       xacml
</code></pre></div>

<p>If you did not have any of the above packages installed, Yum will not remove any packages:</p>
<div class="codehilite"><pre><span></span><code>No Match for argument: osg-version
No Match for argument: osg-control
No Match for argument: rsv*
No Match for argument: glite-ce-cream-client-api-c
No Match for argument: glite-lbjp-common-gsoap-plugin
No Match for argument: xacml
No Packages marked for removal
</code></pre></div>

</li>
<li>
<p>If you are updating an HTCondor-CE host, please consult the manual <a href="#updating-to-htcondor-88x_1">HTCondor</a> and
<a href="#updating-to-osg-configure-3">OSG Configure</a> instructions below.</p>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Running into issues?</p>
<p>If you are not having the expected result or having problems with Yum please see the
<a href="../yum-basics/#troubleshooting">Yum troubleshooting guide</a></p>
</div>
<h2 id="updating-to-htcondor-ce-4x">Updating to HTCondor-CE 4.x<a class="headerlink" href="#updating-to-htcondor-ce-4x" title="Permanent link">&para;</a></h2>
<p>The OSG 3.5 release series contains HTCondor-CE 4, a major version upgrade from the previously released versions in the OSG.
See the HTCondor-CE 4.0.0 <a href="https://github.com/htcondor/htcondor-ce/releases/tag/v4.0.0">release notes</a> for an overview
of the changes.
In particular, this version includes a major reorganization of the default configuration so updates will require manual
intervention.
To update your HTCondor-CE host(s), perform the following steps:</p>
<ol>
<li>
<p>Update all CE packages:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>yum update osg-ce <span class="s1">&#39;osg-ce*&#39;</span>
</code></pre></div>

</li>
<li>
<p>The new default <code>condor_mapfile</code> is sufficient since HTCondor-CE no longer relies on GSI authentication between
   its daemons.
   If <code>/etc/condor-ce/condor_mapfile.rpmnew</code> exists, replace your old <code>condor_mapfile</code> with the <code>.rpmnew</code> version:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>mv /etc/condor-ce/condor_mapfile.rpmnew /etc/condor-ce/condor_mapfile
</code></pre></div>

</li>
<li>
<p>Merge any <code>*.rpmnew</code> files in <code>/etc/condor-ce/config.d/</code></p>
</li>
<li>
<p>Additionally, you may wish to make one or more of the following optional changes:</p>
<ul>
<li>
<p>HTCondor-CE now disables batch system job retries by default.
  To re-enable job retries, set the following configuration in <code>/etc/condor-ce/config.d/99-local.conf</code>:</p>
<div class="codehilite"><pre><span></span><code>ENABLE_JOB_RETRIES = True
</code></pre></div>

</li>
<li>
<p>For non-HTCondor sites that use <a href="https://htcondor.com/htcondor-ce/v5/configuration/local-batch-system/#non-htcondor-batch-systems">remote CE requirements</a>,
  the new version of HTCondor-CE accepts a simplified format.
  For example, a snippet from an example job route in the old format:</p>
<div class="codehilite"><pre><span></span><code>set_default_remote_cerequirements = strcat(&quot;Walltime == 3600 &amp;&amp; AccountingGroup ==&quot;&quot;, x509UserProxyFirstFQAN, &quot;\&quot;&quot;);
</code></pre></div>

<p>May be rewritten as the following:</p>
<div class="codehilite"><pre><span></span><code>set_WallTime = 3600;
set_AccountingGroup = x509UserProxyFirstFQAN;
set_default_CERequirements = &quot;Walltime,AccountingGroup&quot;;
</code></pre></div>

</li>
</ul>
</li>
<li>
<p>Reload and restart the HTCondor-CE daemons:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>systemctl daemon-reload
<span class="gp">root@host # </span>systemctl restart condor-ce
</code></pre></div>

</li>
</ol>
<h3 id="updating-to-htcondor-88x">Updating to HTCondor 8.8.x<a class="headerlink" href="#updating-to-htcondor-88x" title="Permanent link">&para;</a></h3>
<p>The OSG 3.5 release series contains HTCondor 8.8, a major version upgrade from the previously released versions in the OSG.
See the detailed <a href="#updating-to-htcondor-88x_1">update instructions below</a> to update to HTCondor 8.8.</p>
<h2 id="updating-to-osg-configure-3">Updating to OSG Configure 3<a class="headerlink" href="#updating-to-osg-configure-3" title="Permanent link">&para;</a></h2>
<p>The OSG 3.5 release series contains OSG-Configure 3, a major version upgrade from the previously released versions in the OSG.
See the OSG Configure release notes for an overview of the
<a href="https://github.com/opensciencegrid/osg-configure/releases/tag/v3.0.0">changes</a>.
To update OSG Configure on your HTCondor-CE, perform the following steps:</p>
<ol>
<li>
<p>If you haven't already, <a href="#updating-to-osg-35">update to OSG 3.5</a>.</p>
</li>
<li>
<p>If you have <code>site_name</code> set in <code>/etc/osg/config.d/40-siteinfo.ini</code>, delete it and specify <code>resource</code> instead.
   <code>resource</code> should match the resource name that's registered in
   <a href="../../common/registration/#registering-resources">OSG Topology</a>.</p>
</li>
<li>
<p>Set <code>resource_group</code> in <code>/etc/osg/config.d/40-siteinfo.ini</code> to the resource group registered in
    <a href="../../common/registration/#registering-resources">OSG Topology</a>,
    i.e. the name of the <code>.yaml</code> file in OSG Topology that contains the registered resource above.</p>
</li>
<li>
<p>Set <code>host_name</code> to the host name that is registered in <a href="../../common/registration/#registering-resources">OSG Topology</a>.
    This may be different from the FQDN of the host if you're using a DNS alias, for example.</p>
</li>
<li>
<p>OSG Configure will warn about config options that it does not recognize;
    delete these options from the config to get rid of the warnings.</p>
</li>
</ol>
<h2 id="updating-to-htcondor-ce-5">Updating to HTCondor-CE 5<a class="headerlink" href="#updating-to-htcondor-ce-5" title="Permanent link">&para;</a></h2>
<p><a href="https://htcondor.github.io/htcondor-ce/v5/releases/">HTCondor-CE 5</a> is a major version upgrade from HTCondor-CE 4,
available through the <a href="../release_series/">OSG upcoming</a> repository.
HTCondor-CE 5 provides improved support for SciTokens and WLCG Tokens as well as support for a new Job Router
configuration syntax.
To update HTCondor-CE 5, perform the following steps:</p>
<ol>
<li>
<p>Update your HTCondor-CE packages:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>yum update htcondor-ce --enablerepo<span class="o">=</span>osg-upcoming
</code></pre></div>

<div class="admonition tip">
<p class="admonition-title">Updating to HTCondor 9.0.x</p>
<p>This update may also pull in updates to HTCondor 9.0.
To update, consult the <a href="#updating-to-htcondor-900">upgrade section below</a>, especially if you use HTCondor for
your local batch system.</p>
</div>
</li>
<li>
<p>If you support the <code>OSG</code>, <code>GLOW</code>, or <code>ATLAS</code>  VOs and map their jobs to non-standard local Unix accounts
    add SciTokens mappings to a file in <code>/etc/condor-ce/mapfiles.d/</code>:</p>
<div class="codehilite"><pre><span></span><code># OSG
SCITOKENS /^https\:\/\/scitokens\.org\/osg\-connect,/ osg
# GLOW
SCITOKENS /^https\:\/\/chtc\.cs\.wisc\.edu,/ glow
# ATLAS production
SCITOKENS /^https:\/\/atlas-auth.web.cern.ch\/,7dee38a3-6ab8-4fe2-9e4c-58039c21d817/ usatlas1
# ATLAS analysis
SCITOKENS /^https:\/\/atlas-auth.web.cern.ch\/,750e9609-485a-4ed4-bf16-d5cc46c71024/ usatlas3
# ATLAS SAM/ETF
SCITOKENS /^https:\/\/atlas-auth.web.cern.ch\/,5c5d2a4d-9177-3efa-912f-1b4e5c9fb660/ usatlas2
</code></pre></div>

<p>Replacing the third field with the local Unix account.</p>
</li>
<li>
<p>Also consult the <a href="https://htcondor.github.io/htcondor-ce/v5/releases/#updating-to-htcondor-ce-5">upgrade documentation</a>
    for other required configuration updates.</p>
</li>
</ol>
<h2 id="updating-to-htcondor-88x_1">Updating to HTCondor 8.8.x<a class="headerlink" href="#updating-to-htcondor-88x_1" title="Permanent link">&para;</a></h2>
<p>The OSG 3.5 release series contains HTCondor 8.8, a major version upgrade from the previously released versions
in the OSG.
See the HTCondor 8.8 manual for an overview of the
<a href="https://htcondor.readthedocs.io/en/v8_8/version-history/upgrading-from-86-to-88-series.html">changes</a>.
To update HTCondor on your HTCondor-CE and/or HTCondor pool hosts, perform the following steps:</p>
<ol>
<li>
<p>Update all HTCondor packages:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>yum update <span class="s1">&#39;condor*&#39;</span>
</code></pre></div>

</li>
<li>
<p><strong>HTCondor pools only:</strong></p>
<ul>
<li>
<p>The <code>DAEMON_LIST</code>, and <code>CONDOR_HOST</code> configuration changed in HTCondor 8.8.
  Additionally in OSG 3.5, the default security was changed to use FS and pool password.
  If you are experiencing issues with communication between hosts in your pool after the upgrade,
  the default OSG configuration is listed in <code>/etc/condor/config.d/00-osg_default_*.config</code>:
  ensure that any default configuration is overridden with your own <code>DAEMON_LIST</code>, <code>CONDOR_HOST</code>, and/or
  <a href="https://htcondor.readthedocs.io/en/v8_8/admin-manual/security.html">security</a> configuration in subsequent files.</p>
</li>
<li>
<p>As of HTCondor 8.8, <a href="https://htcondor.readthedocs.io/en/v8_8/admin-manual/configuration-macros.html#condor-startd-configuration-file-macros">MOUNT_UNDER_SCRATCH</a>
  has default values of <code>/tmp</code> and <code>/var/tmp</code>, which may cause issues if your
  <a href="../../worker-node/using-wn/#the-worker-node-environment">OSG_WN_TMP</a> is a subdirectory of either of these directories.
  If the partition containing your execute directories is <a href="../../worker-node/using-wn/#hardware-recommendations">large enough</a>,
  we recommend setting your <code>OSG_WN_TMP</code> to <code>/tmp</code> or <code>/var/tmp</code>.
  If that partition is not large enough, we recommend setting your <code>OSG_WN_TMP</code> variable to a directory outside of
  <code>/tmp</code> or <code>/var/tmp</code>.</p>
</li>
</ul>
</li>
<li>
<p><strong>HTCondor-CE hosts only:</strong> The HTCondor 8.8 series changed the default job route matching order
   <a href="https://htcondor.com/htcondor-ce/v5/configuration/job-router-overview/#how-jobs-match-to-routes">from round-robin to first matching route</a>.
   To use the old round-robin matching order, add the following configuration to <code>/etc/condor-ce/config.d/99-local.conf</code>:</p>
<div class="codehilite"><pre><span></span><code>JOB_ROUTER_ROUND_ROBIN_SELECTION = True
</code></pre></div>

</li>
<li>
<p>Clean-up deprecated packages:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>yum remove <span class="s1">&#39;rsv*&#39;</span> glite-ce-cream-client-api-c
</code></pre></div>

</li>
</ol>
<h2 id="updating-to-htcondor-900">Updating to HTCondor 9.0.0+<a class="headerlink" href="#updating-to-htcondor-900" title="Permanent link">&para;</a></h2>
<div class="admonition tip">
<p class="admonition-title">Where to find HTCondor 9.0</p>
<p>The HTCondor <a href="https://htcondor.readthedocs.io/en/v9_0/version-history/stable-release-series-90.html#stable-release-series-9-0">9.0 series</a>
is available through the <a href="../release_series/">OSG upcoming</a> repository.</p>
</div>
<ul>
<li>
<p>Manual intervention may be required to upgrade from the HTCondor 8.8 series to HTCondor 9.0.x.
   Please consult the <a href="https://htcondor.readthedocs.io/en/v9_0/version-history/upgrading-from-88-to-90-series.html">HTCondor 9.0 upgrade instructions</a>.</p>
</li>
<li>
<p>If you are upgrading from the HTCondor 8.9 series (8.9.11 and earlier), please consult the <a href="https://htcondor-wiki.cs.wisc.edu/index.cgi/wiki?p=UpgradingToNineDotZero">Upgrading to 9.0 instructions</a></p>
</li>
</ul>
<p>For HTCondor hosts &lt; 8.9.7 using the SciTokens CredMon, updates to HTCondor 8.9.7+ require manual intervention and a
corresponding update to <code>python2-scitokens-credmon</code>, available in the OSG 3.5 release repository.
If you do not have the <code>python2-scitokens-credmon</code> package installed, you may skip these instructions.
Otherwise, follow these steps for a seamless update to HTCondor 8.9.7+:</p>
<ol>
<li>
<p>Determine if your HTCondor installation is configured to use the SciTokens CredMon:</p>
<div class="codehilite"><pre><span></span><code><span class="gp"># </span>condor_config_val -v DAEMON_LIST
</code></pre></div>

<p>If <code>CREDD</code> and <code>SEC_CREDENTIAL_MONITOR</code> are in the output of the above command, continue onto the next step.
Otherwise, your installation is not configured to use SciTokens CredMon and you should skip the rest of these
instructions.</p>
</li>
<li>
<p>Add the following to a file in <code>/etc/condor/config.d/</code>:</p>
<div class="codehilite"><pre><span></span><code>SEC_CREDENTIAL_DIRECTORY_OAUTH = /var/lib/condor/oauth_credentials
CREDMON_OAUTH = /usr/bin/condor_credmon_oauth
SEC_CREDENTIAL_MONITOR_OAUTH_LOG = $(LOG)/CredMonOAuthLog

if version &lt; 8.9.7
  CREDMON_OAUTH = /usr/bin/scitokens_credmon
endif
</code></pre></div>

</li>
<li>
<p>Update your <code>DAEMON_LIST</code> configuration from:</p>
<div class="codehilite"><pre><span></span><code>DAEMON_LIST = $(DAEMON_LIST), CREDD, SEC_CREDENTIAL_MONITOR
</code></pre></div>

<p>to</p>
<div class="codehilite"><pre><span></span><code>DAEMON_LIST = $(DAEMON_LIST), CREDD, CREDMON_OAUTH
</code></pre></div>

</li>
<li>
<p>Turn off the SchedD and CredMon daemons:</p>
<div class="codehilite"><pre><span></span><code><span class="gp"># </span>condor_off -daemon SCHEDD
<span class="gp"># </span>condor_off -daemon SEC_CREDENTIAL_MONITOR
<span class="gp"># </span>condor_off -daemon CREDMON_OAUTH
</code></pre></div>

</li>
<li>
<p>Move the existing credential directory and set up a temporary symlink:</p>
<div class="codehilite"><pre><span></span><code># mv $(condor_config_val SEC_CREDENTIAL_DIRECTORY) $(condor_config_val SEC_CREDENTIAL_DIRECTORY_OAUTH)
# ln -s $(condor_config_val SEC_CREDENTIAL_DIRECTORY_OAUTH) $(condor_config_val SEC_CREDENTIAL_DIRECTORY)
</code></pre></div>

</li>
<li>
<p>Update HTCondor and SciTokens CredMon packages:</p>
<div class="codehilite"><pre><span></span><code><span class="gp"># </span>yum -y upgrade python2-scitokens-credmon condor
</code></pre></div>

</li>
<li>
<p>If you are running Apache on this host, reload the Apache configuration:</p>
<div class="codehilite"><pre><span></span><code><span class="gp"># </span>systemctl reload httpd.service
</code></pre></div>

</li>
<li>
<p>Reconfigure HTCondor:</p>
<div class="codehilite"><pre><span></span><code><span class="gp"># </span>condor_reconfig
</code></pre></div>

</li>
<li>
<p>Turn the SchedD and CredMon daemons back on:</p>
<div class="codehilite"><pre><span></span><code><span class="gp"># </span>condor_on -daemon CREDMON_OAUTH
<span class="gp"># </span>condor_on -daemon SCHEDD
</code></pre></div>

</li>
<li>
<p>Clean up old CredMon configuration.
    Remove the following entries from your HTCondor configuration:</p>
<div class="codehilite"><pre><span></span><code>SEC_CREDENTIAL_DIRECTORY = /var/lib/condor/credentials
SEC_CREDENTIAL_MONITOR = /usr/bin/scitokens_credmon
SEC_CREDENTIAL_MONITOR_LOG = $(LOG)/CredMonLog
</code></pre></div>

</li>
<li>
<p>To allow for seamless HTCondor downgrades, update the <code>if version &lt; 8.9.7</code> block that you added in step 2.</p>
<div class="codehilite"><pre><span></span><code>if version &lt; 8.9.7
  CREDMON_OAUTH = /usr/bin/scitokens_credmon
  SEC_CREDENTIAL_DIRECTORY = $(SEC_CREDENTIAL_DIRECTORY_OAUTH)
endif
</code></pre></div>

</li>
<li>
<p>Remove the symlink to the old credential directory that you created in step 5.
    This is whatever you had set <code>SEC_CREDENTIAL_DIRECTORY</code> to before.
    For example:</p>
<div class="codehilite"><pre><span></span><code><span class="gp"># </span>rm /var/lib/condor/credentials
</code></pre></div>

</li>
</ol>
<h2 id="updating-to-xrootd-5">Updating to XRootD 5<a class="headerlink" href="#updating-to-xrootd-5" title="Permanent link">&para;</a></h2>
<div class="admonition bug">
<p class="admonition-title">Known issues with XRootD 5.1.1</p>
<ul>
<li>The XRootD team is <a href="https://github.com/xrootd/xrootd/pull/1431">evaluating solutions for a memory leak</a> in the
    HTTP Third-Party Copy (HTTP-TPC) use case related to <code>libcurl</code> and <code>NSS</code>.
    These leaks appear to exist in <code>libcurl</code> for all versions of XRootD and their impact depends on the transfer
    load at each site.</li>
<li><a href="https://github.com/opensciencegrid/xrootd-multiuser/issues/21">Incompatibility with the multi-user plugin</a>:
    users of the XRootD multi-user plugin will be unable to update to XRootD 5.1.x until a fixed version
    of XRootD multi-user is released into the OSG repositories</li>
<li>In some cases, XCaches using the Rucio plug-in may crash due to malformed URLs generated by the plug-in.</li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">Use the OSG XRootD meta-package!</p>
<p>The <code>osg-xrootd</code> and <code>osg-xrootd-standalone</code> meta-packages provide default XRootD configurations in
<code>/etc/xrootd/config.d/</code> with the ability to easily enable or disable features (such as HTTP or LCMAPS) through
simple configuration flags.
Additionally, the configurations provided by <code>osg-xrootd</code> and <code>osg-xrootd-standalone</code> are designed to work with the
OSG-released versions of XRootD, reducing the number of necessary manual configuration updates.</p>
</div>
<p>The OSG 3.5 upcoming repositories contain XRootD 5, a major version upgrade from the previously released versions
in the OSG.
See the upstream <a href="https://github.com/xrootd/xrootd/blob/v5.1.1/docs/ReleaseNotes.txt">release notes</a> for an overview of
the changes.
To update XRootD on your StashCache, XCache, XRootD clustered, and XRootD standalone hosts, perform the following steps:</p>
<ol>
<li>
<p>Update all XRootD packages:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>yum update --enablerepo<span class="o">=</span>osg-upcoming <span class="s1">&#39;xrootd&#39;</span>* xcache
</code></pre></div>

</li>
<li>
<p>Determine whether or not you are using OSG XRootD meta-packages</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>rpm -q --verify xrootd-server <span class="p">|</span> <span class="se">\</span>
            egrep <span class="s2">&quot;/etc/xrootd/xrootd-(standalone|clustered).cfg&quot;</span>
</code></pre></div>

</li>
<li>
<p>If the above command does not return any output, skip to step 6.</p>
</li>
<li>
<p><strong>If you are not using OSG XRootD meta-packaging and are using <code>xrootd-lcmaps</code>,</strong>
    update the <code>-authzfunparams</code> to the new <code>key=value</code> syntax.
    For example, the following configuration:</p>
<div class="codehilite"><pre><span></span><code><span class="go">-authzfunparms:--lcmapscfg,/etc/xrootd/lcmaps.cfg,--loglevel,0,--policy,authorize_only</span>
</code></pre></div>

<p>Should be turned into:</p>
<div class="codehilite"><pre><span></span><code><span class="go">-authzfunparms:lcmapscfg=/etc/lcmaps.db,loglevel=0,policy=authorize_only</span>
</code></pre></div>

</li>
<li>
<p><strong>If you are not using OSG XRootD meta-packaging and are loading multiple <code>ofs.authlib</code> libraries,</strong>
    separate out each library into its own <code>ofs.authlib</code> directive.
    For example, the following configuration:</p>
<div class="codehilite"><pre><span></span><code><span class="go">ofs.authlib libXrdMacaroons.so libXrdAccSciTokens.so</span>
</code></pre></div>

<p>Should be re-ordered and turned into:</p>
<div class="codehilite"><pre><span></span><code><span class="gp"># </span>Enable SciTokens-based mappings<span class="p">;</span> <span class="k">if</span> no token is present, <span class="k">then</span> the GSI certificate will be used.
<span class="go">ofs.authlib ++ libXrdAccSciTokens.so</span>
<span class="go">ofs.authlib ++ libXrdMacaroons.so</span>
</code></pre></div>

</li>
<li>
<p>Restart the relevant XRootD services:</p>
<table>
<thead>
<tr>
<th align="left">If you are running a(n)...</th>
<th align="left">Restart the service with...</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">ATLAS XCache</td>
<td align="left"><code>systemctl restart xrootd@atlas-xcache</code></td>
</tr>
<tr>
<td align="left">CMS XCache</td>
<td align="left"><code>systemctl restart xrootd@cms-xcache</code></td>
</tr>
<tr>
<td align="left">Stash Cache</td>
<td align="left"><code>systemctl restart xrootd@stash-cache</code></td>
</tr>
<tr>
<td align="left">Stash Origin</td>
<td align="left"><code>systemctl restart xrootd@stash-origin</code></td>
</tr>
<tr>
<td align="left">XRootD Standalone</td>
<td align="left"><code>systemctl restart xrootd@standalone</code></td>
</tr>
<tr>
<td align="left">XRootD Clustered</td>
<td align="left"><code>systemctl restart xrootd@clustered</code></td>
</tr>
</tbody>
</table>
</li>
</ol>
<h2 id="getting-help">Getting Help<a class="headerlink" href="#getting-help" title="Permanent link">&para;</a></h2>
<p>To get assistance, please use the <a href="../../common/help/">this page</a>.</p>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div>
    This material is based upon work supported by the
    <a href="https://nsf.gov">National Science Foundation</a>
    under Grant Nos.
    <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=1148698">1148698</a>
    ,
    <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=1836650">1836650</a>
    , and
    <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">2030508</a>
    . Any opinions, findings, and conclusions or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the views of the National Science Foundation.
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
        Material for MkDocs
    </a>
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.top"], "search": "../../assets/javascripts/workers/search.5e67fbfe.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c44cc438.min.js"></script>
      
    
  </body>
</html>