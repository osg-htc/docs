<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>CVMFS - OSG Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "CVMFS";
    var mkdocs_page_input_path = "worker-node/install-cvmfs.md";
    var mkdocs_page_url = "/worker-node/install-cvmfs/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> OSG Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
  
    <a class="" href="../..">Home</a>
  
	    </li>
          
            <li class="toctree-l1">
		
  
    <a class="" href="../../site-planning/">Site Planning</a>
  
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Install Guides - Common</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../common/install-best-practices/">Install Best Practices</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../common/ca/">CA Certificates</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../common/osg-ca-certs-updater/">OSG CA Certificates Updater</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../common/yum/">Yum Repos</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../common/openjdk7/">Java 7</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Worker Node</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../install-wn/">Worker Node (RPM install)</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../install-wn-tarball/">Worker Node (tarball install)</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../install-wn-oasis/">Worker Node (OASIS install)</a>
  
        </li>
        <li class=" current">
          
  
    <a class="current" href="./">CVMFS</a>
  
  <ul class="subnav">
      
    <li class="toctree-l3"><a href="#install-cvmfs">Install CVMFS</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#before-starting">Before Starting</a></li>
        
            <li><a class="toctree-l4" href="#installing-cvmfs">Installing CVMFS</a></li>
        
            <li><a class="toctree-l4" href="#setup-of-fuse-and-automount">Setup of FUSE and automount</a></li>
        
            <li><a class="toctree-l4" href="#configuring-cvmfs">Configuring CVMFS</a></li>
        
            <li><a class="toctree-l4" href="#validating-cvmfs">Validating CVMFS</a></li>
        
            <li><a class="toctree-l4" href="#starting-and-stopping-services">Starting and Stopping services</a></li>
        
            <li><a class="toctree-l4" href="#how-to-get-help">How to get Help?</a></li>
        
            <li><a class="toctree-l4" href="#references">References</a></li>
        
        </ul>
    

  </ul>
        </li>
        <li class="">
          
  
    <a class="" href="../install-singularity/">Singularity</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Compute Element</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../compute-element/htcondor-ce-overview/">HTCondor-CE Overview</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../compute-element/install-htcondor-ce/">Install HTCondor-CE</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../compute-element/job-router-recipes/">Job Router Recipes</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../compute-element/troubleshoot-htcondor-ce/">Troubleshooting HTCondor-CE</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../compute-element/submit-htcondor-ce/">Submitting to HTCondor-CE</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Data</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../data/gridftp/">Install GridFTP Server</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/load-balanced-gridftp/">Install Load Balanced GridFTP</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/install-gridftp-xrootd/">Install GridFtp XRootD</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/frontier-squid/">HTTP Cache</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/update-oasis/">Update OASIS</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/external-oasis-repos/">External OASIS repositories</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/xrootd-overview/">XRootD Overview</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/install-xroot-client/">XRootD Client</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/install-xrootd/">XRootD</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Install Guides - Other</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../other/gsissh/">GSI-enabled SSH</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/hadoop-overview/">Hadoop Overview</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/install-hadoop-2-0-0/">Hadoop</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Security</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../security/lcmaps-voms-authentication/">LCMAPS-VOMS authentication</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../security/host-certs/">Host Certificates</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../security/user-certs/">User Certificates</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../security/osg-ca-manage/">Managing CAs</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Release Information</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../release/notes/">Release Notes</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../release/release_series/">OSG Release Series</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../release/supported_platforms/">Supported Platforms</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../release/yum-basics/">Yum Basics</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../release/signing/">RPM Signing</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../release/contrib/">Contrib Software</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Other</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../other/gsissh/">GSI-enabled SSH</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../other/install-osg-upcoming-software/">OSG upcoming software</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../other/install-gwms-frontend/">GlideinWMS Frontend</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../other/install-cvmfs-stratum1/">Install a CVMFS Stratum 1</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../other/network-performance-toolkit/">Network Performance Toolkit</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Monitoring</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../monitoring/install-rsv/">Install RSV</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../monitoring/advanced-rsv-configuration/">Advanced RSV Configuration</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../monitoring/rsv-control/">Manage RSV via rsv-control</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../monitoring/install-rsv-gwms-tester/">RSV GlideinWMS Tester</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Usage Guides</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../common/pki-cli/">Certificate Tools</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../other/configuration-with-osg-configure/">Configuration with OSG-Configure</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../using-wn/">Worker Node Environment</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Deprecated Software</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../data/bestman-overview/">BeStMan Overview</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/bestman-install/">BeStMan Install</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/install-bestman-xrootd/">BeStMan Xrootd SE</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../security/edg-mkgridmap/">EDG-Mkgridmap Install</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../security/install-gums/">GUMS</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../install-glexec/">Worker node glexec Install</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../other/install-voms/">Install VOMS</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  
    <a class="" href="../../common/help/">Get Help</a>
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">OSG Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Worker Node &raquo;</li>
        
      
    
    <li>CVMFS</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/opensciencegrid/docs/edit/master/docs/worker-node/install-cvmfs.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="install-cvmfs">Install CVMFS<a class="headerlink" href="#install-cvmfs" title="Permanent link">&para;</a></h1>
<p>Here we describe how to install the
<a href="http://cernvm.cern.ch/portal/filesystem">CVMFS</a> (Cern-VM file system) client.
This document is intended for system administrators who wish to
install this client to have access to files distributed by CVMFS
servers via HTTP.</p>
<div class="admonition note">
<p class="admonition-title">Applicable versions</p>
<p>The applicable software versions for this document are OSG Version &gt;= 3.4.3.
The version of CVMFS installed should be &gt;= 2.4.1</p>
</div>
<h2 id="before-starting">Before Starting<a class="headerlink" href="#before-starting" title="Permanent link">&para;</a></h2>
<p>Before starting the installation process, consider the following points (consulting <a href="#reference">the Reference section below</a> as needed):</p>
<ul>
<li><strong>User IDs:</strong> If it does not exist already, the installation will create the <code>cvmfs</code> Linux user</li>
<li><strong>Group IDs:</strong> If they do not exist already, the installation will create the Linux groups <code>cvmfs</code> and <code>fuse</code></li>
<li><strong>Network ports:</strong> You will need network access to a local squid server such as the <a href="../../data/frontier-squid/">squid distributed by OSG</a>. The squid will need out-bound access to cvmfs stratum 1 servers.</li>
<li><strong>Host choice:</strong> -  Sufficient (~20GB+20%) cache space reserved, preferably in a separate filesystem (details <a href="#configuring-cvmfs">below</a>)</li>
<li><strong>FUSE</strong>: CVMFS requires FUSE</li>
</ul>
<p>As with all OSG software installations, there are some one-time (per host) steps to prepare in advance:</p>
<ul>
<li>Ensure the host has <a href="../../release/supported_platforms">a supported operating system</a></li>
<li>Obtain root access to the host</li>
<li>Prepare the <a href="../../common/yum">required Yum repositories</a></li>
</ul>
<h2 id="installing-cvmfs">Installing CVMFS<a class="headerlink" href="#installing-cvmfs" title="Permanent link">&para;</a></h2>
<p>The following will install CVMFS from the OSG yum repository. It will also install fuse and autofs if you do not have them, and it will install the configuration for the OSG CVMFS distribution which is called OASIS. To simplify installation, OSG provides convenience RPMs that install all required software with a single command.</p>
<ol>
<li>
<p>Clean yum cache:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum clean all --enablerepo<span class="o">=</span>*
</pre></div>


</li>
<li>
<p>Update software:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum update
</pre></div>


<p>This command will update <strong>all</strong> packages</p>
</li>
<li>
<p>Install CVMFS software:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum install osg-oasis
</pre></div>


</li>
</ol>
<h2 id="setup-of-fuse-and-automount">Setup of FUSE and automount<a class="headerlink" href="#setup-of-fuse-and-automount" title="Permanent link">&para;</a></h2>
<p>FUSE and automount are required for CVMFS and the steps to configure them are different on EL6 vs EL7. Follow the section that is appropriate for your host's OS:</p>
<ul>
<li><a href="#for-el6-hosts">For EL6 hosts</a></li>
<li><a href="#for-el7-hosts">For EL7 hosts</a></li>
</ul>
<h3 id="for-el6-hosts">For EL6 hosts<a class="headerlink" href="#for-el6-hosts" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Create or edit <code>/etc/fuse.conf</code> so that it contains:</p>
<div class="codehilite"><pre><span></span>user_allow_other
</pre></div>


</li>
<li>
<p>Create or edit <code>/etc/auto.master</code> to have the following contents to enable automounting:</p>
<div class="codehilite"><pre><span></span>/cvmfs /etc/auto.cvmfs
</pre></div>


</li>
<li>
<p>Restart autofs to make the change take effect:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> service autofs restart
</pre></div>


</li>
</ol>
<h3 id="for-el7-hosts">For EL7 hosts<a class="headerlink" href="#for-el7-hosts" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Add the following to <code>/etc/auto.master.d/cvmfs.autofs</code>:</p>
<div class="codehilite"><pre><span></span>/cvmfs /etc/auto.cvmfs
</pre></div>


</li>
<li>
<p>Restart autofs to make the change take effect:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> systemctl restart autofs
</pre></div>


<p><br></p>
</li>
</ol>
<h2 id="configuring-cvmfs">Configuring CVMFS<a class="headerlink" href="#configuring-cvmfs" title="Permanent link">&para;</a></h2>
<p>Create or edit <code>/etc/cvmfs/default.local</code>, a file that controls the
CVMFS configuration. Below is a sample configuration, but please note
that you will need to <strong>edit the parts in <span style="color:red">red</span></strong>. In
particular, the <code>CVMFS_HTTP_PROXY</code> line below must be edited for your
site.</p>
<div class="codehilite"><pre><span></span>CVMFS_REPOSITORIES=&quot;`echo $((echo oasis.opensciencegrid.org;echo cms.cern.ch;ls /cvmfs)|sort -u)|tr &#39; &#39; ,`&quot;
CVMFS_QUOTA_LIMIT=<span style="color:red">20000</span>
CVMFS_HTTP_PROXY=<span style="color:red">&quot;http://squid.example.com:3128&quot;</span>
</pre></div>


<p><br>
CVMFS by default allows any repository to be mounted, no matter what
the setting of <code>CVMFS_REPOSITORIES</code> is; that variable is used by support
tools such as <code>cvmfs_config</code> and <code>cvmfs_talk</code> when they need to know a
list of repositories.  The recommended <code>CVMFS_REPOSITORIES</code> setting
above is so that those tools will use two common repositories plus any
additional that have been mounted.  You may want to choose a different
set of always-known repositories.</p>
<p>Set up a list of CVMFS HTTP proxies to retrieve from in
<code>CVMFS_HTTP_PROXY</code>. If you do not have any squid at your site follow
the instructions to <a href="../../data/frontier-squid">install squid from OSG</a>.
Vertical bars separating proxies means to load balance between them
and try them all before continuing. A semicolon between proxies means
to try that one only after the previous ones have failed. A special
proxy called DIRECT can be placed last in the list to indicate
directly connecting to servers if all other proxies fail. A DIRECT
proxy is acceptable for small sites but discouraged for large sites
because of the potential load that could be put upon globally shared
servers.</p>
<p>Set up the cache limit in <code>CVMFS_QUOTA_LIMIT</code> (in MegaBytes). The
recommended value for most applications is 20000 MB. This is the
combined limit for all but the osgstorage.org repositories. This cache
will be stored in <code>/var/lib/cvmfs</code> by default; to override the
location, set <code>CVMFS_CACHE_BASE</code> in <code>/etc/cvmfs/default.local</code>. Note
that an additional 1000 MB is allocated for a separate osgstorage.org
repositories cache in <code>$CVMFS_CACHE_BASE/osgstorage</code>. To be safe, make
sure that at least 20% more than <code>$CVMFS_QUOTA_LIMIT</code> + 1000 MB of space
stays available for CVMFS in that filesystem. This is very important,
since if that space is not available it can cause many I/O errors and
application crashes. Many system administrators choose to put the
cache space in a separate filesystem, which is a good way to manage
it.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you use SELinux and change <code>CVMFS_CACHE_BASE</code>, then the
new cache directory must be labelled with SELinux type
<code>cvmfs_cache_t</code>. This can be done by executing the following command:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> chcon -R -t cvmfs_cache_t <span style="color:red"><span class="nv">$CVMFS_CACHE_BASE</span></span>
</pre></div>


</div>
<h2 id="validating-cvmfs">Validating CVMFS<a class="headerlink" href="#validating-cvmfs" title="Permanent link">&para;</a></h2>
<p>After CVMFS is installed, you should be able to see the <code>/cvmfs</code>
directory. But note that it will initially appear to be empty:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> ls /cvmfs
<span class="gp">user@host $</span>
</pre></div>


<p><br>
Directories within <code>/cvmfs</code> will not be mounted until you examine them. For instance:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> ls /cvmfs
<span class="gp">user@host $</span> ls -l /cvmfs/atlas.cern.ch
<span class="go">total 1</span>
<span class="go">drwxr-xr-x 8 cvmfs cvmfs 3 Apr 13 14:50 repo</span>
<span class="gp">user@host $</span> ls -l /cvmfs/oasis.opensciencegrid.org/cmssoft
<span class="go">total 1</span>
<span class="go">lrwxrwxrwx 1 cvmfs cvmfs 18 May 13  2015 cms -&gt; /cvmfs/cms.cern.ch</span>
<span class="gp">user@host $</span> ls -l /cvmfs/glast.egi.eu
<span class="go">total 5</span>
<span class="go">drwxr-xr-x 9 cvmfs cvmfs 4096 Feb  7  2014 glast</span>
<span class="gp">user@host $</span> ls -l /cvmfs/nova.osgstorage.org
<span class="go">total 6</span>
<span class="go">lrwxrwxrwx 1 cvmfs cvmfs   43 Jun 14  2016 analysis -&gt; pnfs/fnal.gov/usr/nova/persistent/analysis/</span>
<span class="go">lrwxrwxrwx 1 cvmfs cvmfs   32 Jan 19 11:40 flux -&gt; pnfs/fnal.gov/usr/nova/data/flux</span>
<span class="go">drwxr-xr-x 3 cvmfs cvmfs 4096 Jan 19 11:39 pnfs</span>
<span class="gp">user@host $</span> ls /cvmfs
<span class="go">atlas.cern.ch                   glast.egi.eu         oasis.opensciencegrid.org</span>
<span class="go">config-osg.opensciencegrid.org  nova.osgstorage.org</span>
</pre></div>


<p><br></p>
<h3 id="troubleshooting-problems">Troubleshooting problems<a class="headerlink" href="#troubleshooting-problems" title="Permanent link">&para;</a></h3>
<p>If no directories exist under <code>/cvmfs/</code>, you can try the following
steps to debug:</p>
<ul>
<li>Mount it manually with <code>mkdir -p /mnt/cvmfs</code> and then
  <code>mount -t cvmfs REPOSITORYNAME /mnt/cvmfs</code> where REPOSITORYNAME is
  the repository, for example config-osg.opensciencegrid.org (which is
  the best one to try first because other repositories require it to
  be mounted).  If this works, then CVMFS is working, but there is a
  problem with automount.</li>
<li>If that doesn't work and doesn't give any explanatory errors, try
   <code>cvmfs_config chksetup</code> or <code>cvmfs_config showconfig REPOSITORYNAME</code>
   to verify your setup.</li>
<li>If chksetup reports access problems to proxies, it may be caused by
  access control settings in the squids.</li>
<li>If you have changed settings in <code>/etc/cvmfs/default.local</code>, and they
  do not seem to be taking effect, note that there are other
  configuration files that can override the settings. See the comments
  at the beginning of <code>/etc/cvmfs/default.conf</code> regarding the order in
  which configuration files are evaluated and look for old files that
  may have been left from a previous installation.</li>
<li>More things to try are in the
  <a href="http://cernvm.cern.ch/portal/filesystem/debugmount">upstream documentation</a>.</li>
</ul>
<h2 id="starting-and-stopping-services">Starting and Stopping services<a class="headerlink" href="#starting-and-stopping-services" title="Permanent link">&para;</a></h2>
<p>Once it is set up, CVMFS is always automatically started when one of
the repositories are accessed; there are no system services to start.</p>
<p>CVMFS can be stopped via:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> cvmfs_config umount
<span class="go">Unmounting /cvmfs/config-osg.opensciencegrid.org: OK</span>
<span class="go">Unmounting /cvmfs/atlas.cern.ch: OK</span>
<span class="go">Unmounting /cvmfs/oasis.opensciencegrid.org: OK</span>
<span class="go">Unmounting /cvmfs/glast.egi.eu: OK</span>
<span class="go">Unmounting /cvmfs/nova.osgstorage.org: OK</span>
</pre></div>


<p><br></p>
<h2 id="how-to-get-help">How to get Help?<a class="headerlink" href="#how-to-get-help" title="Permanent link">&para;</a></h2>
<p>If you cannot resolve the problem, there are several ways to receive help:</p>
<ul>
<li>For bug reporting and OSG-specific issues, see our <a href="../../common/help">help procedure</a></li>
<li>For community support and best-effort software team support contact
   <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#111;&#115;&#103;&#45;&#99;&#118;&#109;&#102;&#115;&#64;&#111;&#112;&#101;&#110;&#115;&#99;&#105;&#101;&#110;&#99;&#101;&#103;&#114;&#105;&#100;&#46;&#111;&#114;&#103;">&#111;&#115;&#103;&#45;&#99;&#118;&#109;&#102;&#115;&#64;&#111;&#112;&#101;&#110;&#115;&#99;&#105;&#101;&#110;&#99;&#101;&#103;&#114;&#105;&#100;&#46;&#111;&#114;&#103;</a>.</li>
<li>For general CERN VM FileSystem support contact <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#99;&#101;&#114;&#110;&#118;&#109;&#46;&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#99;&#101;&#114;&#110;&#46;&#99;&#104;">&#99;&#101;&#114;&#110;&#118;&#109;&#46;&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#99;&#101;&#114;&#110;&#46;&#99;&#104;</a>.</li>
</ul>
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="http://cernvm.cern.ch/portal/filesystem/techinformation">http://cernvm.cern.ch/portal/filesystem/techinformation</a></li>
<li><a href="https://cvmfs.readthedocs.io/en/latest/">https://cvmfs.readthedocs.io/en/latest/</a></li>
</ul>
<h3 id="users-and-groups">Users and Groups<a class="headerlink" href="#users-and-groups" title="Permanent link">&para;</a></h3>
<p>This installation will create one user unless it already exists</p>
<table>
<thead>
<tr>
<th align="left">User</th>
<th align="left">Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>cvmfs</code></td>
<td align="left">CernVM-FS service account</td>
</tr>
</tbody>
</table>
<p>The installation will also create a cvmfs group and default the cvmfs
user to that group. In addition, if the fuse rpm is not for some
reason already installed, installing cvmfs will also install fuse and
that will create another group:</p>
<table>
<thead>
<tr>
<th align="left">Group</th>
<th align="left">Comment</th>
<th align="left">Group members</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>cvmfs</code></td>
<td align="left">CernVM-FS service account</td>
<td align="left">none</td>
</tr>
<tr>
<td align="left"><code>fuse</code></td>
<td align="left">FUSE service account</td>
<td align="left"><code>cvmfs</code></td>
</tr>
</tbody>
</table>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../install-singularity/" class="btn btn-neutral float-right" title="Singularity">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../install-wn-oasis/" class="btn btn-neutral" title="Worker Node (OASIS install)"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/opensciencegrid/docs" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../install-wn-oasis/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../install-singularity/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>

</body>
</html>
