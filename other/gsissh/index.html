<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>GSI-enabled SSH - OSG Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "GSI-enabled SSH";
    var mkdocs_page_input_path = "other/gsissh.md";
    var mkdocs_page_url = "/other/gsissh/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-69012-29', 'opensciencegrid.github.io');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> OSG Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
  
    <a class="" href="../..">Home</a>
  
	    </li>
          
            <li class="toctree-l1">
		
  
    <a class="" href="../../site-planning/">Site Planning</a>
  
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Compute Element</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../compute-element/htcondor-ce-overview/">HTCondor-CE Overview</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../compute-element/install-htcondor-ce/">Install HTCondor-CE</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../compute-element/job-router-recipes/">Job Router Recipes</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../compute-element/troubleshoot-htcondor-ce/">Troubleshooting HTCondor-CE</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../compute-element/submit-htcondor-ce/">Submitting to HTCondor-CE</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Worker Node</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../worker-node/using-wn/">Worker Node Overview</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../worker-node/install-wn/">Worker Node via RPM</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../worker-node/install-wn-tarball/">Worker Node via Tarball</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../worker-node/install-wn-oasis/">Worker Node via OASIS</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../worker-node/install-cvmfs/">CVMFS</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../worker-node/install-singularity/">Singularity</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Data - HTTP & CVMFS</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../data/frontier-squid/">Install HTTP Cache</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/update-oasis/">Update OASIS Shared Repo</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/external-oasis-repos/">Install an OASIS Repo</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Data - POSIX Storage</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../data/gridftp/">Install GridFTP Server</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/load-balanced-gridftp/">Install Load Balanced GridFTP</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Data - HDFS</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../data/hadoop-overview/">HDFS Overview</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/install-hadoop-2-0-0/">Install HDFS</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Data - XRootD</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../data/xrootd-overview/">XRootD Overview</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/install-xrootd/">Install XRootD</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/install-xroot-client/">Install XRootD Client</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Security</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../security/lcmaps-voms-authentication/">LCMAPS-VOMS authentication</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../security/host-certs/">Host Certificates</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../security/user-certs/">User Certificates</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../security/certificate-management/">Certificate Management Reference</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Common</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../common/install-best-practices/">Install Best Practices</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../common/ca/">CA Certificates</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../common/yum/">Yum Repos</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../common/openjdk7/">Java 7</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../configuration-with-osg-configure/">Configuration with OSG-Configure</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Other</span>
  <ul class="subnav">
        <li class=" current">
          
  
    <a class="current" href="./">GSI-enabled SSH</a>
  
  <ul class="subnav">
      
    <li class="toctree-l3"><a href="#installing-gsi-openssh">Installing GSI OpenSSH</a></li>
    

    <li class="toctree-l3"><a href="#requirements">Requirements</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#host-and-os">Host and OS</a></li>
        
            <li><a class="toctree-l4" href="#users-and-groups">Users and Groups</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#installation-procedure">Installation procedure</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#gsi-openssh-installation">GSI OpenSSH Installation</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#configuration-and-operations">Configuration and Operations</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#useful-configuration-and-log-files">Useful configuration and log files</a></li>
        
            <li><a class="toctree-l4" href="#configuration">Configuration</a></li>
        
            <li><a class="toctree-l4" href="#using-a-gridmap-file-for-authorization">Using a gridmap file for authorization</a></li>
        
            <li><a class="toctree-l4" href="#using-lcmaps-and-gums-for-authorization">Using LCMAPS and GUMS for authorization</a></li>
        
            <li><a class="toctree-l4" href="#starting-and-enabling-services">Starting and Enabling Services</a></li>
        
            <li><a class="toctree-l4" href="#stopping-and-disabling-services">Stopping and Disabling Services</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#troubleshooting">Troubleshooting</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#test-gsi-openssh">Test GSI OpenSSH</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#how-to-get-help">How to get Help?</a></li>
    

  </ul>
        </li>
        <li class="">
          
  
    <a class="" href="../install-gwms-frontend/">GlideinWMS Frontend</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../install-cvmfs-stratum1/">Install a CVMFS Stratum 1</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../network-performance-toolkit/">Network Performance Toolkit</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Release Information</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../release/notes/">Release Notes</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../release/release_series/">OSG Release Series</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../release/supported_platforms/">Supported Platforms</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../install-osg-upcoming-software/">OSG upcoming software</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../release/yum-basics/">Yum Basics</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../release/signing/">RPM Signing</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../release/contrib/">Contrib Software</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Monitoring</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../monitoring/install-rsv/">Install RSV</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../monitoring/advanced-rsv-configuration/">Advanced RSV Configuration</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../monitoring/rsv-control/">Manage RSV via rsv-control</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../monitoring/install-rsv-gwms-tester/">RSV GlideinWMS Tester</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  <span class="caption-text">Deprecated Software</span>
  <ul class="subnav">
        <li class="">
          
  
    <a class="" href="../../data/bestman-install/">BeStMan Install</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../data/install-bestman-xrootd/">BeStMan Xrootd SE</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../security/edg-mkgridmap/">EDG-Mkgridmap Install</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../security/install-gums/">GUMS</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../../worker-node/install-glexec/">Worker node glexec Install</a>
  
        </li>
        <li class="">
          
  
    <a class="" href="../install-voms/">Install VOMS</a>
  
        </li>
  </ul>
	    </li>
          
            <li class="toctree-l1">
		
  
    <a class="" href="../../common/help/">Get Help</a>
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
            <li class="toctree-l1">
		
  
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">OSG Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Other &raquo;</li>
        
      
    
    <li>GSI-enabled SSH</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/opensciencegrid/docs/edit/master/docs/other/gsissh.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="installing-gsi-openssh">Installing GSI OpenSSH<a class="headerlink" href="#installing-gsi-openssh" title="Permanent link">&para;</a></h1>
<p>This document gives instructions on installing and using the GSI OpenSSH server available in the OSG repository and configuring it so that you can use on your cluster.</p>
<h1 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h1>
<h2 id="host-and-os">Host and OS<a class="headerlink" href="#host-and-os" title="Permanent link">&para;</a></h2>
<p>The GSI OpenSSH rpms will require an user account and group in order for the privilege separation to work.</p>
<h2 id="users-and-groups">Users and Groups<a class="headerlink" href="#users-and-groups" title="Permanent link">&para;</a></h2>
<p>The RPM installation will try to create the <code>gsisshd</code> user and group and the <code>/var/empty/gsisshd</code> directory with the correct ownership if they are not present. If you are using a configuration management system or ROCKS, you should make sure that these users and groups are created before installing the RPMs to avoid potential issues. The gsisshd user should have an empty home directory. By default, this is home directory set to <code>/var/empty/gsisshd</code> and belongs to the <code>gsisshd</code> user and group. You may change it if needed to something else as long as the ownerships remain the same.</p>
<h1 id="installation-procedure">Installation procedure<a class="headerlink" href="#installation-procedure" title="Permanent link">&para;</a></h1>
<p>Prior to install, make sure you have:
<em> <a href="../../common/yum/">Yum repositories correctly configured</a> for OSG.
</em> <a href="../../common/ca/">CA certificates installed</a></p>
<h2 id="gsi-openssh-installation">GSI OpenSSH Installation<a class="headerlink" href="#gsi-openssh-installation" title="Permanent link">&para;</a></h2>
<p>Start with installing GSI OpenSSH from the repository</p>
<div class="codehilite"><pre><span></span><span class="gp">[root@server]#</span> yum install gsi-openssh-server gsi-openssh-clients
</pre></div>


<p>In addition, you'll need to install CA certificates in order for GSIOpenSSH to work. You can follow the instructions below in order to install them:</p>
<h1 id="configuration-and-operations">Configuration and Operations<a class="headerlink" href="#configuration-and-operations" title="Permanent link">&para;</a></h1>
<h2 id="useful-configuration-and-log-files">Useful configuration and log files<a class="headerlink" href="#useful-configuration-and-log-files" title="Permanent link">&para;</a></h2>
<p>Configuration Files</p>
<table>
<thead>
<tr>
<th align="left">Service or Process</th>
<th align="left">Configuration File</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">gsisshd</td>
<td align="left"><code>/etc/gsissh/sshd_config</code></td>
<td align="left">Configuration file</td>
</tr>
<tr>
<td align="left">gsisshd</td>
<td align="left"><code>/etc/sysconfig/gsisshd</code></td>
<td align="left">Environment variables for gsisshd</td>
</tr>
<tr>
<td align="left">gsisshd</td>
<td align="left"><code>/etc/lcmaps.db</code></td>
<td align="left">LCMAPS configuration</td>
</tr>
</tbody>
</table>
<p>Log Files</p>
<table>
<thead>
<tr>
<th align="left">Service or Process</th>
<th align="left">Log File</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">gsisshd</td>
<td align="left"><code>/var/log/messages</code></td>
<td align="left">All log messages</td>
</tr>
</tbody>
</table>
<p>Other Files</p>
<table>
<thead>
<tr>
<th align="left">Service or Process</th>
<th align="left">File</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">gsisshd</td>
<td align="left"><code>/etc/grid-security/hostcert.pem</code></td>
<td align="left">Host certificate</td>
</tr>
<tr>
<td align="left">gsisshd</td>
<td align="left"><code>/etc/grid-security/hostkey.pem</code></td>
<td align="left">X.509 host key</td>
</tr>
<tr>
<td align="left">gsisshd</td>
<td align="left"><code>/etc/gsissh/ssh_host_rsa_key</code></td>
<td align="left">RSA Host key</td>
</tr>
</tbody>
</table>
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h2>
<p>In order to get a running instance of the GSI OpenSSH server, you'll
need to change the default configuration. However, before you go any
further, you'll need to decide whether you want GSI OpenSSH to be your 
primary ssh service or not (e.g. whether the GSI OpenSSH service will 
replace your existing SSH service). If you choose not to replace your 
existing service, you'll need to change the port setting in the GSI 
OpenSSH configuration to another port (e.g. 2222) so that you can run 
both SSH services at the same time. Regardless of your choice, you 
should probably have both services use the same host key. In order 
to do this, symlink <code>/etc/gsissh/ssh_host_dsa_key</code> and <code>/etc/gsissh/ssh_host_rsa_key</code> 
to <code>/etc/ssh/ssh_host_dsa_key</code> and <code>/etc/ssh/ssh_host_rsa_key</code> respectively. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Regardless of the authorization method used for the user, any 
account that will be used with GSI OpenSSH must have a shell 
assigned to it and not be locked (have ! in the password field of <code>/etc/shadow</code>).</p>
</div>
<h2 id="using-a-gridmap-file-for-authorization">Using a gridmap file for authorization<a class="headerlink" href="#using-a-gridmap-file-for-authorization" title="Permanent link">&para;</a></h2>
<p>In order to use gsissh, you'll need to create mappings in your 
<code>/etc/grid-security/grid-mapfile</code> for the DNs that you will 
allow to login. The mappings should be entered one to a line, 
with each line consisting of DN followed by the account the DN 
should map to. Also, you should ensure that the 
<code>/etc/grid-security/gsi-authz.conf</code> file is empty or that all 
of the lines in the file are commented out using a <code>#</code> at the beginning of the line.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The mappings will not consider VOMS extensions so the first mapping that matches will be used regardless of the VO role or VO present in the users proxy</p>
</div>
<p>An example of the <code>/etc/grid-security/grid-mapfile</code> follows:</p>
<div class="codehilite"><pre><span></span>&quot;/DC=org/DC=doegrids/OU=People/CN=USER NAME 123456&quot; useraccount
</pre></div>


<h2 id="using-lcmaps-and-gums-for-authorization">Using LCMAPS and GUMS for authorization<a class="headerlink" href="#using-lcmaps-and-gums-for-authorization" title="Permanent link">&para;</a></h2>
<p>In order to use LCMAPS callouts with GSI OpenSSH, you'll first need to edit <code>/etc/grid-security/gsi-authz.conf</code> to indicate that Globus should do a GSI callout for authorization. The file should contain the following:</p>
<div class="codehilite"><pre><span></span>globus_mapping liblcas_lcmaps_gt4_mapping.so lcmaps_callout
</pre></div>


<p>so that LCMAPS is used. Next, install the lcmaps rpms:</p>
<div class="codehilite"><pre><span></span><span class="gp">[root@server]#</span> yum install lcmaps lcas-lcmaps-gt4-interface
</pre></div>


<p>Finally, you'll need to modify <code>/etc/lcmaps.db</code> so that the <code>gumsclient</code> entry has the correct endpoint for your gums server.</p>
<h2 id="starting-and-enabling-services">Starting and Enabling Services<a class="headerlink" href="#starting-and-enabling-services" title="Permanent link">&para;</a></h2>
<p>To start the services:</p>
<ol>
<li>To start GSI OpenSSH you can use the service command, e.g.:<div class="codehilite"><pre><span></span><span class="gp">[root@server]#</span> service gsisshd start
</pre></div>


</li>
</ol>
<p>You should also enable the appropriate services so that they are automatically started when your system is powered on:</p>
<ul>
<li>To enable OpenSSH by default on the node:<div class="codehilite"><pre><span></span><span class="gp">[root@server]#</span> chkconfig gsisshd on
</pre></div>


</li>
</ul>
<h2 id="stopping-and-disabling-services">Stopping and Disabling Services<a class="headerlink" href="#stopping-and-disabling-services" title="Permanent link">&para;</a></h2>
<p>To stop the services:</p>
<ol>
<li>To stop OpenSSH you can use:<div class="codehilite"><pre><span></span><span class="gp">[root@server]#</span> service gsisshd stop
</pre></div>


</li>
</ol>
<p>In addition, you can disable services by running the following commands. However, you don't need to do this normally.</p>
<ul>
<li>Optionally, to disable OpenSSH:<div class="codehilite"><pre><span></span><span class="gp">[root@server]#</span> chkconfig gsisshd off
</pre></div>


</li>
</ul>
<h1 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h1>
<p>You can get information on troubleshooting errors on the <a href="http://grid.ncsa.illinois.edu/ssh/ts_server.html">NCSA page</a>.</p>
<p>To troubleshoot LCMAPS authorization, you can add the following to <code>/etc/sysconfig/gsisshd</code> and choose a higher debug level:</p>
<div class="codehilite"><pre><span></span><span class="c1"># level 0: no messages, 1: errors, 2: also warnings, 3: also notices,</span>
<span class="c1">#  4: also info, 5: maximum debug</span>
<span class="nv">LCMAPS_DEBUG_LEVEL</span><span class="o">=</span><span class="m">2</span>
</pre></div>


<p>Output goes to <code>/var/log/messages</code> by default.</p>
<h2 id="test-gsi-openssh">Test GSI OpenSSH<a class="headerlink" href="#test-gsi-openssh" title="Permanent link">&para;</a></h2>
<p>After starting the <code>gsisshd</code> service you can check if it is running correctly</p>
<div class="codehilite"><pre><span></span><span class="gp">$</span> grid-proxy-init
<span class="go">Your identity: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=User Name</span>
<span class="go">Enter GRID pass phrase for this identity:</span>
<span class="go">Creating proxy ............................................................................................... Done</span>
<span class="go">Your proxy is valid until: Sat Apr 23 08:18:27 2016</span>
<span class="gp">$</span> gsissh localhost -p <span class="m">2222</span>
<span class="go">Last login: Tue Sep 18 16:08:03 2012 from itb4.uchicago.edu</span>
<span class="gp">$</span>
</pre></div>


<h1 id="how-to-get-help">How to get Help?<a class="headerlink" href="#how-to-get-help" title="Permanent link">&para;</a></h1>
<p>To get assistance please use this <a href="../../common/help">Help Procedure</a>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../install-gwms-frontend/" class="btn btn-neutral float-right" title="GlideinWMS Frontend">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../configuration-with-osg-configure/" class="btn btn-neutral" title="Configuration with OSG-Configure"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/opensciencegrid/docs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../configuration-with-osg-configure/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../install-gwms-frontend/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/require.js"></script>
      <script src="../../search/search.js"></script>

</body>
</html>
