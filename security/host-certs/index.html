



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://opensciencegrid.github.io/docs/security/host-certs/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.1, mkdocs-material-2.9.2">
    
    
      
        <title>Host Certificates - OSG Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.ba0fd1a6.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#host-certificates" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://opensciencegrid.github.io/docs/" title="OSG Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                OSG Documentation
              </span>
              <span class="md-header-nav__topic">
                Host Certificates
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/opensciencegrid/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    OSG Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/opensciencegrid/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../site-planning/" title="Site Planning" class="md-nav__link">
      Site Planning
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Compute Element
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Compute Element
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/htcondor-ce-overview/" title="HTCondor-CE Overview" class="md-nav__link">
      HTCondor-CE Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/install-htcondor-ce/" title="Install HTCondor-CE" class="md-nav__link">
      Install HTCondor-CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/job-router-recipes/" title="Job Router Recipes" class="md-nav__link">
      Job Router Recipes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/troubleshoot-htcondor-ce/" title="Troubleshooting HTCondor-CE" class="md-nav__link">
      Troubleshooting HTCondor-CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/submit-htcondor-ce/" title="Submitting to HTCondor-CE" class="md-nav__link">
      Submitting to HTCondor-CE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Worker Node
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Worker Node
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/using-wn/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn/" title="Install from RPM" class="md-nav__link">
      Install from RPM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn-tarball/" title="Install from Tarball" class="md-nav__link">
      Install from Tarball
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn-oasis/" title="Install from OASIS" class="md-nav__link">
      Install from OASIS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-cvmfs/" title="Install CVMFS" class="md-nav__link">
      Install CVMFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-singularity/" title="Install Singularity" class="md-nav__link">
      Install Singularity
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      HTTP & CVMFS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        HTTP & CVMFS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/frontier-squid/" title="Install Squid HTTP Cache" class="md-nav__link">
      Install Squid HTTP Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/update-oasis/" title="Update OASIS Shared Repo" class="md-nav__link">
      Update OASIS Shared Repo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/external-oasis-repos/" title="Install an OASIS Repo" class="md-nav__link">
      Install an OASIS Repo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      POSIX Storage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        POSIX Storage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/gridftp/" title="Install GridFTP Server" class="md-nav__link">
      Install GridFTP Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/load-balanced-gridftp/" title="Install Load Balanced GridFTP" class="md-nav__link">
      Install Load Balanced GridFTP
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      HDFS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        HDFS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/hadoop-overview/" title="HDFS Overview" class="md-nav__link">
      HDFS Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/install-hadoop/" title="Install HDFS" class="md-nav__link">
      Install HDFS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      XRootD
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        XRootD
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/xrootd-overview/" title="XRootD Overview" class="md-nav__link">
      XRootD Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/install-xrootd/" title="Install XRootD" class="md-nav__link">
      Install XRootD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/install-xroot-client/" title="Using XRootD" class="md-nav__link">
      Using XRootD
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      StashCache
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        StashCache
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/stashcache/overview/" title="StashCache Overview" class="md-nav__link">
      StashCache Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/stashcache/install-cache/" title="Intstall Cache" class="md-nav__link">
      Intstall Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/stashcache/install-origin/" title="Install Origin" class="md-nav__link">
      Install Origin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Security
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Security
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../lcmaps-voms-authentication/" title="LCMAPS-VOMS authentication" class="md-nav__link">
      LCMAPS-VOMS authentication
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Host Certificates
      </label>
    
    <a href="./" title="Host Certificates" class="md-nav__link md-nav__link--active">
      Host Certificates
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-starting" title="Before Starting" class="md-nav__link">
    Before Starting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requesting-incommon-host-certificates" title="Requesting InCommon Host Certificates" class="md-nav__link">
    Requesting InCommon Host Certificates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requesting-host-certificates-using-lets-encrypt" title="Requesting Host Certificates Using Let's Encrypt" class="md-nav__link">
    Requesting Host Certificates Using Let's Encrypt
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requesting-hostservice-certificates-using-the-command-line" title="Requesting Host/Service Certificates Using the Command Line" class="md-nav__link">
    Requesting Host/Service Certificates Using the Command Line
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requesting-grid-admin-privileges" title="Requesting Grid Admin privileges" class="md-nav__link">
    Requesting Grid Admin privileges
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-the-osg-pki-command-line-client" title="Installing the OSG PKI command line client" class="md-nav__link">
    Installing the OSG PKI command line client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validating-your-x509-user-certificate" title="Validating your X.509 user certificate" class="md-nav__link">
    Validating your X.509 user certificate
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requesting-host-certificates" title="Requesting host certificates" class="md-nav__link">
    Requesting host certificates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-host-certificates" title="Installing host certificates" class="md-nav__link">
    Installing host certificates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requesting-and-installing-a-service-certificate" title="Requesting and installing a service certificate" class="md-nav__link">
    Requesting and installing a service certificate
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requesting-service-certificates" title="Requesting service certificates" class="md-nav__link">
    Requesting service certificates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-service-certificates" title="Installing service certificates" class="md-nav__link">
    Installing service certificates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requesting-hostservice-certificate-using-oim" title="Requesting Host/Service Certificate Using OIM" class="md-nav__link">
    Requesting Host/Service Certificate Using OIM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frequently-asked-questions" title="Frequently Asked Questions" class="md-nav__link">
    Frequently Asked Questions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#can-i-use-any-host-to-request-a-certificate-for-a-different-host" title="Can I use any host to request a certificate for a different host?" class="md-nav__link">
    Can I use any host to request a certificate for a different host?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#may-i-reuse-my-host-certificate-as-a-service-certificate" title="May I reuse my host certificate as a service certificate?" class="md-nav__link">
    May I reuse my host certificate as a service certificate?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-do-i-renew-a-hostservice-certificate" title="How do I renew a host/service certificate?" class="md-nav__link">
    How do I renew a host/service certificate?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#i-get-a-gss-authentication-failure-when-users-try-to-authenticate-with-my-site" title="I get a "GSS authentication failure" when users try to authenticate with my site?" class="md-nav__link">
    I get a "GSS authentication failure" when users try to authenticate with my site?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-can-i-check-if-i-have-a-host-certificate-installed-already" title="How can I check if I have a host certificate installed already?" class="md-nav__link">
    How can I check if I have a host certificate installed already?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-can-i-check-the-expiration-time-of-my-installed-host-certificate" title="How can I check the expiration time of my installed host certificate?" class="md-nav__link">
    How can I check the expiration time of my installed host certificate?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" title="References" class="md-nav__link">
    References
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user-certs/" title="User Certificates" class="md-nav__link">
      User Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../certificate-management/" title="Certificate Management Reference" class="md-nav__link">
      Certificate Management Reference
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Common
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Common
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/ca/" title="CA Certificates" class="md-nav__link">
      CA Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/yum/" title="Yum Repos" class="md-nav__link">
      Yum Repos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/configuration-with-osg-configure/" title="Configuration with OSG-Configure" class="md-nav__link">
      Configuration with OSG-Configure
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Other
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Other
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/gsissh/" title="Install GSI-enabled SSH" class="md-nav__link">
      Install GSI-enabled SSH
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/install-gwms-frontend/" title="Install GlideinWMS Frontend" class="md-nav__link">
      Install GlideinWMS Frontend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/install-cvmfs-stratum1/" title="Install a CVMFS Stratum 1" class="md-nav__link">
      Install a CVMFS Stratum 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/network-performance-toolkit/" title="Install the Network Performance Toolkit" class="md-nav__link">
      Install the Network Performance Toolkit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/troubleshooting-gratia/" title="Troubleshooting Gratia" class="md-nav__link">
      Troubleshooting Gratia
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/schedd-filebeats/" title="Install Transfer Log Filebeats" class="md-nav__link">
      Install Transfer Log Filebeats
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Release Information
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Release Information
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/notes/" title="Release Note Overview" class="md-nav__link">
      Release Note Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-2" type="checkbox" id="nav-9-2">
    
    <label class="md-nav__link" for="nav-9-2">
      3.4 Release Notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-2">
        3.4 Release Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-14/" title="OSG Release 3.4.14" class="md-nav__link">
      OSG Release 3.4.14
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-13/" title="OSG Release 3.4.13" class="md-nav__link">
      OSG Release 3.4.13
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12-3/" title="OSG Release 3.4.12-3" class="md-nav__link">
      OSG Release 3.4.12-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12-2/" title="OSG Release 3.4.12-2" class="md-nav__link">
      OSG Release 3.4.12-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12/" title="OSG Release 3.4.12" class="md-nav__link">
      OSG Release 3.4.12
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-11/" title="OSG Release 3.4.11" class="md-nav__link">
      OSG Release 3.4.11
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-10/" title="OSG Release 3.4.10" class="md-nav__link">
      OSG Release 3.4.10
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-9-2/" title="OSG Release 3.4.9-2" class="md-nav__link">
      OSG Release 3.4.9-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-9/" title="OSG Release 3.4.9" class="md-nav__link">
      OSG Release 3.4.9
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-8/" title="OSG Release 3.4.8" class="md-nav__link">
      OSG Release 3.4.8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-7/" title="OSG Release 3.4.7" class="md-nav__link">
      OSG Release 3.4.7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-6-2/" title="OSG Release 3.4.6-2" class="md-nav__link">
      OSG Release 3.4.6-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-6/" title="OSG Release 3.4.6" class="md-nav__link">
      OSG Release 3.4.6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-4/" title="OSG Release 3.4.5-4" class="md-nav__link">
      OSG Release 3.4.5-4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-3/" title="OSG Release 3.4.5-3" class="md-nav__link">
      OSG Release 3.4.5-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-2/" title="OSG Release 3.4.5-2" class="md-nav__link">
      OSG Release 3.4.5-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5/" title="OSG Release 3.4.5" class="md-nav__link">
      OSG Release 3.4.5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4-3/" title="OSG Release 3.4.4-3" class="md-nav__link">
      OSG Release 3.4.4-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4-2/" title="OSG Release 3.4.4-2" class="md-nav__link">
      OSG Release 3.4.4-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4/" title="OSG Release 3.4.4" class="md-nav__link">
      OSG Release 3.4.4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-3/" title="OSG Release 3.4.3" class="md-nav__link">
      OSG Release 3.4.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-2-2/" title="OSG Release 3.4.2-2" class="md-nav__link">
      OSG Release 3.4.2-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-2/" title="OSG Release 3.4.2" class="md-nav__link">
      OSG Release 3.4.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-1-2/" title="OSG Release 3.4.1-2" class="md-nav__link">
      OSG Release 3.4.1-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-1/" title="OSG Release 3.4.1" class="md-nav__link">
      OSG Release 3.4.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-0-2/" title="OSG Release 3.4.0-2" class="md-nav__link">
      OSG Release 3.4.0-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-0/" title="OSG Release 3.4.0" class="md-nav__link">
      OSG Release 3.4.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/release_series/" title="OSG Release Series" class="md-nav__link">
      OSG Release Series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/supported_platforms/" title="Supported Platforms" class="md-nav__link">
      Supported Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/install-osg-upcoming-software/" title="OSG upcoming software" class="md-nav__link">
      OSG upcoming software
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/yum-basics/" title="Yum Basics" class="md-nav__link">
      Yum Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/signing/" title="RPM Signing" class="md-nav__link">
      RPM Signing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/contrib/" title="Contrib Software" class="md-nav__link">
      Contrib Software
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Monitoring
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Monitoring
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/install-rsv/" title="Install RSV" class="md-nav__link">
      Install RSV
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/advanced-rsv-configuration/" title="Advanced RSV Configuration" class="md-nav__link">
      Advanced RSV Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/rsv-control/" title="Manage RSV via rsv-control" class="md-nav__link">
      Manage RSV via rsv-control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/install-rsv-gwms-tester/" title="RSV GlideinWMS Tester" class="md-nav__link">
      RSV GlideinWMS Tester
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../common/help/" title="Get Help" class="md-nav__link">
      Get Help
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-starting" title="Before Starting" class="md-nav__link">
    Before Starting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requesting-incommon-host-certificates" title="Requesting InCommon Host Certificates" class="md-nav__link">
    Requesting InCommon Host Certificates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requesting-host-certificates-using-lets-encrypt" title="Requesting Host Certificates Using Let's Encrypt" class="md-nav__link">
    Requesting Host Certificates Using Let's Encrypt
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requesting-hostservice-certificates-using-the-command-line" title="Requesting Host/Service Certificates Using the Command Line" class="md-nav__link">
    Requesting Host/Service Certificates Using the Command Line
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requesting-grid-admin-privileges" title="Requesting Grid Admin privileges" class="md-nav__link">
    Requesting Grid Admin privileges
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-the-osg-pki-command-line-client" title="Installing the OSG PKI command line client" class="md-nav__link">
    Installing the OSG PKI command line client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validating-your-x509-user-certificate" title="Validating your X.509 user certificate" class="md-nav__link">
    Validating your X.509 user certificate
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requesting-host-certificates" title="Requesting host certificates" class="md-nav__link">
    Requesting host certificates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-host-certificates" title="Installing host certificates" class="md-nav__link">
    Installing host certificates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requesting-and-installing-a-service-certificate" title="Requesting and installing a service certificate" class="md-nav__link">
    Requesting and installing a service certificate
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requesting-service-certificates" title="Requesting service certificates" class="md-nav__link">
    Requesting service certificates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-service-certificates" title="Installing service certificates" class="md-nav__link">
    Installing service certificates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requesting-hostservice-certificate-using-oim" title="Requesting Host/Service Certificate Using OIM" class="md-nav__link">
    Requesting Host/Service Certificate Using OIM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frequently-asked-questions" title="Frequently Asked Questions" class="md-nav__link">
    Frequently Asked Questions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#can-i-use-any-host-to-request-a-certificate-for-a-different-host" title="Can I use any host to request a certificate for a different host?" class="md-nav__link">
    Can I use any host to request a certificate for a different host?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#may-i-reuse-my-host-certificate-as-a-service-certificate" title="May I reuse my host certificate as a service certificate?" class="md-nav__link">
    May I reuse my host certificate as a service certificate?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-do-i-renew-a-hostservice-certificate" title="How do I renew a host/service certificate?" class="md-nav__link">
    How do I renew a host/service certificate?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#i-get-a-gss-authentication-failure-when-users-try-to-authenticate-with-my-site" title="I get a "GSS authentication failure" when users try to authenticate with my site?" class="md-nav__link">
    I get a "GSS authentication failure" when users try to authenticate with my site?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-can-i-check-if-i-have-a-host-certificate-installed-already" title="How can I check if I have a host certificate installed already?" class="md-nav__link">
    How can I check if I have a host certificate installed already?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-can-i-check-the-expiration-time-of-my-installed-host-certificate" title="How can I check the expiration time of my installed host certificate?" class="md-nav__link">
    How can I check the expiration time of my installed host certificate?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" title="References" class="md-nav__link">
    References
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/opensciencegrid/docs/edit/master/docs/security/host-certs.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="host-certificates">Host Certificates<a class="headerlink" href="#host-certificates" title="Permanent link">&para;</a></h1>
<p>Host and service certificates are used to securely identify your system and to
establish encrypted connections between services and clients in the OSG. Host
certificates can be used by any service running on your system. In contrast,
service certificates are used to identify specific services on your machine. For
example, HTCondor-CE typically uses a host certificate while RSV, Gratia,
Tomcat, and Apache httpd use service certificates. Technically, the primary
difference between a host certificate and service certificate is in the common
name (CN) field of the certificate.  A host certificate's CN contains the
hostname (e.g.  mymachine.mydomain.edu) while a service certificate will prepend
a service name to the hostname (e.g. http/mymachine.mydomain.edu for an Apache
httpd service certificate).</p>
<p>Since October 2015 the OSG has run its own OSG CA service that handled host and service certificate requests.
At the end of May 2018, this service will be retired;
see <a href="https://opensciencegrid.org/technology/policy/service-migrations-spring-2018/#osg-ca">the policy details here</a>.
To replace the OSG CA service, we suggest using one or more of the following services depending on your site's needs:</p>
<ul>
<li><a href="https://www.incommon.org/cert/">InCommon</a>: an IGTF-accredited CA for services that interact with the WLCG;
  requires a subscription, generally held by an institution</li>
<li><a href="https://letsencrypt.org/">Let's Encrypt</a>: a free, automated, and open CA frequently used for web services;
  see the <a href="https://opensciencegrid.org/security/LetsEncryptOSGCAbundle/">security team's position on Let's Encrypt</a>
  for more details</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Recommendation</p>
<p>Certificates issued from the OSG CA before the service retirement will still be valid until they expire.
Therefore, we recommend that you request certificates for any currently existing or planned hosts and services
prior to retirement.</p>
</div>
<p>After reading this document you should be able to apply for and install a host
or service certificate on a grid resource.  This document does not explain how
to apply for a grid user certificate. To learn how to apply for a grid user
certificate click <a href="../user-certs/">here</a> instead!</p>
<h2 id="before-starting">Before Starting<a class="headerlink" href="#before-starting" title="Permanent link">&para;</a></h2>
<p>Before requesting a new host or service certificate, you should use <strong>openssl</strong> to 
check if you have a valid certificate already. If so, you may
safely skip this document:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> openssl x509 -in /etc/grid-security/hostcert.pem -subject -issuer -dates -noout
<span class="go">subject= /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=host.opensciencegrid.org</span>
<span class="go">issuer=/DC=org/DC=cilogon/C=US/O=CILogon/CN=CILogon OSG CA 1</span>
<span class="go">notBefore=Jan  4 21:08:09 2010 GMT</span>
<span class="go">notAfter=Jan  4 21:08:09 2011 GMT</span>
</pre></div>


<h2 id="requesting-incommon-host-certificates">Requesting InCommon Host Certificates<a class="headerlink" href="#requesting-incommon-host-certificates" title="Permanent link">&para;</a></h2>
<p>Many institution in the United States already subscribe to InCommon and offer certificate services.
If your institution is in the list of <a href="https://www.incommon.org/certificates/subscribers.html">InCommon subscribers</a>,
continue with the instructions below.
If your institution is not in the list and Let's Encrypt certificates do not meet your needs, please
<a href="../../common/help/">contact us</a>.</p>
<ol>
<li>
<p>Generate a Certificate Signing Request (CSR) and private key:</p>
<ol>
<li>
<p>Create a custom openssl config file for this, <code>incommon.conf</code>, using your institution's information for the
   different fields in the <code>[ dn ]</code> section, and the desired hostname for the <code>CN</code> field.</p>
<div class="codehilite"><pre><span></span><span class="go">[ req ]</span>
<span class="go">default_bits = 2048</span>
<span class="go">prompt = no</span>
<span class="go">encrypt_key = no</span>
<span class="go">default_md = sha256</span>
<span class="go">distinguished_name = dn</span>

<span class="go">[ dn ]</span>
<span class="go">C = <span style="color:red">US</span></span>
<span class="go">ST = <span style="color:red">Wisconsin</span></span>
<span class="go">L = <span style="color:red">Madison</span></span>
<span class="go">O = <span style="color:red">University of Wisconsin-Madison</span></span>
<span class="go">CN = <span style="color:red">voms.opensciencegrid.org</span></span>
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Your institution may require more information in the request.
Try using the CSR generated above in your initial request, and if necessary add additional fields to the
<code>[ dn ]</code> section of your config file.</p>
</div>
</li>
<li>
<p>If you need to generate a CSR with Subject Alternative Names (SAN), add these lines to your <code>incommon.conf</code>,
   with as many alternate DNS entries as needed in the <code>[ alt_names ]</code> section:</p>
<div class="codehilite"><pre><span></span><span class="go">[ req ]</span>
<span class="go">req_extensions = req_ext</span>

<span class="go">[ req_ext ]</span>
<span class="go">subjectAltName = @alt_names</span>

<span class="go">[ alt_names ]</span>
<span class="go">DNS.1 = <span style="color:red">server1.example.com</span></span>
<span class="go">DNS.2 = <span style="color:red">&lt;SAN 2&gt;</span></span>
<span class="go">[...]</span>
<span class="go">DNS.<span style="color:red">&lt;N&gt; = &lt;SAN N&gt;</span></span>
</pre></div>


</li>
<li>
<p>Then, generate the CSR and private key:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@server #</span> openssl req -new -config incommon.conf -keyout incommon.key -out incommon.csr
</pre></div>


</li>
<li>
<p>And verify the new CSR file:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@server #</span> openssl req -text -noout -verify -in incommon.csr
</pre></div>


</li>
</ol>
</li>
<li>
<p>Set the permissions on the private key:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@server #</span> chmod <span class="m">0600</span> incommon.key
</pre></div>


</li>
<li>
<p>Find your institution-specific InCommon contact
   (e.g. <a href="https://it.wisc.edu/about/office-of-the-cio/cybersecurity/security-tools-software/server-certificates/">UW-Madison InCommon contact</a>)
   and submit the CSR that you generated above, asking for the certificate to be signed by the InCommon IGTF CA</p>
</li>
<li>After the certificate has been issued by your institution, download it on its intended host and copy over the key you generated above.</li>
<li>
<p>Verify that the issuer <code>CN</code> field is <code>InCommon IGTF Server CA</code>:</p>
<div class="codehilite"><pre><span></span><span class="gp">$</span> openssl x509 -in <span style="color:red">&lt;PATH TO CERTIFICATE&gt;</span> -noout -issuer
<span class="go">issuer= /C=US/O=Internet2/OU=InCommon/CN=InCommon IGTF Server CA</span>
</pre></div>


</li>
<li>
<p>Install the <a href="#installing-host-certificates">host</a> or <a href="#installing-service-certificates">service</a> certificate</p>
</li>
</ol>
<h2 id="requesting-host-certificates-using-lets-encrypt">Requesting Host Certificates Using <a href="https://letsencrypt.org/">Let's Encrypt</a><a class="headerlink" href="#requesting-host-certificates-using-lets-encrypt" title="Permanent link">&para;</a></h2>
<p><a href="https://letsencrypt.org/">Let's Encrypt</a> is a free, automated, and open CA frequently used for web services;
see the <a href="https://opensciencegrid.github.io/security/LetsEncryptOSGCAbundle/">security team's position on Let's Encrypt</a>
for more details.
Let's Encrypt can be used to obtain host certificates as an alternative to InCommon if your institution does not have
an InCommon subscription.</p>
<p>The <code>letsencrypt</code> software (AKA <code>certbot</code>) can be obtained from the EPEL 7 yum repo:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum install certbot
</pre></div>


<p>If you have any service running on port 80, you will have to disable it temporarily to obtain
certificates, as letsencrypt needs to bind on it temporarily in order to verify the host.
For instance, if you already have an HTCondor-CE set up with the
<a href="https://opensciencegrid.github.io/docs/compute-element/install-htcondor-ce/#install-and-run-the-htcondor-ce-view">HTCondor-CE View service</a>
running, stop the HTCondor-CE View service, as it listens on port 80.</p>
<p>Run the following command to obtain the host certificate with Let's Encrypt:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> certbot certonly --standalone --email <span style="color:red">&lt;ADMIN_EMAIL&gt;</span> -d <span style="color:red">&lt;HOST&gt;</span>
</pre></div>


<p>Set up hostcert/hostkey links:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> ln -s /etc/letsencrypt/live/*/cert.pem /etc/grid-security/hostcert.pem
<span class="gp">root@host #</span> ln -s /etc/letsencrypt/live/*/privkey.pem /etc/grid-security/hostkey.pem
<span class="gp">root@host #</span> chmod <span class="m">0600</span> /etc/letsencrypt/archive/*/privkey*.pem
</pre></div>


<p>Before the host certificate expires, you can renew it with:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> certbot renew
</pre></div>


<p>To automate renewal monthly with a cron job; for example you can create <code>/etc/cron.d/certbot-renew</code> with the following contents:</p>
<div class="codehilite"><pre><span></span><span class="go">* * 1 * * root certbot renew</span>
</pre></div>


<h2 id="requesting-hostservice-certificates-using-the-command-line">Requesting Host/Service Certificates Using the Command Line<a class="headerlink" href="#requesting-hostservice-certificates-using-the-command-line" title="Permanent link">&para;</a></h2>
<p>The OSG PKI Command Line Clients are tested to work on Python version 2.4+. They
have not been tested on Python version 3. In order to proceed you will also
need:</p>
<ul>
<li>an X.509 user certificate</li>
<li>Grid Admin privileges</li>
</ul>
<p>As with all OSG software installations, there are some one-time (per host) steps to prepare in advance:</p>
<ul>
<li>Ensure the host has <a href="../../release/supported_platforms">a supported operating system</a></li>
<li>Obtain root access to the host</li>
<li>Prepare the <a href="../../common/yum">required Yum repositories</a></li>
<li>Install <a href="../../common/ca">CA certificates</a></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you would like to request a host or service certificate without obtaining
Grid Admin privileges, see <a href="#requesting-hostservice-certificate-using-oim">this</a> section. </p>
</div>
<h3 id="requesting-grid-admin-privileges">Requesting Grid Admin privileges<a class="headerlink" href="#requesting-grid-admin-privileges" title="Permanent link">&para;</a></h3>
<p>A Grid Admin is a person associated with a Virtual Organization (VO) that has
been given privileges to automatically approve host certificate requests for a
given domain and any sub-domain.  For example, a Grid Admin for the <code>uchicago.edu</code>
domain would be able to approve host or service certificate requests for
<code>myhost.uchicago.edu</code>, <code>gums.grid.uchicago.edu</code>,
<code>myhost2.subdomain.uchicago.edu</code>, etc.</p>
<p>If you do not have Grid Admin privileges, you can request them
<a href="https://oim.opensciencegrid.org/oim/gridadmin">here</a> after obtaining
your <a href="../user-certs">user certificate</a>.</p>
<h3 id="installing-the-osg-pki-command-line-client">Installing the OSG PKI command line client<a class="headerlink" href="#installing-the-osg-pki-command-line-client" title="Permanent link">&para;</a></h3>
<p>The scripts needed to request host or service certificates are contained in the
<code>osg-pki-tools</code> RPM.  Install it by running the following:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum install osg-pki-tools
</pre></div>


<p>Please refer to <a href="../../security/certificate-management#osg-pki-command-line-clients">this
documentation</a>
for full documentation of the osg-pki-tools.</p>
<h3 id="validating-your-x509-user-certificate">Validating your X.509 user certificate<a class="headerlink" href="#validating-your-x509-user-certificate" title="Permanent link">&para;</a></h3>
<p>Make sure you can create a valid grid proxy with <code>voms-proxy-init</code> or <code>grid-proxy-init</code>. For example :</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> voms-proxy-init 
<span class="go">Enter GRID pass phrase for this identity:</span>
<span class="go">Your identity: /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services=People/CN=Alain Roy 424511</span>
<span class="go">Creating temporary proxy ................................................................................. Done</span>
<span class="go">Contacting  glow-voms.cs.wisc.edu:15001 [/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=glow-voms.cs.wisc.edu] &quot;GLOW&quot; Done</span>
<span class="go">Creating proxy ..................................................................... Done</span>

<span class="go">Your proxy is valid until Fri Dec  2 01:32:47 2011</span>
</pre></div>


<h4 id="requesting-host-certificates">Requesting host certificates<a class="headerlink" href="#requesting-host-certificates" title="Permanent link">&para;</a></h4>
<p>The <strong>osg-gridadmin-cert-request</strong> script only supports requesting host
certificates that are in the same domain.  The certificates are stored with the
format of <code>&lt;hostname&gt;.pem</code> and the corresponding key is stored as
<code>&lt;hostname&gt;-key.pem</code>. For example:</p>
<ul>
<li>
<p>To request a host certificate for <code>host.opensciencegrid.org</code>:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> osg-gridadmin-cert-request -H host.opensciencegrid.org
</pre></div>


</li>
<li>
<p>To request a host certificate for <code>host.opensciencegrid.org</code> with Subject
  Alternative Names (SANs), use the <code>-a</code> flag for each SAN:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> osg-gridadmin-cert-request -H host.opensciencegrid.org -a host1.opensciencegrid.org -a host2.opensciencegrid.org
</pre></div>


</li>
<li>
<p>To request more than one host certificate, you can provide a file with one
  host per line and optional SANs separated with spaces. The following example
  would request three certificates; one for <code>host1.opensciencegrid.org</code>, one for
  <code>host2.opensciencegrid.org</code>, and one for <code>host.opensciencegrid.org</code> with the
  SANs <code>host1.opensciencegrid.org</code> and <code>host2.opensciencegrid.org</code>:</p>
<div class="codehilite"><pre><span></span>host1.opensciencegrid.org
host2.opensciencegrid.org
host.opensciencegrid.org host1.opensciencegrid.org host2.opensciencegrid.org
</pre></div>


<p>If the above contents were saved to <code>hostfile</code>, run the following command to request multiple certificates:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> osg-gridadmin-cert-request -f hostfile
</pre></div>


</li>
</ul>
<h4 id="installing-host-certificates">Installing host certificates<a class="headerlink" href="#installing-host-certificates" title="Permanent link">&para;</a></h4>
<p>Finally, install the certificate in the default location <code>/etc/grid-security/</code>:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> cp ./host.opensciencegrid.org.pem /etc/grid-security/hostcert.pem
<span class="gp">root@host #</span> chmod <span class="m">444</span> /etc/grid-security/hostcert.pem
<span class="gp">root@host #</span> cp ./host.opensciencegrid.org-key.pem /etc/grid-security/hostkey.pem
<span class="gp">root@host #</span> chmod <span class="m">400</span> /etc/grid-security/hostkey.pem
</pre></div>


<h3 id="requesting-and-installing-a-service-certificate">Requesting and installing a service certificate<a class="headerlink" href="#requesting-and-installing-a-service-certificate" title="Permanent link">&para;</a></h3>
<h4 id="requesting-service-certificates">Requesting service certificates<a class="headerlink" href="#requesting-service-certificates" title="Permanent link">&para;</a></h4>
<p>To request a service certificate, use the same <strong>osg-gridadmin-cert-request</strong> command used to request host certificates
but prepend the service name, <code>&lt;SERVICE&gt;</code>, to the requested hostname:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> osg-gridadmin-cert-request -H <span style="color:red">&lt;SERVICE&gt;</span>/host.opensciencegrid.org
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All methods for <a href="#requesting-host-certificates">requesting host certificates</a> can also be used to request service certificates</p>
</div>
<h4 id="installing-service-certificates">Installing service certificates<a class="headerlink" href="#installing-service-certificates" title="Permanent link">&para;</a></h4>
<p>Since a single host can run multiple services, service certificates must be placed in their own directory.</p>
<ol>
<li>
<p>Create a directory indicating the name of the service, <code>&lt;SERVICE&gt;</code>, under <code>/etc/grid-security/</code>.</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> mkdir /etc/grid-security/&lt;SERVICE&gt;
</pre></div>


</li>
<li>
<p>Copy and rename the service certificate and key to the <code>&lt;SERVICE&gt;</code> directory that you created above:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> cp ./<span style="color:red">&lt;SERVICE&gt;</span>-host.opensciencegrid.org.pem /etc/grid-security/<span style="color:red">&lt;SERVICE&gt;</span>/<span style="color:red">&lt;SERVICE&gt;</span>cert.pem
<span class="gp">root@host #</span> cp ./<span style="color:red">&lt;SERVICE&gt;</span>-host.opensciencegrid.org-key.pem /etc/grid-security/<span style="color:red">&lt;SERVICE&gt;</span>/<span style="color:red">&lt;SERVICE&gt;</span>key.pem
</pre></div>


<p>For example, the service certificate for an Apache httpd service should be installed in <code>/etc/grid-security/http</code>:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> cp ./http-host.opensciencegrid.org.pem /etc/grid-security/http/httpcert.pem
<span class="gp">root@host #</span> cp ./http-host.opensciencegrid.org-key.pem /etc/grid-security/http/httpkey.pem
</pre></div>


</li>
<li>
<p>Set the appropriate permissions on the service certificate and key</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> chmod <span class="m">444</span> /etc/grid-security/<span style="color:red">&lt;SERVICE&gt;</span>/<span style="color:red">&lt;SERVICE&gt;</span>cert.pem
<span class="gp">root@host #</span> chmod <span class="m">400</span> /etc/grid-security/<span style="color:red">&lt;SERVICE&gt;</span>/<span style="color:red">&lt;SERVICE&gt;</span>key.pem
</pre></div>


</li>
<li>
<p>Set the ownership of the directory and its underlying files to the Unix user, indicated as <code>&lt;USER&gt;</code>, who runs the service:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> chown -R <span style="color:red">&lt;USER&gt;</span>:<span style="color:red">&lt;USER&gt;</span> /etc/grid-security/<span style="color:red">&lt;SERVICE&gt;</span>/
</pre></div>


<p>For example, both the Apache and Tomcat services are run by the <code>tomcat</code> user:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> chown -R tomcat:tomcat /etc/grid-security/http/
</pre></div>


</li>
</ol>
<h2 id="requesting-hostservice-certificate-using-oim">Requesting Host/Service Certificate Using OIM<a class="headerlink" href="#requesting-hostservice-certificate-using-oim" title="Permanent link">&para;</a></h2>
<p>If you do not have Grid Admin privileges, please use OIM to request any host or
service certificates that you may need.  The OSG PKI Certificate Request &amp;
Management System can be found at:
<a href="https://oim.opensciencegrid.org/oim/certificate">https://oim.opensciencegrid.org/oim/certificate</a>. Alternatively, you can request
Grid Admin privileges <a href="https://oim.opensciencegrid.org/oim/gridadmin">here</a> after obtaining
your <a href="../user-certs">user certificate</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permanent link">&para;</a></h2>
<h3 id="can-i-use-any-host-to-request-a-certificate-for-a-different-host">Can I use any host to request a certificate for a different host?<a class="headerlink" href="#can-i-use-any-host-to-request-a-certificate-for-a-different-host" title="Permanent link">&para;</a></h3>
<p>YES, you can use any host to create a certificate request as long as the hostname for the certificate is a fully qualified domain name.</p>
<h3 id="may-i-reuse-my-host-certificate-as-a-service-certificate">May I reuse my host certificate as a service certificate?<a class="headerlink" href="#may-i-reuse-my-host-certificate-as-a-service-certificate" title="Permanent link">&para;</a></h3>
<p>NO! For security reasons, please do not use clones of your host certificate for additional certificates even though it's technically possible.</p>
<h3 id="how-do-i-renew-a-hostservice-certificate">How do I renew a host/service certificate?<a class="headerlink" href="#how-do-i-renew-a-hostservice-certificate" title="Permanent link">&para;</a></h3>
<p>There is no separate procedure. Simply ask for a new certificate the same way you asked for it the previous time.</p>
<h3 id="i-get-a-gss-authentication-failure-when-users-try-to-authenticate-with-my-site">I get a "GSS authentication failure" when users try to authenticate with my site?<a class="headerlink" href="#i-get-a-gss-authentication-failure-when-users-try-to-authenticate-with-my-site" title="Permanent link">&para;</a></h3>
<p>You likely used an <strong>alias</strong> for the host instead of the fully qualified domain
name when you generated the certificate request. This can cause the GSS
authentication failures similar to the following when a user tries to
authenticate to the host after your certificate is installed:</p>
<div class="codehilite"><pre><span></span><span class="go">GSS authentication failure </span>
<span class="go">GSS Major Status: General failure </span>
<span class="go">GSS Minor Status Error Chain: </span>
<span class="go">accept_sec_context.c:gss_accept_sec_context:403: </span>
<span class="go">Error during delegation: Delegation protocol violation </span>
<span class="go">Failure: GSS failed Major:000d0000 Minor:00000001 Token:00000000 </span>
</pre></div>


<h3 id="how-can-i-check-if-i-have-a-host-certificate-installed-already">How can I check if I have a host certificate installed already?<a class="headerlink" href="#how-can-i-check-if-i-have-a-host-certificate-installed-already" title="Permanent link">&para;</a></h3>
<p>By default the host certificate key pair will be installed in
<code>/etc/grid-security/hostcert.pem</code> and <code>/etc/grid-security/hostkey.pem</code>. You can
use <strong>openssl</strong> to access basic information about the certificate:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> openssl x509 -in /etc/grid-security/hostcert.pem -subject -issuer -dates -noout
<span class="go">subject= /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=host.opensciencegrid.org</span>
<span class="go">issuer= /DC=org/DC=cilogon/C=US/O=CILogon/CN=CILogon OSG CA 1</span>
<span class="go">notBefore=Apr  8 00:00:00 2013 GMT</span>
<span class="go">notAfter=May 17 12:00:00 2014 GMT</span>
</pre></div>


<h3 id="how-can-i-check-the-expiration-time-of-my-installed-host-certificate">How can I check the expiration time of my installed host certificate?<a class="headerlink" href="#how-can-i-check-the-expiration-time-of-my-installed-host-certificate" title="Permanent link">&para;</a></h3>
<p>If you installed the Certificates Script Package you can use <strong>grid-cert-info</strong>
to retrieve information about the certificate:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> grid-cert-info -file /etc/grid-security/hostcert.pem -startdate -enddate
<span class="go">Jan  4 21:08:41 2010 GMT</span>
<span class="go">Jan  4 21:08:41 2011 GMT</span>
</pre></div>


<p>Alternatively you can use <strong>openssl</strong>:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> openssl x509 -in /etc/grid-security/hostcert.pem -dates -noout
<span class="go">notBefore=Jan  4 21:08:41 2010 GMT</span>
<span class="go">notAfter=Jan  4 21:08:41 2011 GMT</span>
</pre></div>


<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="http://www.cilogon.org/globus-with-incommon-ca">CILogon documentation for requesting InCommon certificates</a></li>
<li>
<p><a href="http://security.ncsa.illinois.edu/research/grid-howtos/usefulopenssl.html">Useful OpenSSL commands (from NCSA)</a> - e.g. how to convert the format of your certificate.</p>
</li>
<li>
<p><a href="https://letsencrypt.org/getting-started/">Official Let's Encrypt setup guide</a></p>
</li>
<li>
<p>Another <a href="https://github.com/cilogon/letsencrypt-certificates">Let's Encrypt setup reference</a>
    Under Getting your host certificate, we follow the first "Setting up" section.</p>
</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../lcmaps-voms-authentication/" title="LCMAPS-VOMS authentication" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                LCMAPS-VOMS authentication
              </span>
            </div>
          </a>
        
        
          <a href="../user-certs/" title="User Certificates" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                User Certificates
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.a59e2a89.js"></script>
      
      <script>app.initialize({version:"0.17.1",url:{base:"../.."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-69012-29","opensciencegrid.github.io"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>